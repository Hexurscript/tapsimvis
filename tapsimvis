--[[
    scoot ui library
    made by MjContigazxc 
    

    This Is Sick Ui
    date: Nov/03/2025
]]

if Library then
    Library:Unload()
end

local LoadTick = os.clock()

local Library do
    local Workspace = game:GetService("Workspace")
    local UserInputService = game:GetService("UserInputService")
    local Players = game:GetService("Players")
    local HttpService = game:GetService("HttpService")
    local RunService = game:GetService("RunService")
    local CoreGui = cloneref and cloneref(game:GetService("CoreGui")) or game:GetService("CoreGui")
    local TweenService = game:GetService("TweenService")

    gethui = gethui or function()
        return CoreGui
    end

    local LocalPlayer = Players.LocalPlayer
    local Camera = Workspace.CurrentCamera
    local Mouse = LocalPlayer:GetMouse()

    local FromRGB = Color3.fromRGB
    local FromHSV = Color3.fromHSV
    local FromHex = Color3.fromHex

    local RGBSequence = ColorSequence.new
    local RGBSequenceKeypoint = ColorSequenceKeypoint.new
    local NumSequence = NumberSequence.new
    local NumSequenceKeypoint = NumberSequenceKeypoint.new

    local UDim2New = UDim2.new
    local UDimNew = UDim.new
    local Vector2New = Vector2.new

    local MathClamp = math.clamp
    local MathFloor = math.floor
    local MathAbs = math.abs
    local MathSin = math.sin

    local TableInsert = table.insert
    local TableFind = table.find
    local TableRemove = table.remove
    local TableConcat = table.concat
    local TableClone = table.clone
    local TableUnpack = table.unpack

    local StringFormat = string.format
    local StringFind = string.find
    local StringGSub = string.gsub
    local StringLower = string.lower
    local StringLen = string.len

    local InstanceNew = Instance.new

    local RectNew = Rect.new

    local IsMobile = UserInputService.TouchEnabled or false

    Library = {
        Theme =  { },

        MenuKeybind = tostring(Enum.KeyCode.Insert), 
        Flags = { },

        Tween = {
            Time = 0.2,
            Style = Enum.EasingStyle.Quad,
            Direction = Enum.EasingDirection.Out
        },

        FadeSpeed = 0.2,

        Folders = {
            Directory = "scoot",
            Configs = "scoot/Configs",
            Assets = "scoot/Assets",
        },

        Images = {
            ["Saturation"] = {"Saturation.png", "https://github.com/sametexe001/images/blob/main/saturation.png?raw=true" },
            ["Value"] = { "Value.png", "https://github.com/sametexe001/images/blob/main/value.png?raw=true" },
            ["Hue"] = { "Hue.png", "https://github.com/sametexe001/images/blob/main/horizontalhue.png?raw=true" },
            ["Checkers"] = { "Checkers.png", "https://github.com/sametexe001/images/blob/main/checkers.png?raw=true" },
        },

        -- Ignore below
        Pages = { },
        Sections = { },

        Connections = { },
        Threads = { },

        ThemeMap = { },
        ThemeItems = { },

        CopiedColor = nil,

        OpenFrames = { },

        CurrentPage = nil,

        SearchItems = { },

        SetFlags = { },

        UnnamedConnections = 0,
        UnnamedFlags = 0,

        Holder = nil,
        NotifHolder = nil,
        UnusedHolder = nil,
        Font = nil,
        KeyList = nil,

        Colorpickers = { },
    }

    Library.__index = Library
    Library.Sections.__index = Library.Sections
    Library.Pages.__index = Library.Pages

    local Keys = {
        ["Unknown"]           = "Unknown",
        ["Backspace"]         = "Back",
        ["Tab"]               = "Tab",
        ["Clear"]             = "Clear",
        ["Return"]            = "Return",
        ["Pause"]             = "Pause",
        ["Escape"]            = "Escape",
        ["Space"]             = "Space",
        ["QuotedDouble"]      = '"',
        ["Hash"]              = "#",
        ["Dollar"]            = "$",
        ["Percent"]           = "%",
        ["Ampersand"]         = "&",
        ["Quote"]             = "'",
        ["LeftParenthesis"]   = "(",
        ["RightParenthesis"]  = " )",
        ["Asterisk"]          = "*",
        ["Plus"]              = "+",
        ["Comma"]             = ",",
        ["Minus"]             = "-",
        ["Period"]            = ".",
        ["Slash"]             = "`",
        ["Three"]             = "3",
        ["Seven"]             = "7",
        ["Eight"]             = "8",
        ["Colon"]             = ":",
        ["Semicolon"]         = ";",
        ["LessThan"]          = "<",
        ["GreaterThan"]       = ">",
        ["Question"]          = "?",
        ["Equals"]            = "=",
        ["At"]                = "@",
        ["LeftBracket"]       = "LeftBracket",
        ["RightBracket"]      = "RightBracked",
        ["BackSlash"]         = "BackSlash",
        ["Caret"]             = "^",
        ["Underscore"]        = "_",
        ["Backquote"]         = "`",
        ["LeftCurly"]         = "{",
        ["Pipe"]              = "|",
        ["RightCurly"]        = "}",
        ["Tilde"]             = "~",
        ["Delete"]            = "Delete",
        ["End"]               = "End",
        ["KeypadZero"]        = "Keypad0",
        ["KeypadOne"]         = "Keypad1",
        ["KeypadTwo"]         = "Keypad2",
        ["KeypadThree"]       = "Keypad3",
        ["KeypadFour"]        = "Keypad4",
        ["KeypadFive"]        = "Keypad5",
        ["KeypadSix"]         = "Keypad6",
        ["KeypadSeven"]       = "Keypad7",
        ["KeypadEight"]       = "Keypad8",
        ["KeypadNine"]        = "Keypad9",
        ["KeypadPeriod"]      = "KeypadP",
        ["KeypadDivide"]      = "KeypadD",
        ["KeypadMultiply"]    = "KeypadM",
        ["KeypadMinus"]       = "KeypadM",
        ["KeypadPlus"]        = "KeypadP",
        ["KeypadEnter"]       = "KeypadE",
        ["KeypadEquals"]      = "KeypadE",
        ["Insert"]            = "Insert",
        ["Home"]              = "Home",
        ["PageUp"]            = "PageUp",
        ["PageDown"]          = "PageDown",
        ["RightShift"]        = "RightShift",
        ["LeftShift"]         = "LeftShift",
        ["RightControl"]      = "RightControl",
        ["LeftControl"]       = "LeftControl",
        ["LeftAlt"]           = "LeftAlt",
        ["RightAlt"]          = "RightAlt"
    }

    local Themes = {
        ["Preset"] = {
            ["Background"] = FromRGB(14, 17, 15),
            ["Border"] = FromRGB(12, 12, 12),
            ["Inline"] = FromRGB(20, 24, 21),
            ["Hovered Element"] = FromRGB(37, 42, 45),
            ["Page Background"] = FromRGB(25, 30, 26),
            ["Outline"] = FromRGB(42, 49, 45),
            ["Element"] = FromRGB(30, 36, 31),
            ["Gradient"] = FromRGB(208, 208, 208),
            ["Text"] = FromRGB(235, 235, 235),
            ["Text Stroke"] = FromRGB(0, 0, 0),
            ["Placeholder Text"] = FromRGB(185, 185, 185),
            ["Accent"] = FromRGB(202, 243, 255)
        }
    }

    Library.Theme = TableClone(Themes["Preset"])

    -- Folders
    for Index, Value in Library.Folders do 
        if not isfolder(Value) then
            makefolder(Value)
        end
    end

    -- Images
    for Index, Value in Library.Images do 
        local ImageData = Value

        local ImageName = ImageData[1]
        local ImageLink = ImageData[2]
        
        if not isfile(Library.Folders.Assets .. "/" .. ImageName) then
            writefile(Library.Folders.Assets .. "/" .. ImageName, game:HttpGet(ImageLink))
        end
    end

    -- Tweening
    local Tween = { } do
        Tween.__index = Tween

        Tween.Create = function(self, Item, Info, Goal, IsRawItem)
            Item = IsRawItem and Item or Item.Instance
            Info = Info or TweenInfo.new(Library.Tween.Time, Library.Tween.Style, Library.Tween.Direction)

            local NewTween = {
                Tween = TweenService:Create(Item, Info, Goal),
                Info = Info,
                Goal = Goal,
                Item = Item
            }

            NewTween.Tween:Play()

            setmetatable(NewTween, Tween)

            return NewTween
        end

        Tween.GetProperty = function(self, Item)
            Item = Item or self.Item 

            if Item:IsA("Frame") then
                return { "BackgroundTransparency" }
            elseif Item:IsA("TextLabel") or Item:IsA("TextButton") then
                return { "TextTransparency", "BackgroundTransparency" }
            elseif Item:IsA("ImageLabel") or Item:IsA("ImageButton") then
                return { "BackgroundTransparency", "ImageTransparency" }
            elseif Item:IsA("ScrollingFrame") then
                return { "BackgroundTransparency", "ScrollBarImageTransparency" }
            elseif Item:IsA("TextBox") then
                return { "TextTransparency", "BackgroundTransparency" }
            elseif Item:IsA("UIStroke") then 
                return { "Transparency" }
            end
        end

        Tween.FadeItem = function(self, Item, Property, Visibility, Speed)
            local Item = Item or self.Item 

            local OldTransparency = Item[Property]
            Item[Property] = Visibility and 1 or OldTransparency

            local NewTween = Tween:Create(Item, TweenInfo.new(Speed or Library.Tween.Time, Library.Tween.Style, Library.Tween.Direction), {
                [Property] = Visibility and OldTransparency or 1
            }, true)

            Library:Connect(NewTween.Tween.Completed, function()
                if not Visibility then 
                    task.wait()
                    Item[Property] = OldTransparency
                end
            end)

            return NewTween
        end

        Tween.Get = function(self)
            if not self.Tween then 
                return
            end

            return self.Tween, self.Info, self.Goal
        end

        Tween.Pause = function(self)
            if not self.Tween then 
                return
            end

            self.Tween:Pause()
        end

        Tween.Play = function(self)
            if not self.Tween then 
                return
            end

            self.Tween:Play()
        end

        Tween.Clean = function(self)
            if not self.Tween then 
                return
            end

            Tween:Pause()
            self = nil
        end
    end

    -- Instances
    local Instances = { } do
        Instances.__index = Instances

        Instances.Create = function(self, Class, Properties)
            local NewItem = {
                Instance = InstanceNew(Class),
                Properties = Properties,
                Class = Class
            }

            setmetatable(NewItem, Instances)

            for Property, Value in NewItem.Properties do
                NewItem.Instance[Property] = Value
            end

            return NewItem
        end

        Instances.FadeItem = function(self, Visibility, Speed)
            local Item = self.Instance

            if Visibility == true then 
                Item.Visible = true
            end

            local Descendants = Item:GetDescendants()
            TableInsert(Descendants, Item)

            local NewTween

            for Index, Value in Descendants do 
                local TransparencyProperty = Tween:GetProperty(Value)

                if not TransparencyProperty then 
                    continue
                end

                if type(TransparencyProperty) == "table" then 
                    for _, Property in TransparencyProperty do 
                        NewTween = Tween:FadeItem(Value, Property, not Visibility, Speed)
                    end
                else
                    NewTween = Tween:FadeItem(Value, TransparencyProperty, not Visibility, Speed)
                end
            end
        end

        Instances.AddToTheme = function(self, Properties)
            if not self.Instance then 
                return
            end

            Library:AddToTheme(self, Properties) -- this line I got console error and break ui after I insert u provide code in console "addtotheme" error fix this 
        end

        Instances.ChangeItemTheme = function(self, Properties)
            if not self.Instance then 
                return
            end

            Library:ChangeItemTheme(self, Properties)
        end

        Instances.Connect = function(self, Event, Callback, Name)
            if not self.Instance then 
                return
            end

            if not self.Instance[Event] then 
                return
            end

            if IsMobile then
                if Event == "MouseButton1Down" or Event == "MouseButton1Click" then
                    Event = "TouchTap"
                elseif Event == "MouseButton2Down" or Event == "MouseButton2Click" then
                    Event = "TouchLongPress"
                end
            end

            return Library:Connect(self.Instance[Event], Callback, Name)
        end

        Instances.Tween = function(self, Info, Goal)
            if not self.Instance then 
                return
            end

            return Tween:Create(self, Info, Goal)
        end

        Instances.Disconnect = function(self, Name)
            if not self.Instance then 
                return
            end

            return Library:Disconnect(Name)
        end

        Instances.Clean = function(self)
            if not self.Instance then 
                return
            end

            self.Instance:Destroy()
            self = nil
        end

        Instances.MakeDraggable = function(self)
            if not self.Instance then 
                return
            end

            local Gui = self.Instance

            local Dragging = false 
            local DragStart
            local StartPosition 

            local Set = function(Input)
                local DragDelta = Input.Position - DragStart
                self:Tween(TweenInfo.new(0.16, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(StartPosition.X.Scale, StartPosition.X.Offset + DragDelta.X, StartPosition.Y.Scale, StartPosition.Y.Offset + DragDelta.Y)})
            end

            local InputChanged

            self:Connect("InputBegan", function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
                    Dragging = true

                    DragStart = Input.Position
                    StartPosition = Gui.Position

                    if InputChanged then 
                        return
                    end

                    InputChanged = Input.Changed:Connect(function()
                        if Input.UserInputState == Enum.UserInputState.End then
                            Dragging = false

                            InputChanged:Disconnect()
                            InputChanged = nil
                        end
                    end)
                end
            end)

            Library:Connect(UserInputService.InputChanged, function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseMovement or Input.UserInputType == Enum.UserInputType.Touch then
                    if Dragging then
                        Set(Input)
                    end
                end
            end)

            return Dragging
        end

        Instances.MakeResizeable = function(self, Minimum, Maximum)
            if not self.Instance then 
                return
            end

            local Gui = self.Instance

            local Resizing = false 
            local Start = UDim2New()
            local Delta = UDim2New()
            local ResizeMax = Gui.Parent.AbsoluteSize - Gui.AbsoluteSize

            local ResizeButton = Instances:Create("ImageButton", {
				Parent = Gui,
                Image = "rbxassetid://",
				AnchorPoint = Vector2New(1, 1),
				BorderColor3 = FromRGB(0, 0, 0),
				Size = UDim2New(0, 6, 0, 6),
				Position = UDim2New(1, -4, 1, -4),
                Name = "\0",
				BorderSizePixel = 0,
				BackgroundTransparency = 1,
                ZIndex = 5,
				AutoButtonColor = false,
                Visible = true,
			})  ResizeButton:AddToTheme({ImageColor3 = "Accent"})

            local InputChanged

            ResizeButton:Connect("InputBegan", function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then

                    Resizing = true

                    Start = Gui.Size - UDim2New(0, Input.Position.X, 0, Input.Position.Y)

                    if InputChanged then 
                        return
                    end

                    InputChanged = Input.Changed:Connect(function()
                        if Input.UserInputState == Enum.UserInputState.End then
                            Resizing = false

                            InputChanged:Disconnect()
                            InputChanged = nil
                        end
                    end)
                end
            end)

            Library:Connect(UserInputService.InputChanged, function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseMovement or Input.UserInputType == Enum.UserInputType.Touch then
                    if Resizing then
                        ResizeMax = Maximum or Gui.Parent.AbsoluteSize - Gui.AbsoluteSize

                        Delta = Start + UDim2New(0, Input.Position.X, 0, Input.Position.Y)
                        Delta = UDim2New(0, math.clamp(Delta.X.Offset, Minimum.X, ResizeMax.X), 0, math.clamp(Delta.Y.Offset, Minimum.Y, ResizeMax.Y))

                        Tween:Create(Gui, TweenInfo.new(0.17, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Size = Delta}, true)
                    end
                end
            end)

            return Resizing
        end

        Instances.OnHover = function(self, Function)
            if not self.Instance then 
                return
            end
            
            return Library:Connect(self.Instance.MouseEnter, Function)
        end

        Instances.OnHoverLeave = function(self, Function)
            if not self.Instance then 
                return
            end
            
            return Library:Connect(self.Instance.MouseLeave, Function)
        end

        Instances.Border = function(self, Type)
            if not self.Instance then 
                return
            end

            local Color = Type == "Border" and Library.Theme.Border or Type == "Outline" and Library.Theme.Outline
        
            local UIStroke = Instances:Create("UIStroke", {
                Parent = self.Instance,
                Color = Color,
                Thickness = 1,
                LineJoinMode = Enum.LineJoinMode.Miter
            })  UIStroke:AddToTheme({Color = Type})

            return UIStroke
        end

        Instances.TextBorder = function(self)
            if not self.Instance then 
                return
            end

            local UIStroke = Instances:Create("UIStroke", {
                Parent = self.Instance,
                Color = Library.Theme["Text Stroke"],
                Thickness = 1,
                Transparency = 0.6,
                LineJoinMode = Enum.LineJoinMode.Miter
            })  UIStroke:AddToTheme({Color = "Text Stroke"})

            return UIStroke
        end 
    end

    -- Custom font
    local CustomFont = { } do
        function CustomFont:New(Name, Weight, Style, Data)
            if isfile(Library.Folders.Assets .. "/" .. Name .. ".json") then
                return Font.new(getcustomasset(Library.Folders.Assets .. "/" .. Name .. ".json"))
            end

            if not isfile(Library.Folders.Assets .. "/" .. Name .. ".ttf") then 
                writefile(Library.Folders.Assets .. "/" .. Name .. ".ttf", game:HttpGet(Data.Url))
            end

            local FontData = {
                name = Name,
                faces = { {
                    name = "Regular",
                    weight = Weight,
                    style = Style,
                    assetId = getcustomasset(Library.Folders.Assets .. "/" .. Name .. ".ttf")
                } }
            }

            writefile(Library.Folders.Assets .. "/" .. Name .. ".json", HttpService:JSONEncode(FontData))
            return Font.new(getcustomasset(Library.Folders.Assets .. "/" .. Name .. ".json"))
        end

        function CustomFont:Get(Name)
            if isfile(Library.Folders.Assets .. "/" .. Name .. ".json") then
                return Font.new(getcustomasset(Library.Folders.Assets .. "/" .. Name .. ".json"))
            end
        end

        CustomFont:New("Monaco", 400, "Regular", {
            Url = "https://github.com/sametexe001/luas/raw/refs/heads/main/fonts/Monaco.ttf"
        })

        Library.Font = CustomFont:Get("Monaco")
    end

    Library.Holder = Instances:Create("ScreenGui", {
        Parent = gethui(),
        Name = "\0",
        ZIndexBehavior = Enum.ZIndexBehavior.Global,
        DisplayOrder = 2,
        ResetOnSpawn = false
    })

    Library.UnusedHolder = Instances:Create("ScreenGui", {
        Parent = gethui(),
        Name = "\0",
        ZIndexBehavior = Enum.ZIndexBehavior.Global,
        Enabled = false,
        ResetOnSpawn = false
    })

    Library.NotifHolder = Instances:Create("Frame", {
        Parent = Library.Holder.Instance,
        Name = "\0",
        BackgroundTransparency = 1,
        Size = UDim2New(0, 0, 1, 0),
        BorderColor3 = FromRGB(0, 0, 0),
        BorderSizePixel = 0,
        AutomaticSize = Enum.AutomaticSize.X,
        BackgroundColor3 = FromRGB(255, 255, 255)
    })

    Instances:Create("UIListLayout", {
        Parent = Library.NotifHolder.Instance,
        Name = "\0",
        VerticalAlignment = Enum.VerticalAlignment.Bottom,
        Padding = UDimNew(0, 12),
        SortOrder = Enum.SortOrder.LayoutOrder
    })

    Instances:Create("UIPadding", {
        Parent = Library.NotifHolder.Instance,
        Name = "\0",
        PaddingTop = UDimNew(0, 12),
        PaddingBottom = UDimNew(0, 12),
        PaddingRight = UDimNew(0, 12),
        PaddingLeft = UDimNew(0, 12)
    })

    Library.Unload = function(self)
    for Index, Value in self.Connections do 
        Value.Connection:Disconnect()
    end

    for Index, Value in self.Threads do 
        coroutine.close(Value)
    end

    if self.Holder then 
        self.Holder:Clean()
    end
    
    -- ADD THESE TWO LINES:
    if self.FloatingIcon then
        self.FloatingIcon:Clean()
    end
    if self.FloatingIconHolder then
        self.FloatingIconHolder:Clean()
    end

    Library = nil 
    getgenv().Library = nil

    UserInputService.MouseIconEnabled = true
end

    Library.GetImage = function(self, Image)
        local ImageData = self.Images[Image]

        if not ImageData then 
            return
        end

        return getcustomasset(self.Folders.Assets .. "/" .. ImageData[1])
    end

    Library.Round = function(self, Number, Float)
        local Multiplier = 1 / (Float or 1)
        return MathFloor(Number * Multiplier) / Multiplier
    end

    Library.Thread = function(self, Function)
        local NewThread = coroutine.create(Function)
        
        coroutine.wrap(function()
            coroutine.resume(NewThread)
        end)()

        TableInsert(self.Threads, NewThread)
        return NewThread
    end
    
    Library.SafeCall = function(self, Function, ...)
        local Arguements = { ... }
        local Success, Result = pcall(Function, TableUnpack(Arguements))

        if not Success then
            warn(Result)
            return false
        end

        return Success
    end

    Library.Connect = function(self, Event, Callback, Name)
        Name = Name or StringFormat("Connection%s%s", self.UnnamedConnections + 1, HttpService:GenerateGUID(false))

        local NewConnection = {
            Event = Event,
            Callback = Callback,
            Name = Name,
            Connection = nil
        }

        Library:Thread(function()
            NewConnection.Connection = Event:Connect(Callback)
        end)

        TableInsert(self.Connections, NewConnection)
        return NewConnection
    end

    Library.Disconnect = function(self, Name)
        for _, Connection in self.Connections do 
            if Connection.Name == Name then
                Connection.Connection:Disconnect()
                break
            end
        end
    end

    Library.NextFlag = function(self)
        local FlagNumber = self.UnnamedFlags + 1
        return StringFormat("flag_number_%s_%s", FlagNumber, HttpService:GenerateGUID(false))
    end

    Library.AddToTheme = function(self, Item, Properties)
        Item = Item.Instance or Item 

        local ThemeData = {
            Item = Item,
            Properties = Properties,
        }

        for Property, Value in ThemeData.Properties do
            if type(Value) == "string" then
                Item[Property] = self.Theme[Value]
            else
                Item[Property] = Value()
            end
        end

        TableInsert(self.ThemeItems, ThemeData)
        self.ThemeMap[Item] = ThemeData
    end

	Library.ToRich = function(self, Text, Color)
        if not Color then
            return `<font color="rgb(255, 255, 255)">{Text}</font>`
        end

        if not Color.R or not Color.G or not Color.B then
            return `<font color="rgb(255, 255, 255)">{Text}</font>`
        end

		return `<font color="rgb({MathFloor(Color.R * 255)}, {MathFloor(Color.G * 255)}, {MathFloor(Color.B * 255)})">{Text}</font>`
	end

 Library.GetConfig = function(self)
    local Config = {}
    for Index, Value in pairs(Library.Flags) do
        if type(Value) == "table" and Value.Key then
            Config[Index] = {Key = tostring(Value.Key), Mode = Value.Mode}
        elseif type(Value) == "table" and Value.Color then
            Config[Index] = {Color = Value.Color, Alpha = Value.Alpha}
        else
            Config[Index] = Value
        end
    end
    return HttpService:JSONEncode(Config)
end

Library.LoadConfig = function(self, Config)
    local Decoded = HttpService:JSONDecode(Config)
    for Index, Value in pairs(Decoded) do
        local SetFunction = Library.SetFlags[Index]
        if SetFunction then
            if type(Value) == "table" and Value.Key then
                SetFunction(Value)
            elseif type(Value) == "table" and Value.Color then
                SetFunction(Value.Color, Value.Alpha or 1)
            else
                SetFunction(Value)
            end
        end
    end
end

Library.DeleteConfig = function(self, Config)
    local filePath = string.format("%s/%s.json", Library.Folders.Configs, Config)
    if isfile(filePath) then
        delfile(filePath)
        return true
    end
    return false
end

Library.RefreshConfigsList = function(self, Dropdown)
    local List = {}
    for _, v in pairs(listfiles(Library.Folders.Configs)) do
        local FileName = v:gsub(Library.Folders.Configs .. "[/\\]", ""):gsub("%.json$", "")
        if FileName ~= "autoload" then
            table.insert(List, FileName)
        end
    end
    Dropdown:Refresh(List)
    
    -- After refreshing, check if there's an autoload config and select it in dropdown
    local AutoFile = Library.Folders.Configs .. "/autoload.json"
    if isfile(AutoFile) then
        local success, data = pcall(function()
            return HttpService:JSONDecode(readfile(AutoFile))
        end)
        if success and data and data.AutoLoad and table.find(List, data.AutoLoad) then
            Dropdown:Set(data.AutoLoad)
            SelectedConfig = data.AutoLoad
        end
    end
end

-- Store autoload data to load after UI is fully created
local PendingAutoload = nil

    Library.ChangeItemTheme = function(self, Item, Properties)
        Item = Item.Instance or Item

        if not self.ThemeMap[Item] then 
            return
        end

        self.ThemeMap[Item].Properties = Properties
        self.ThemeMap[Item] = self.ThemeMap[Item]
    end

    Library.ChangeTheme = function(self, Theme, Color)
        self.Theme[Theme] = Color

        for _, Item in self.ThemeItems do
            for Property, Value in Item.Properties do
                if type(Value) == "string" and Value == Theme then
                    Item.Item[Property] = Color
                elseif type(Value) == "function" then
                    Item.Item[Property] = Value()
                end
            end
        end
    end

    Library.IsMouseOverFrame = function(self, Frame, XOffset, YOffset)
        Frame = Frame.Instance
        XOffset = XOffset or 0 
        YOffset = YOffset or 0

        local MousePosition = Vector2New(Mouse.X + XOffset, Mouse.Y + YOffset)

        return MousePosition.X >= Frame.AbsolutePosition.X and MousePosition.X <= Frame.AbsolutePosition.X + Frame.AbsoluteSize.X 
        and MousePosition.Y >= Frame.AbsolutePosition.Y and MousePosition.Y <= Frame.AbsolutePosition.Y + Frame.AbsoluteSize.Y
    end

    Library.Lerp = function(self, Start, Finish, Time)
        return Start + (Finish - Start) * Time
    end

    -- Components
    local Components = { } do
        Components.Window = function(self, Data)
            local Items = { } do
                Items["Window"] = Instances:Create("Frame", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    AnchorPoint = Data.AnchorPoint,
                    Position = Data.Position,
                    BorderColor3 = FromRGB(12, 12, 12),
                    Size = Data.Size,
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(14, 17, 15)
                })  Items["Window"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

                if Data.Draggable then 
                    Items["Window"]:MakeDraggable()
                end

                if Data.Resizeable then 
                    Items["Window"]:MakeResizeable(Vector2New(Data.Size.X.Offset, Data.Size.Y.Offset), Vector2New(9999, 9999))
                end

                Items["UIStroke"] = Items["Window"]:Border("Outline")
            end

            return Items
        end

        Components.AutosizingLabel = function(self, Data)
            local Label = { } 

            local Items = { } do
                Items["Label"] = Instances:Create("TextLabel", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = Data.Text,
                    BackgroundTransparency = 1,
                    BorderSizePixel = 0,
                    AutomaticSize = Enum.AutomaticSize.XY,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Label"]:AddToTheme({TextColor3 = "Text"})

                Items["UIStroke"] = Items["Label"]:TextBorder()
            end

            function Label:SetProperty(Property, Value)
                Items["Label"].Instance[Property] = Value
            end

            return Label, Items
        end

        Components.WindowPage = function(self, Data)
            local Page = {
                Active = false,
                SubPages = { },
                Items = { },
                Window = Data.Window,
                ColumnsData = { }
            }

            local Items = { } do
                Items["Inactive"] = Instances:Create("TextButton", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(0, 0, 0),
                    BorderColor3 = FromRGB(12, 12, 12),
                    Text = "",
                    AutoButtonColor = false,
                    BackgroundTransparency = 0.6000000238418579,
                    Size = UDim2New(1, 0, 0, 25),
                    BorderSizePixel = 2,
                    TextSize = 18,
                    BackgroundColor3 = FromRGB(25, 30, 26)
                })  Items["Inactive"]:AddToTheme({BackgroundColor3 = "Page Background", BorderColor3 = "Border"})

                Items["ButtonBorder"] = Instances:Create("UIStroke", {
                    Parent = Items["Inactive"].Instance,
                    Name = "\0",
                    Color = FromRGB(61, 60, 65),
                    Transparency = 0.6,
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                })  Items["ButtonBorder"]:AddToTheme({Color = "Outline"})

                Items["Liner"] = Instances:Create("Frame", {
                    Parent = Items["Inactive"].Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(0, 1, 1, 0),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(25, 30, 26)
                })  Items["Liner"]:AddToTheme({BackgroundColor3 = "Accent"})

                Items["Text"] = Instances:Create("TextLabel", {
                    Parent = Items["Inactive"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = Data.Name,
                    AnchorPoint = Vector2New(0, 0.5),
                    Size = UDim2New(0, 0, 0, 15),
                    BackgroundTransparency = 1,
                    Position = UDim2New(0, 8, 0.5, 0),
                    BorderSizePixel = 0,
                    AutomaticSize = Enum.AutomaticSize.X,
                    TextSize = 13,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Text"]:AddToTheme({TextColor3 = "Text"})

                Items["TextStroke"] = Items["Text"]:TextBorder()

                Items["Glow"] = Instances:Create("Frame", {
                    Parent = Items["Inactive"].Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(0, 20, 1, 0),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(25, 30, 26)
                })  Items["Glow"]:AddToTheme({BackgroundColor3 = "Accent"})

                Items["GlowGradient"] = Instances:Create("UIGradient", {
                    Parent = Items["Glow"].Instance,
                    Name = "\0",
                    Transparency = NumSequence{NumSequenceKeypoint(0, 0), NumSequenceKeypoint(0.193, 0.8687499761581421), NumSequenceKeypoint(0.504, 0.96875), NumSequenceKeypoint(1, 1)}
                })

                Items["Page"] = Instances:Create("Frame", {
                    Parent = Data.ContentHolder.Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    Visible = false,
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 0, 1, 0),
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                if Data.SubPages then
                    Items["SubPages"] = Instances:Create("Frame", {
                        Parent = Items["Page"].Instance,
                        Name = "\0",
                        Size = UDim2New(0, 0, 0, 35),
                        BorderColor3 = FromRGB(42, 49, 45),
                        BorderSizePixel = 2,
                        AutomaticSize = Enum.AutomaticSize.X,
                        BackgroundColor3 = FromRGB(20, 24, 21)
                    })  Items["SubPages"]:AddToTheme({BackgroundColor3 = "Page Background", BorderColor3 = "Outline"})

                    Items["SubPages"]:Border("Border")

                    Instances:Create("UIPadding", {
                        Parent = Items["SubPages"].Instance,
                        Name = "\0",
                        PaddingRight = UDimNew(0, 7),
                        PaddingLeft = UDimNew(0, 7)
                    })

                    Instances:Create("UIListLayout", {
                        Parent = Items["SubPages"].Instance,
                        Name = "\0",
                        VerticalAlignment = Enum.VerticalAlignment.Center,
                        FillDirection = Enum.FillDirection.Horizontal,
                        Padding = UDimNew(0, 12),
                        SortOrder = Enum.SortOrder.LayoutOrder
                    })

                    Items["Columns"] = Instances:Create("Frame", {
                        Parent = Items["Page"].Instance,
                        Name = "\0",
                        BackgroundTransparency = 1,
                        Position = UDim2New(0, 0, 0, 51),
                        BorderColor3 = FromRGB(42, 49, 45),
                        Size = UDim2New(1, 0, 1, -51),
                        BorderSizePixel = 0,
                        BackgroundColor3 = FromRGB(255, 255, 255)
                    })
                else
                    Instances:Create("UIListLayout", {
                        Parent = Items["Page"].Instance,
                        Name = "\0",
                        FillDirection = Enum.FillDirection.Horizontal,
                        HorizontalFlex = Enum.UIFlexAlignment.Fill,
                        Padding = UDimNew(0, 14),
                        SortOrder = Enum.SortOrder.LayoutOrder
                    })

                    for Index = 1, Data.Columns do 
                        local NewColumn = Instances:Create("ScrollingFrame", {
                            Parent = Items["Page"].Instance,
                            Name = "\0",
                            ScrollBarImageColor3 = FromRGB(0, 0, 0),
                            Active = true,
                            AutomaticCanvasSize = Enum.AutomaticSize.Y,
                            ScrollBarThickness = 0,
                            BackgroundTransparency = 1,
                            Size = UDim2New(1, 0, 1, 0),
                            BackgroundColor3 = FromRGB(255, 255, 255),
                            BorderColor3 = FromRGB(0, 0, 0),
                            BorderSizePixel = 0,
                            CanvasSize = UDim2New(0, 0, 0, 0)
                        })

                        Instances:Create("UIPadding", {
                            Parent = NewColumn.Instance,
                            Name = "\0",
                            PaddingTop = UDimNew(0, 2),
                            PaddingBottom = UDimNew(0, 2),
                            PaddingRight = UDimNew(0, 2),
                            PaddingLeft = UDimNew(0, 2)
                        })

                        Instances:Create("UIListLayout", {
                            Parent = NewColumn.Instance,
                            Name = "\0",
                            Padding = UDimNew(0, 14),
                            SortOrder = Enum.SortOrder.LayoutOrder
                        })

                        Page.ColumnsData[Index] = NewColumn
                    end
                end

                Page.Items = Items
            end

            local Debounce = false

            function Page:Turn(Bool)
    if Debounce then
        return
    end

    Page.Active = Bool
    Debounce = true

    -- Ensure Page instance exists
    if Items["Page"] and Items["Page"].Instance then
        Items["Page"].Instance.Visible = Bool
        Items["Page"].Instance.Parent = Bool and Data.ContentHolder.Instance or Library.UnusedHolder.Instance
    end

    -- Apply active/inactive tween effects
    if Page.Active then
        if Items["Inactive"] then Items["Inactive"]:Tween(nil, {BackgroundTransparency = 0}) end
        if Items["ButtonBorder"] then Items["ButtonBorder"]:Tween(nil, {Transparency = 0}) end
        if Items["Glow"] then Items["Glow"]:Tween(nil, {BackgroundTransparency = 0}) end
        if Items["Liner"] then Items["Liner"]:Tween(nil, {BackgroundTransparency = 0}) end
        if Items["Text"] then Items["Text"]:Tween(nil, {Position = UDim2New(0, 13, 0.5, 0)}) end

        Library.CurrentPage = Page
    else
        if Items["Inactive"] then Items["Inactive"]:Tween(nil, {BackgroundTransparency = 0.6}) end
        if Items["ButtonBorder"] then Items["ButtonBorder"]:Tween(nil, {Transparency = 0.6}) end
        if Items["Glow"] then Items["Glow"]:Tween(nil, {BackgroundTransparency = 1}) end
        if Items["Liner"] then Items["Liner"]:Tween(nil, {BackgroundTransparency = 1}) end
        if Items["Text"] then Items["Text"]:Tween(nil, {Position = UDim2New(0, 8, 0.5, 0)}) end
    end

    -- Fade all child instances
    if Items["Page"] and Items["Page"].Instance then
        local AllInstances = Items["Page"].Instance:GetDescendants()
        TableInsert(AllInstances, Items["Page"].Instance)

        local NewTween
        for _, Value in ipairs(AllInstances) do
            local TransparencyProperty = Tween:GetProperty(Value)
            if not TransparencyProperty then continue end

            if type(TransparencyProperty) == "table" then
                for _, Property in ipairs(TransparencyProperty) do
                    NewTween = Tween:FadeItem(Value, Property, Bool, Data.Window.FadeTime)
                end
            else
                NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Data.Window.FadeTime)
            end
        end

        if NewTween then
            Library:Connect(NewTween.Tween.Completed, function()
                Debounce = false
            end)
        else
            Debounce = false
        end
    else
        Debounce = false
    end
end -- closes Page:Turn

-- ðŸŸ£ Page fallback for universal click / tap
task.spawn(function()
    while not (Items and Items["Inactive"] and Items["Inactive"].Instance) do
        task.wait()
    end

    local button = Items["Inactive"].Instance
    local debounce = false

    local function handlePage()
        if debounce then return end
        debounce = true

        for _, PageObj in ipairs(Data.Window.Pages) do
            if PageObj == Page and Page.Active then
                debounce = false
                return
            end
            PageObj:Turn(PageObj == Page)
        end

        task.delay(0.1, function() debounce = false end)
    end

    pcall(function() if button.MouseButton1Down then button.MouseButton1Down:Connect(handlePage) end end)
    pcall(function() if button.MouseButton1Click then button.MouseButton1Click:Connect(handlePage) end end)
    pcall(function() if button.TouchTap then button.TouchTap:Connect(handlePage) end end)
    pcall(function() if button.Activated then button.Activated:Connect(handlePage) end end)
end) -- closes task.spawn

-- ðŸŸ£ Hover Effects
if Items["Inactive"] then
    Items["Inactive"]:OnHover(function()
        Items["Inactive"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
        Items["Inactive"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
    end)

    Items["Inactive"]:OnHoverLeave(function()
        Items["Inactive"]:ChangeItemTheme({BackgroundColor3 = "Page Background", BorderColor3 = "Border"})
        Items["Inactive"]:Tween(nil, {BackgroundColor3 = Library.Theme["Page Background"]})
    end)
end

-- Turn on the first page by default if none exist
if #Data.Window.Pages == 0 then
    Page:Turn(true)
end

-- Register page in window
TableInsert(Data.Window.Pages, Page)

 return Page, Items
end

        Components.WindowSubPage = function(self, Data)
            local SubPage = {
                Active = false,
                ColumnsData = { }
            }

            local Items = { } do
                Items["Inactive"] = Instances:Create("TextButton", {
                    Parent = Data.Page.Items["SubPages"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(0, 0, 0),
                    BorderColor3 = FromRGB(12, 12, 12),
                    Text = "",
                    AutoButtonColor = false,
                    BackgroundTransparency = 1,
                    Size = UDim2New(0, 0, 0, 20),
                    BorderSizePixel = 2,
                    AutomaticSize = Enum.AutomaticSize.X,
                    TextSize = 18,
                    BackgroundColor3 = FromRGB(25, 30, 26)
                })  Items["Inactive"]:AddToTheme({BackgroundColor3 = "Page Background", BorderColor3 = "Border"})

                Items["ButtonBorder"] = Instances:Create("UIStroke", {
                    Parent = Items["Inactive"].Instance,
                    Name = "\0",
                    Color = FromRGB(61, 60, 65),
                    Transparency = 1,
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                })  Items["ButtonBorder"]:AddToTheme({Color = "Outline"})

                Items["Text"] = Instances:Create("TextLabel", {
                    Parent = Items["Inactive"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = Data.Name,
                    AnchorPoint = Vector2New(0.5, 0.5),
                    Size = UDim2New(0, 0, 0, 15),
                    BackgroundTransparency = 1,
                    Position = UDim2New(0.5, -5, 0.5, 0),
                    BorderSizePixel = 0,
                    AutomaticSize = Enum.AutomaticSize.X,
                    TextSize = 13,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Text"]:AddToTheme({TextColor3 = "Text"})

                Items["TextStroke"] = Items["Text"]:TextBorder()

                Instances:Create("UIPadding", {
                    Parent = Items["Text"].Instance,
                    Name = "\0",
                    PaddingRight = UDimNew(0, 8),
                    PaddingLeft = UDimNew(0, 8)
                })

                Instances:Create("UIPadding", {
                    Parent = Items["Inactive"].Instance,
                    Name = "\0",
                    PaddingTop = UDimNew(0, 2),
                    PaddingLeft = UDimNew(0, 18),
                    PaddingRight = UDimNew(0, 12)
                })

                Items["Glow"] = Instances:Create("Frame", {
                    Parent = Items["Inactive"].Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    Position = UDim2New(0, -18, 0, -2),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(0, 20, 1, 2),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(202, 243, 255)
                })  Items["Glow"]:AddToTheme({BackgroundColor3 = "Accent"})

                Instances:Create("UIGradient", {
                    Parent = Items["Glow"].Instance,
                    Name = "\0",
                    Transparency = NumSequence{NumSequenceKeypoint(0, 0), NumSequenceKeypoint(0.193, 0.8687499761581421), NumSequenceKeypoint(0.504, 0.96875), NumSequenceKeypoint(1, 1)}
                })

                Items["Liner"] = Instances:Create("Frame", {
                    Parent = Items["Inactive"].Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    Position = UDim2New(0, -18, 0, -2),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(0, 1, 1, 2),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(202, 243, 255)
                })  Items["Liner"]:AddToTheme({BackgroundColor3 = "Accent"})

                Items["Page"] = Instances:Create("Frame", {
                    Parent = Data.Page.Items["Columns"].Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    Position = UDim2New(0, -2, 0, -2),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 2, 1, 0),
                    BorderSizePixel = 0,
                    Visible = false,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Instances:Create("UIListLayout", {
                    Parent = Items["Page"].Instance,
                    Name = "\0",
                    FillDirection = Enum.FillDirection.Horizontal,
                    HorizontalFlex = Enum.UIFlexAlignment.Fill,
                    Padding = UDimNew(0, 14),
                    SortOrder = Enum.SortOrder.LayoutOrder
                })

                for Index = 1, Data.Columns do 
                    local NewColumn = Instances:Create("ScrollingFrame", {
                        Parent = Items["Page"].Instance,
                        Name = "\0",
                        ScrollBarImageColor3 = FromRGB(0, 0, 0),
                        Active = true,
                        AutomaticCanvasSize = Enum.AutomaticSize.Y,
                        ScrollBarThickness = 0,
                        BackgroundTransparency = 1,
                        Size = UDim2New(1, 0, 1, 0),
                        BackgroundColor3 = FromRGB(255, 255, 255),
                        BorderColor3 = FromRGB(0, 0, 0),
                        BorderSizePixel = 0,
                        CanvasSize = UDim2New(0, 0, 0, 0)
                    })

                    Instances:Create("UIPadding", {
                        Parent = NewColumn.Instance,
                        Name = "\0",
                        PaddingTop = UDimNew(0, 2),
                        PaddingBottom = UDimNew(0, 2),
                        PaddingRight = UDimNew(0, 2),
                        PaddingLeft = UDimNew(0, 2)
                    })

                    Instances:Create("UIListLayout", {
                        Parent = NewColumn.Instance,
                        Name = "\0",
                        Padding = UDimNew(0, 14),
                        SortOrder = Enum.SortOrder.LayoutOrder
                    })

                    SubPage.ColumnsData[Index] = NewColumn
                end
            end

            local Debounce = false

            Library.SearchItems[SubPage] = { }

            function SubPage:Turn(Bool)
    if Debounce then 
        return 
    end

    SubPage.Active = Bool 
    Debounce = true

    -- Ensure SubPage instance exists
    if Items["Page"] and Items["Page"].Instance then
        Items["Page"].Instance.Visible = Bool
        Items["Page"].Instance.Parent = Bool and Data.Page.Items["Columns"].Instance or Library.UnusedHolder.Instance
    end

    -- Apply active/inactive tween effects
    if SubPage.Active then
        if Items["Inactive"] then Items["Inactive"]:Tween(nil, {BackgroundTransparency = 0}) end
        if Items["ButtonBorder"] then Items["ButtonBorder"]:Tween(nil, {Transparency = 0}) end
        if Items["Glow"] then Items["Glow"]:Tween(nil, {BackgroundTransparency = 0}) end
        if Items["Liner"] then Items["Liner"]:Tween(nil, {BackgroundTransparency = 0}) end
        if Items["Text"] then Items["Text"]:Tween(nil, {Position = UDim2New(0.5, 0, 0.5, 0)}) end

        Library.CurrentPage = SubPage
    else
        if Items["Inactive"] then Items["Inactive"]:Tween(nil, {BackgroundTransparency = 1}) end
        if Items["ButtonBorder"] then Items["ButtonBorder"]:Tween(nil, {Transparency = 1}) end
        if Items["Glow"] then Items["Glow"]:Tween(nil, {BackgroundTransparency = 1}) end
        if Items["Liner"] then Items["Liner"]:Tween(nil, {BackgroundTransparency = 1}) end
        if Items["Text"] then Items["Text"]:Tween(nil, {Position = UDim2New(0.5, -5, 0.5, 0)}) end
    end

    -- Fade all child instances
    if Items["Page"] and Items["Page"].Instance then
        local AllInstances = Items["Page"].Instance:GetDescendants()
        TableInsert(AllInstances, Items["Page"].Instance)

        local NewTween
        for _, Value in ipairs(AllInstances) do
            local TransparencyProperty = Tween:GetProperty(Value)
            if not TransparencyProperty then continue end

            if type(TransparencyProperty) == "table" then
                for _, Property in ipairs(TransparencyProperty) do
                    NewTween = Tween:FadeItem(Value, Property, Bool, Data.Window.FadeTime)
                end
            else
                NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Data.Window.FadeTime)
            end
        end

        if NewTween then
            Library:Connect(NewTween.Tween.Completed, function()
                Debounce = false
            end)
        else
            Debounce = false
        end
    else
        Debounce = false
    end
end

-- ðŸŸ£ SubPage fallback for universal click / tap
task.spawn(function()
    while not (Items and Items["Inactive"] and Items["Inactive"].Instance) do
        task.wait()
    end

    local button = Items["Inactive"].Instance
    local debounce = false

    local function handleSubPage()
        if debounce then return end
        debounce = true

        for _, SubPageObj in ipairs(Data.Page.SubPages) do
            if SubPageObj == SubPage and SubPage.Active then
                debounce = false
                return
            end
            SubPageObj:Turn(SubPageObj == SubPage)
        end

        task.delay(0.1, function() debounce = false end)
    end

    -- Connect all fallback events
    pcall(function() if button.MouseButton1Down then button.MouseButton1Down:Connect(handleSubPage) end end)
    pcall(function() if button.MouseButton1Click then button.MouseButton1Click:Connect(handleSubPage) end end)
    pcall(function() if button.TouchTap then button.TouchTap:Connect(handleSubPage) end end)
    pcall(function() if button.Activated then button.Activated:Connect(handleSubPage) end end)
end)

-- Turn on the first SubPage by default if none exist
if #Data.Page.SubPages == 0 then
    SubPage:Turn(true)
end

-- Register SubPage in page
TableInsert(Data.Page.SubPages, SubPage)

return SubPage
end

        Components.Toggle = function(self, Data)
            local Toggle = {
                Value = false,
                Flag = Data.Flag
            }
            
            local Items = { } do
                Items["Toggle"] = Instances:Create("TextButton", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(0, 0, 0),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "",
                    AutoButtonColor = false,
                    BackgroundTransparency = 1,
                    Size = UDim2New(1, 0, 0, 12),
                    BorderSizePixel = 0,
                    TextSize = 15,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Items["Indicator"] = Instances:Create("Frame", {
                    Parent = Items["Toggle"].Instance,
                    Name = "\0",
                    AnchorPoint = Vector2New(0, 0.5),
                    Position = UDim2New(0, 0, 0.5, 0),
                    BorderColor3 = FromRGB(12, 12, 12),
                    Size = UDim2New(0, 12, 0, 12),
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(30, 36, 31)
                })  Items["Indicator"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

                Instances:Create("UIStroke", {
                    Parent = Items["Indicator"].Instance,
                    Name = "\0",
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Outline"})

                Instances:Create("UIGradient", {
                    Parent = Items["Indicator"].Instance,
                    Name = "\0",
                    Rotation = -165,
                    Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
                }):AddToTheme({Color = function()
                    return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
                end})

                Items["Check"] = Instances:Create("ImageLabel", {
                    Parent = Items["Indicator"].Instance,
                    Name = "\0",
                    ImageColor3 = FromRGB(0, 0, 0),
                    ScaleType = Enum.ScaleType.Fit,
                    ImageTransparency = 1,
                    BorderColor3 = FromRGB(0, 0, 0),
                    AnchorPoint = Vector2New(0.5, 0.5),
                    Image = "rbxassetid://108016671469439",
                    BackgroundTransparency = 1,
                    Position = UDim2New(0.5, 0, 0.5, 0),
                    Size = UDim2New(1, 2, 1, 2),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Items["Text"] = Instances:Create("TextLabel", {
                    Parent = Items["Toggle"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = Data.Name,
                    Size = UDim2New(0, 0, 0, 15),
                    AnchorPoint = Vector2New(0, 0.5),
                    Position = UDim2New(0, 22, 0.5, 0),
                    BackgroundTransparency = 1,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    BorderSizePixel = 0,
                    AutomaticSize = Enum.AutomaticSize.X,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Text"]:AddToTheme({TextColor3 = "Text"})

                Items["Text"]:TextBorder()

                Items["SubElements"] = Instances:Create("Frame", {
                    Parent = Items["Toggle"].Instance,
                    Name = "\0",
                    BorderColor3 = FromRGB(0, 0, 0),
                    BackgroundTransparency = 1,
                    Position = UDim2New(0, Items["Text"].Instance.TextBounds.X + 30, 0, 0),
                    Size = UDim2New(0, 0, 1, 0),
                    BorderSizePixel = 0,
                    AutomaticSize = Enum.AutomaticSize.X,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Instances:Create("UIListLayout", {
                    Parent = Items["SubElements"].Instance,
                    Name = "\0",
                    VerticalAlignment = Enum.VerticalAlignment.Center,
                    FillDirection = Enum.FillDirection.Horizontal,
                    Padding = UDimNew(0, 6),
                    SortOrder = Enum.SortOrder.LayoutOrder
                })
            end
            
            function Toggle:Get()
    return Toggle.Value
end

function Toggle:SetText(Text)
    Text = tostring(Text)
    Items["Text"].Instance.Text = Text
end

function Toggle:Set(Value)
    Toggle.Value = Value
    Library.Flags[Toggle.Flag] = Value

    if Toggle.Value then
        Items["Indicator"]:ChangeItemTheme({BackgroundColor3 = "Accent", BorderColor3 = "Border"})
        Items["Indicator"]:Tween(nil, {BackgroundColor3 = Library.Theme.Accent})
        task.wait(0.05)
        Items["Check"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {ImageTransparency = 0, Size = UDim2New(1, 2, 1, 2)})
    else
        Items["Indicator"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
        Items["Indicator"]:Tween(nil, {BackgroundColor3 = Library.Theme.Element})
        task.wait(0.05)
        Items["Check"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {ImageTransparency = 1, Size = UDim2New(0, 0, 0, 0)})
    end

    if Data.Callback then
        Library:SafeCall(Data.Callback, Toggle.Value)
    end
end

function Toggle:SetVisibility(Bool)
    Items["Toggle"].Instance.Visible = Bool
end

local PageSearchData = Library.SearchItems[Data.Page]

if PageSearchData then
    local SearchData = {
        Element = Items["Toggle"],
        Name = Data.Name,
    }

    TableInsert(PageSearchData, SearchData)
end

do
    local button = Items["Toggle"].Instance
    local debounce = false

    local function handleToggle()
        if debounce then return end
        debounce = true
        Toggle:Set(not Toggle.Value)
        task.delay(0.1, function() debounce = false end)
    end

    pcall(function()
        if button.MouseButton1Down then
            button.MouseButton1Down:Connect(handleToggle)
        end
    end)

    pcall(function()
        if button.MouseButton1Click then
            button.MouseButton1Click:Connect(handleToggle)
        end
    end)

    pcall(function()
        if button.TouchTap then
            button.TouchTap:Connect(handleToggle)
        end
    end)

    pcall(function()
        if button.Activated then
            button.Activated:Connect(handleToggle)
        end
    end)
end

Items["Toggle"]:OnHover(function()
    if Toggle.Value then
        return
    end

    Items["Indicator"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
    Items["Indicator"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
end)

Items["Toggle"]:OnHoverLeave(function()
    if Toggle.Value then
        return
    end

    Items["Indicator"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
    Items["Indicator"]:Tween(nil, {BackgroundColor3 = Library.Theme["Element"]})
end)

Toggle:Set(Data.Default)

Library.SetFlags[Toggle.Flag] = function(Value)
    Toggle:Set(Value)
end

return Toggle, Items
end
                

        Components.Button = function(self, Data)
            local Button = { }

            local Items = { } do
                Items["Button"] = Instances:Create("Frame", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 0, 0, 0),
                    BorderSizePixel = 0,
                    AutomaticSize = Enum.AutomaticSize.Y,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Instances:Create("UIListLayout", {
                    Parent = Items["Button"].Instance,
                    Name = "\0",
                    FillDirection = Enum.FillDirection.Horizontal,
                    HorizontalFlex = Enum.UIFlexAlignment.Fill,
                    Padding = UDimNew(0, 8),
                    SortOrder = Enum.SortOrder.LayoutOrder
                })
            end

            function Button:Add(Name, Callback)
                local NewButton = { }

                local SubItems = { } do
                    SubItems["NewButton"] = Instances:Create("TextButton", {
                        Parent = Items["Button"].Instance,
                        Name = "\0",
                        FontFace = Library.Font,
                        TextColor3 = FromRGB(0, 0, 0),
                        BorderColor3 = FromRGB(12, 12, 12),
                        Text = "",
                        AutoButtonColor = false,
                        Size = UDim2New(1, 0, 0, 20),
                        BorderSizePixel = 2,
                        TextSize = 15,
                        BackgroundColor3 = FromRGB(30, 36, 31)
                    })  SubItems["NewButton"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

                    Instances:Create("UIGradient", {
                        Parent = SubItems["NewButton"].Instance,
                        Name = "\0",
                        Rotation = -165,
                        Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
                    }):AddToTheme({Color = function()
                        return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
                    end})

                    Instances:Create("UIStroke", {
                        Parent = SubItems["NewButton"].Instance,
                        Name = "\0",
                        Color = FromRGB(42, 49, 45),
                        LineJoinMode = Enum.LineJoinMode.Miter,
                        ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                    }):AddToTheme({Color = "Outline"})

                    SubItems["Text"] = Instances:Create("TextLabel", {
                        Parent = SubItems["NewButton"].Instance,
                        Name = "\0",
                        FontFace = Library.Font,
                        TextColor3 = FromRGB(235, 235, 235),
                        BorderColor3 = FromRGB(0, 0, 0),
                        Text = Name,
                        BackgroundTransparency = 1,
                        Size = UDim2New(1, 0, 1, 0),
                        BorderSizePixel = 0,
                        TextSize = 11,
                        BackgroundColor3 = FromRGB(255, 255, 255)
                    })  SubItems["Text"]:AddToTheme({TextColor3 = "Text"})

                    SubItems["Text"]:TextBorder()
                end

         function NewButton:Press()
    SubItems["NewButton"]:ChangeItemTheme({BackgroundColor3 = "Accent", BorderColor3 = "Border"})
    SubItems["NewButton"]:Tween(nil, {BackgroundColor3 = Library.Theme.Accent})

    Library:SafeCall(Callback)
    task.wait(0.1)

    SubItems["NewButton"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})    
    SubItems["NewButton"]:Tween(nil, {BackgroundColor3 = Library.Theme.Element})    
end    

function NewButton:SetVisibility(Bool)    
    SubItems["NewButton"].Instance.Visible = Bool    
end    

local PageSearchData = Library.SearchItems[Data.Page]    

if PageSearchData then    
    local SearchData = {    
        Element = SubItems["NewButton"],    
        Name = Name,    
    }    

    TableInsert(PageSearchData, SearchData)    
end    

SubItems["NewButton"]:OnHover(function()    
    SubItems["NewButton"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})    
    SubItems["NewButton"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})    
end)    

SubItems["NewButton"]:OnHoverLeave(function()    
    SubItems["NewButton"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})    
    SubItems["NewButton"]:Tween(nil, {BackgroundColor3 = Library.Theme.Element})    
end)    

do
    local button = SubItems["NewButton"].Instance
    local debounce = false

    local function handlePress()
        if debounce then return end
        debounce = true
        NewButton:Press()
        task.delay(0.1, function() debounce = false end)
    end

    pcall(function()
        if button.MouseButton1Down then
            button.MouseButton1Down:Connect(handlePress)
        end
    end)

    pcall(function()
        if button.MouseButton1Click then
            button.MouseButton1Click:Connect(handlePress)
        end
    end)

    pcall(function()
        if button.TouchTap then
            button.TouchTap:Connect(handlePress)
        end
    end)

    pcall(function()
        if button.Activated then
            button.Activated:Connect(handlePress)
        end
    end)
end

return NewButton     
end    

function Button:SetVisibility(Bool)    
    Items["Button"].Instance.Visible = Bool    
end    

return Button, Items    
end
           
        Components.Slider = function(self, Data)
            local Slider = {
                Value = 0,
                Flag = Data.Flag,
                Sliding = false
            }

            local Items = { } do
                Items["Slider"] = Instances:Create("Frame", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 0, 0, 28),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Items["Text"] = Instances:Create("TextLabel", {
                    Parent = Items["Slider"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = Data.Name,
                    BackgroundTransparency = 1,
                    Size = UDim2New(0, 0, 0, 15),
                    BorderSizePixel = 0,
                    AutomaticSize = Enum.AutomaticSize.X,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Text"]:AddToTheme({TextColor3 = "Text"})

                Items["Text"]:TextBorder()

                Items["RealSlider"] = Instances:Create("TextButton", {
                    Parent = Items["Slider"].Instance,
                    AutoButtonColor = false,
                    Text = "",
                    Name = "\0",
                    AnchorPoint = Vector2New(0, 1),
                    Position = UDim2New(0, 0, 1, 0),
                    BorderColor3 = FromRGB(12, 12, 12),
                    Size = UDim2New(1, 0, 0, 10),
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(30, 36, 31)
                })  Items["RealSlider"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

                Instances:Create("UIGradient", {
                    Parent = Items["RealSlider"].Instance,
                    Name = "\0",
                    Rotation = -165,
                    Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
                }):AddToTheme({Color = function()
                    return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
                end})

                Instances:Create("UIStroke", {
                    Parent = Items["RealSlider"].Instance,
                    Name = "\0",
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Outline"})

                Items["Accent"] = Instances:Create("Frame", {
                    Parent = Items["RealSlider"].Instance,
                    Name = "\0",
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(0.5, 0, 1, 0),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(202, 243, 255)
                })  Items["Accent"]:AddToTheme({BackgroundColor3 = "Accent"})

                Instances:Create("UIGradient", {
                    Parent = Items["Accent"].Instance,
                    Name = "\0",
                    Rotation = -165,
                    Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
                }):AddToTheme({Color = function()
                    return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
                end})

                Items["Dragger"] = Instances:Create("Frame", {
                    Parent = Items["Accent"].Instance,
                    Name = "\0",
                    AnchorPoint = Vector2New(1, 0.5),
                    Position = UDim2New(1, 0, 0.5, 0),
                    BorderColor3 = FromRGB(42, 49, 45),
                    Size = UDim2New(0, 3, 1, 3),
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(14, 17, 15)
                })  Items["Dragger"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Outline"})

                Instances:Create("UIStroke", {
                    Parent = Items["Dragger"].Instance,
                    Name = "\0",
                    Color = FromRGB(12, 12, 12),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Border"})

                Items["Value"] = Instances:Create("TextLabel", {
                    Parent = Items["Slider"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "50%",
                    AnchorPoint = Vector2New(1, 0),
                    Size = UDim2New(0, 0, 0, 15),
                    BackgroundTransparency = 1,
                    Position = UDim2New(1, 0, 0, 0),
                    BorderSizePixel = 0,
                    AutomaticSize = Enum.AutomaticSize.X,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Value"]:AddToTheme({TextColor3 = "Text"})

                Items["Value"]:TextBorder()
            end

            function Slider:Get()
                return Slider.Value
            end

            function Slider:SetVisibility(Bool)
                Items["Slider"].Instance.Visible = Bool
            end

            function Slider:Set(Value)
                Slider.Value = Library:Round(MathClamp(Value, Data.Min, Data.Max), Data.Decimals)

                Library.Flags[Slider.Flag] = Slider.Value

                Items["Accent"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Size = UDim2New((Slider.Value - Data.Min) / (Data.Max - Data.Min), 0, 1, 0)})
                Items["Value"].Instance.Text = StringFormat("%s%s", tostring(Slider.Value), Data.Suffix)

                if Data.Callback then 
                    Library:SafeCall(Data.Callback, Slider.Value)
                end
            end

            --[[
            local PageSearchData = Library.SearchItems[Data.Page]

            if PageSearchData then
                local SearchData = {
                    Element = Items["Slider"],
                    Name = Data.Name,
                }

                TableInsert(PageSearchData, SearchData)
            end
            --]]

            local InputChanged

            Items["RealSlider"]:Connect("InputBegan", function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
                    Slider.Sliding = true 

                    local SizeX = (Mouse.X - Items["RealSlider"].Instance.AbsolutePosition.X) / Items["RealSlider"].Instance.AbsoluteSize.X
                    local Value = ((Data.Max - Data.Min) * SizeX) + Data.Min

                    Slider:Set(Value)

                    if InputChanged then
                        return
                    end

                    InputChanged = Input.Changed:Connect(function()
                        if Input.UserInputState == Enum.UserInputState.End then
                            Slider.Sliding = false
                            
                            InputChanged:Disconnect()
                            InputChanged = nil
                        end
                    end)
                end
            end)

            Library:Connect(UserInputService.InputChanged, function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseMovement or Input.UserInputType == Enum.UserInputType.Touch then
                    if Slider.Sliding then
                        local SizeX = (Mouse.X - Items["RealSlider"].Instance.AbsolutePosition.X) / Items["RealSlider"].Instance.AbsoluteSize.X
                        local Value = ((Data.Max - Data.Min) * SizeX) + Data.Min

                        Slider:Set(Value)
                    end
                end
            end)

            Items["Slider"]:OnHover(function()
                Items["RealSlider"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
                Items["RealSlider"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
            end)

            Items["Slider"]:OnHoverLeave(function()
                Items["RealSlider"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
                Items["RealSlider"]:Tween(nil, {BackgroundColor3 = Library.Theme["Element"]})
            end)

            if Data.Default then 
                Slider:Set(Data.Default)
            end

            Library.SetFlags[Slider.Flag] = function(Value)
                Slider:Set(Value)
            end

            return Slider, Items
        end

      
Components.Label = function(self, Data)
    local Label = {}
    local Items = {}

    -- ðŸ§± Main container
    Items["Label"] = Instances:Create("Frame", {
        Parent = Data.Parent.Instance,
        Name = "\0",
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 20),
        ClipsDescendants = false,
        AutomaticSize = Enum.AutomaticSize.Y
    })

    -- Padding for safe spacing
    Instances:Create("UIPadding", {
        Parent = Items["Label"].Instance,
        PaddingLeft = UDim.new(0, 6),
        PaddingRight = UDim.new(0, 6),
        PaddingTop = UDim.new(0, 2),
        PaddingBottom = UDim.new(0, 2),
    })

    -- ðŸ“ Text element
    Items["Text"] = Instances:Create("TextLabel", {
        Parent = Items["Label"].Instance,
        FontFace = Library.Font,
        TextColor3 = FromRGB(235, 235, 235),
        Text = Data.Name or "",
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        TextXAlignment = Enum.TextXAlignment.Left,
        TextYAlignment = Enum.TextYAlignment.Top,
        RichText = true, -- âœ… color tags like <font color='rgb(255, 215, 0)'>
        TextWrapped = true,
        TextSize = 12,
        AutomaticSize = Enum.AutomaticSize.XY, -- âœ… auto width + height
        Size = UDim2.new(0, 0, 0, 0),
        Position = UDim2.new(0, 0, 0, 0),
    })
    Items["Text"]:AddToTheme({ TextColor3 = "Text" })
    Items["Text"]:TextBorder()

    -- ðŸ“¦ Sub-elements container (optional extras)
    Items["SubElements"] = Instances:Create("Frame", {
        Parent = Items["Label"].Instance,
        BackgroundTransparency = 1,
        BorderSizePixel = 0,
        Size = UDim2.new(1, 0, 0, 0),
        AutomaticSize = Enum.AutomaticSize.XY,
        Position = UDim2.new(0, 0, 1, 4)
    })

    Instances:Create("UIListLayout", {
        Parent = Items["SubElements"].Instance,
        VerticalAlignment = Enum.VerticalAlignment.Top,
        FillDirection = Enum.FillDirection.Horizontal,
        Padding = UDim.new(0, 6),
        SortOrder = Enum.SortOrder.LayoutOrder
    })

    -- âš™ï¸ Functions
    function Label:SetText(Text)
        Text = tostring(Text):gsub("\\n", "\n") -- support literal \n
        Items["Text"].Instance.Text = Text
    end

    function Label:SetVisibility(Bool)
        Items["Label"].Instance.Visible = Bool
    end

    return Label, Items
end

            
        Components.Dropdown = function(self, Data)
            local Dropdown = {
                Flag = Data.Flag, 
                Value = { },
                Options = { },
                IsOpen = false
            }

            local Items = { } do
                Items["Dropdown"] = Instances:Create("Frame", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 0, 0, 40),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Items["Text"] = Instances:Create("TextLabel", {
                    Parent = Items["Dropdown"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = Data.Name,
                    BackgroundTransparency = 1,
                    Size = UDim2New(0, 0, 0, 15),
                    BorderSizePixel = 0,
                    AutomaticSize = Enum.AutomaticSize.X,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Text"]:AddToTheme({TextColor3 = "Text"})

                Items["Text"]:TextBorder()

                Items["RealDropdown"] = Instances:Create("TextButton", {
                    Parent = Items["Dropdown"].Instance,
                    AutoButtonColor = false,
                    Text = "",
                    Name = "\0",
                    AnchorPoint = Vector2New(0, 1),
                    Position = UDim2New(0, 0, 1, 0),
                    BorderColor3 = FromRGB(12, 12, 12),
                    Size = UDim2New(1, 0, 0, 20),
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(30, 36, 31)
                })  Items["RealDropdown"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

                Instances:Create("UIGradient", {
                    Parent = Items["RealDropdown"].Instance,
                    Name = "\0",
                    Rotation = -165,
                    Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
                }):AddToTheme({Color = function()
                    return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
                end})

                Instances:Create("UIStroke", {
                    Parent = Items["RealDropdown"].Instance,
                    Name = "\0",
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Outline"})

                Items["Value"] = Instances:Create("TextLabel", {
                    Parent = Items["RealDropdown"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "--",
                    AnchorPoint = Vector2New(0, 0.5),
                    Size = UDim2New(1, -25, 0, 15),
                    BackgroundTransparency = 1,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    Position = UDim2New(0, 8, 0.5, 0),
                    BorderSizePixel = 0,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Value"]:AddToTheme({TextColor3 = "Text"})

                Items["Value"]:TextBorder()

                Items["Icon"] = Instances:Create("ImageLabel", {
                    Parent = Items["RealDropdown"].Instance,
                    Name = "\0",
                    ImageColor3 = FromRGB(202, 243, 255),
                    ScaleType = Enum.ScaleType.Fit,
                    BorderColor3 = FromRGB(0, 0, 0),
                    AnchorPoint = Vector2New(1, 0.5),
                    Image = "rbxassetid://113229176886493",
                    BackgroundTransparency = 1,
                    Position = UDim2New(1, -2, 0.5, 0),
                    Size = UDim2New(0, 20, 0, 20),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Icon"]:AddToTheme({ImageColor3 = "Accent"})

                Items["OptionHolder"] = Instances:Create("Frame", {
                    Parent = Library.UnusedHolder.Instance,
                    Name = "\0",
                    Visible = false,
                    BorderColor3 = FromRGB(12, 12, 12),
                    BorderSizePixel = 2,
                    Position = UDim2New(0, 0, 1, 8),
                    Size = UDim2New(1, 0, 0, 25),
                    ZIndex = 5,
                    AutomaticSize = Enum.AutomaticSize.Y,
                    BackgroundColor3 = FromRGB(20, 24, 21)
                })  Items["OptionHolder"]:AddToTheme({BackgroundColor3 = "Inline", BorderColor3 = "Border"})

                Instances:Create("UIStroke", {
                    Parent = Items["OptionHolder"].Instance,
                    Name = "\0",
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Outline"})

                Instances:Create("UIPadding", {
                    Parent = Items["OptionHolder"].Instance,
                    Name = "\0",
                    PaddingTop = UDimNew(0, 5),
                    PaddingBottom = UDimNew(0, 5),
                    PaddingRight = UDimNew(0, 5),
                    PaddingLeft = UDimNew(0, 8)
                })

                Instances:Create("UIListLayout", {
                    Parent = Items["OptionHolder"].Instance,
                    Name = "\0",
                    Padding = UDimNew(0, 3),
                    SortOrder = Enum.SortOrder.LayoutOrder
                })
            end

            function Dropdown:Get()
                return Dropdown.Value
            end

            local Debounce = false
            local RenderStepped  

            function Dropdown:SetOpen(Bool)
                if Debounce then 
                    return
                end

                Dropdown.IsOpen = Bool

                Debounce = true 

                if Dropdown.IsOpen then 
                    Items["OptionHolder"].Instance.Visible = true
                    Items["OptionHolder"].Instance.Parent = Library.Holder.Instance
                    Items["Icon"]:Tween(nil, {Rotation = -90})
                    
                    RenderStepped = RunService.RenderStepped:Connect(function()
                        Items["OptionHolder"].Instance.Position = UDim2New(0, Items["RealDropdown"].Instance.AbsolutePosition.X, 0, Items["RealDropdown"].Instance.AbsolutePosition.Y + Items["RealDropdown"].Instance.AbsoluteSize.Y + 5)
                        Items["OptionHolder"].Instance.Size = UDim2New(0, Items["RealDropdown"].Instance.AbsoluteSize.X, 0, 0)
                    end)

                    if not Debounce then 
                        for Index, Value in Library.OpenFrames do 
                            if Value ~= Dropdown then 
                                Value:SetOpen(false)
                            end
                        end

                        Library.OpenFrames[Dropdown] = Dropdown 
                    end
                else
                    if not Debounce then 
                        if Library.OpenFrames[Dropdown] then 
                            Library.OpenFrames[Dropdown] = nil
                        end
                    end

                    if RenderStepped then 
                        RenderStepped:Disconnect()
                        RenderStepped = nil
                    end

                    Items["Icon"]:Tween(nil, {Rotation = 0})
                end

                local Descendants = Items["OptionHolder"].Instance:GetDescendants()
                TableInsert(Descendants, Items["OptionHolder"].Instance)

                local NewTween

                for Index, Value in Descendants do 
                    local TransparencyProperty = Tween:GetProperty(Value)

                    if not TransparencyProperty then
                        continue 
                    end

                    if type(TransparencyProperty) == "table" then 
                        for _, Property in TransparencyProperty do 
                            NewTween = Tween:FadeItem(Value, Property, Bool, Library.FadeSpeed)
                        end
                    else
                        NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Library.FadeSpeed)
                    end
                end
                
                NewTween.Tween.Completed:Connect(function()
                    Debounce = false 
                    Items["OptionHolder"].Instance.Visible = Dropdown.IsOpen
                    task.wait(0.2)
                    Items["OptionHolder"].Instance.Parent = not Dropdown.IsOpen and Library.UnusedHolder.Instance or Library.Holder.Instance
                end)
            end

            function Dropdown:SetVisibility(Bool)
                Items["Dropdown"].Instance.Visible = Bool
            end

            function Dropdown:Set(Option)
                if Data.Multi then 
                    if type(Option) ~= "table" then 
                        return
                    end

                    Dropdown.Value = Option
                    Library.Flags[Dropdown.Flag] = Option

                    for Index, Value in Option do
                        local OptionData = Dropdown.Options[Value]
                        
                        if not OptionData then
                            continue
                        end

                        OptionData.Selected = true 
                        OptionData:Toggle("Active")
                    end

                    Items["Value"].Instance.Text = TableConcat(Option, ", ")
                else
                    if not Dropdown.Options[Option] then
                        return
                    end

                    local OptionData = Dropdown.Options[Option]

                    Dropdown.Value = Option
                    Library.Flags[Dropdown.Flag] = Option

                    for Index, Value in Dropdown.Options do
                        if Value ~= OptionData then
                            Value.Selected = false 
                            Value:Toggle("Inactive")
                        else
                            Value.Selected = true 
                            Value:Toggle("Active")
                        end
                    end

                    Items["Value"].Instance.Text = Option
                end

                if Data.Callback then   
                    Library:SafeCall(Data.Callback, Dropdown.Value)
                end
            end

            function Dropdown:Add(Option)
                local OptionButton = Instances:Create("TextButton", {
                    Parent = Items["OptionHolder"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = Option,
                    AutoButtonColor = false,
                    BorderSizePixel = 0,
                    BackgroundTransparency = 1,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    Size = UDim2New(1, 0, 0, 15),
                    ZIndex = 5,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  OptionButton:AddToTheme({TextColor3 = "Text"})

                local OptionData = {
                    Button = OptionButton,
                    Name = Option,
                    Selected = false
                }

                function OptionData:Toggle(Status)
                    if Status == "Active" then 
                        OptionData.Button:ChangeItemTheme({TextColor3 = "Accent"})
                        OptionData.Button:Tween(nil, {TextColor3 = Library.Theme.Accent})
                    else
                        OptionData.Button:ChangeItemTheme({TextColor3 = "Text"}) 
                        OptionData.Button:Tween(nil, {TextColor3 = Library.Theme.Text})
                    end
                end

                function OptionData:Set()
    OptionData.Selected = not OptionData.Selected

    if Data.Multi then 
        local Index = TableFind(Dropdown.Value, OptionData.Name)

        if Index then 
            TableRemove(Dropdown.Value, Index)
        else
            TableInsert(Dropdown.Value, OptionData.Name)
        end

        OptionData:Toggle(Index and "Inactive" or "Active")

        Library.Flags[Dropdown.Flag] = Dropdown.Value

        local TextFormat = #Dropdown.Value > 0 and TableConcat(Dropdown.Value, ", ") or "--"
        Items["Value"].Instance.Text = TextFormat
    else
        if OptionData.Selected then 
            Dropdown.Value = OptionData.Name
            Library.Flags[Dropdown.Flag] = OptionData.Name

            OptionData.Selected = true
            OptionData:Toggle("Active")

            for Index, Value in Dropdown.Options do 
                if Value ~= OptionData then
                    Value.Selected = false 
                    Value:Toggle("Inactive")
                end
            end

            Items["Value"].Instance.Text = OptionData.Name
        else
            Dropdown.Value = nil
            Library.Flags[Dropdown.Flag] = nil

            OptionData.Selected = false
            OptionData:Toggle("Inactive")

            Items["Value"].Instance.Text = "--"
        end
    end

    if Data.Callback then
        Library:SafeCall(Data.Callback, Dropdown.Value)
    end
end

do
    local button = OptionData.Button.Instance
    local debounce = false

    local function handleOption()
        if debounce then return end
        debounce = true
        OptionData:Set()
        task.delay(0.1, function() debounce = false end)
    end

    pcall(function()
        if button.MouseButton1Down then
            button.MouseButton1Down:Connect(handleOption)
        end
    end)

    pcall(function()
        if button.MouseButton1Click then
            button.MouseButton1Click:Connect(handleOption)
        end
    end)

    pcall(function()
        if button.TouchTap then
            button.TouchTap:Connect(handleOption)
        end
    end)

    pcall(function()
        if button.Activated then
            button.Activated:Connect(handleOption)
        end
    end)
end

Dropdown.Options[OptionData.Name] = OptionData
return OptionData
end

function Dropdown:Remove(Option)
    if not Dropdown.Options[Option] then
        return
    end

    Dropdown.Options[Option].Button:Clean()
    Dropdown.Options[Option] = nil
end

function Dropdown:Refresh(List)
    for Index, Value in Dropdown.Options do 
        Dropdown:Remove(Value.Name)
    end

    for Index, Value in List do 
        Dropdown:Add(Value)
    end
end

do
    local dropdownButton = Items["RealDropdown"].Instance
    local debounce = false

    local function handleDropdown()
        if debounce then return end
        debounce = true
        Dropdown:SetOpen(not Dropdown.IsOpen)
        task.delay(0.1, function() debounce = false end)
    end

    pcall(function()
        if dropdownButton.MouseButton1Down then
            dropdownButton.MouseButton1Down:Connect(handleDropdown)
        end
    end)

    pcall(function()
        if dropdownButton.MouseButton1Click then
            dropdownButton.MouseButton1Click:Connect(handleDropdown)
        end
    end)

    pcall(function()
        if dropdownButton.TouchTap then
            dropdownButton.TouchTap:Connect(handleDropdown)
        end
    end)

    pcall(function()
        if dropdownButton.Activated then
            dropdownButton.Activated:Connect(handleDropdown)
        end
    end)
end

Items["Dropdown"]:OnHover(function()
    Items["RealDropdown"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
    Items["RealDropdown"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
end)

Items["Dropdown"]:OnHoverLeave(function()
    Items["RealDropdown"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
    Items["RealDropdown"]:Tween(nil, {BackgroundColor3 = Library.Theme["Element"]})
end)

Library:Connect(UserInputService.InputBegan, function(Input)
    if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
        if not Dropdown.IsOpen then
            return 
        end

        if Library:IsMouseOverFrame(Items["OptionHolder"]) then 
            return
        end

        Dropdown:SetOpen(false)
    end
end)

for Index, Value in Data.Items do 
    Dropdown:Add(Value)
end

if Data.Default then 
    Dropdown:Set(Data.Default)
end

Library.SetFlags[Dropdown.Flag] = function(Value)
    Dropdown:Set(Value)
end

return Dropdown, Items 
end

        Components.ColorpickerTab = function(self, Data)
            if not Data.Pages then 
                return
            end

            local NewTab = { 
                Name = Data.Name,
                Active = false
            }

            local Items = { } do
                Items["Inactive"] = Instances:Create("TextButton", {
                    Parent = Data.PageHolder.Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = NewTab.Name,
                    AutoButtonColor = false,
                    Size = UDim2New(1, 0, 1, 0),
                    BorderSizePixel = 0,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(20, 24, 21)
                })  Items["Inactive"]:AddToTheme({BackgroundColor3 = "Inline"})

                Items["Inactive"]:TextBorder()

                Items["PageContent"] = Instances:Create("Frame", {
                    Parent = Data.ContentHolder.Instance,
                    Name = "\0",
                    Visible = false,
                    BackgroundTransparency = 1,
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 0, 1, 0),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })
            end

            function NewTab:Turn(Bool)
    NewTab.Active = Bool 

    if NewTab.Active then
        Items["PageContent"].Instance.Visible = true 
        Items["PageContent"].Instance.Parent = Data.ContentHolder.Instance 

        Items["Inactive"]:ChangeItemTheme({BackgroundColor3 = "Background"})
        Items["Inactive"]:Tween(nil, {BackgroundColor3 = Library.Theme.Background})
    else
        Items["PageContent"].Instance.Visible = false
        Items["PageContent"].Instance.Parent = Library.UnusedHolder.Instance 

        Items["Inactive"]:ChangeItemTheme({BackgroundColor3 = "Inline"})
        Items["Inactive"]:Tween(nil, {BackgroundColor3 = Library.Theme.Inline})
    end
end

do
    local tabButton = Items["Inactive"].Instance
    local debounce = false

    local function handleTabClick()
        if debounce then return end
        debounce = true
        
        for Index, Value in Data.Stack do 
            Value:Turn(Value == NewTab)
        end
        
        task.delay(0.1, function() debounce = false end)
    end

    pcall(function()
        if tabButton.MouseButton1Down then
            tabButton.MouseButton1Down:Connect(handleTabClick)
        end
    end)

    pcall(function()
        if tabButton.MouseButton1Click then
            tabButton.MouseButton1Click:Connect(handleTabClick)
        end
    end)

    pcall(function()
        if tabButton.TouchTap then
            tabButton.TouchTap:Connect(handleTabClick)
        end
    end)

    pcall(function()
        if tabButton.Activated then
            tabButton.Activated:Connect(handleTabClick)
        end
    end)
end

if #Data.Stack == 0 then 
    NewTab:Turn(true)
end

TableInsert(Data.Stack, NewTab)
return NewTab, Items 
end

        Components.CreateSubPaletteItems = function(self, Items)
            Items["ColorpickerWindow"].Instance.Size = UDim2New(0, 171, 0, 168)

            Items["Palette"] = Instances:Create("TextButton", {
                Parent = Items["ColorpickerWindow"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(0, 0, 0),
                BorderColor3 = FromRGB(42, 49, 45),
                Text = "",
                AutoButtonColor = false,
                Position = UDim2New(0, 8, 0, 8),
                Size = UDim2New(1, -41, 1, -41),
                BorderSizePixel = 2,
                TextSize = 14,
                BackgroundColor3 = FromRGB(157, 175, 255)
            })  Items["Palette"]:AddToTheme({BorderColor3 = "Outline"})

            Instances:Create("UIStroke", {
                Parent = Items["Palette"].Instance,
                Name = "\0",
                Color = FromRGB(12, 12, 12),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Border"})

            Items["Saturation"] = Instances:Create("ImageLabel", {
                Parent = Items["Palette"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(0, 0, 0),
                Image = Library:GetImage("Saturation"),
                BackgroundTransparency = 1,
                Size = UDim2New(1, 0, 1, 0),
                ZIndex = 2,
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Items["Value"] = Instances:Create("ImageLabel", {
                Parent = Items["Palette"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, 2, 1, 0),
                Image = Library:GetImage("Value"),
                BackgroundTransparency = 1,
                Position = UDim2New(0, -1, 0, 0),
                ZIndex = 3,
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Items["PaletteDragger"] = Instances:Create("Frame", {
                Parent = Items["Palette"].Instance,
                Name = "\0",
                Position = UDim2New(0, 8, 0, 8),
                ZIndex = 5,
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(0, 2, 0, 2),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Instances:Create("UIStroke", {
                Parent = Items["PaletteDragger"].Instance,
                Name = "\0",
                Color = FromRGB(12, 12, 12),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Border"})

            Items["Hue"] = Instances:Create("Frame", {
                Parent = Items["ColorpickerWindow"].Instance,
                Name = "\0",
                Active = true,
                BorderColor3 = FromRGB(42, 49, 45),
                AnchorPoint = Vector2New(1, 0),
                Position = UDim2New(1, -8, 0, 8),
                Size = UDim2New(0, 15, 1, -16),
                Selectable = true,
                BorderSizePixel = 2,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Hue"]:AddToTheme({BorderColor3 = "Outline"})

            Instances:Create("UIStroke", {
                Parent = Items["Hue"].Instance,
                Name = "\0",
                Color = FromRGB(12, 12, 12),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Border"})

            Items["HueInline"] = Instances:Create("TextButton", {
                Parent = Items["Hue"].Instance,
                Text = "",
                AutoButtonColor = false,
                Name = "\0",
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, 0, 1, 0),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Instances:Create("UIGradient", {
                Parent = Items["HueInline"].Instance,
                Name = "\0",
                Rotation = 90,
                Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 0, 0)), RGBSequenceKeypoint(0.17, FromRGB(255, 255, 0)), RGBSequenceKeypoint(0.33, FromRGB(0, 255, 0)), RGBSequenceKeypoint(0.5, FromRGB(0, 255, 255)), RGBSequenceKeypoint(0.67, FromRGB(0, 0, 255)), RGBSequenceKeypoint(0.83, FromRGB(255, 0, 255)), RGBSequenceKeypoint(1, FromRGB(255, 0, 0))}
            })

            Items["HueDragger"] = Instances:Create("Frame", {
                Parent = Items["Hue"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, 0, 0, 1),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Instances:Create("UIStroke", {
                Parent = Items["HueDragger"].Instance,
                Name = "\0",
                Color = FromRGB(12, 12, 12),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Border"})

            Items["Alpha"] = Instances:Create("TextButton", {
                Parent = Items["ColorpickerWindow"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(0, 0, 0),
                BorderColor3 = FromRGB(42, 49, 45),
                Text = "",
                AutoButtonColor = false,
                AnchorPoint = Vector2New(0, 1),
                Position = UDim2New(0, 8, 1, -8),
                Size = UDim2New(1, -41, 0, 15),
                BorderSizePixel = 2,
                TextSize = 14,
                BackgroundColor3 = FromRGB(157, 175, 255)
            })  Items["Alpha"]:AddToTheme({BorderColor3 = "Outline"})

            Instances:Create("UIStroke", {
                Parent = Items["Alpha"].Instance,
                Name = "\0",
                Color = FromRGB(12, 12, 12),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Border"})

            Items["Checkers"] = Instances:Create("ImageLabel", {
                Parent = Items["Alpha"].Instance,
                Name = "\0",
                ScaleType = Enum.ScaleType.Tile,
                BorderColor3 = FromRGB(0, 0, 0),
                TileSize = UDim2New(0, 6, 0, 6),
                Image = Library:GetImage("Checkers"),
                BackgroundTransparency = 1,
                Size = UDim2New(1, 0, 1, 0),
                ZIndex = 2,
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  

            Instances:Create("UIGradient", {
                Parent = Items["Checkers"].Instance,
                Name = "\0",
                Transparency = NumSequence{NumSequenceKeypoint(0, 1), NumSequenceKeypoint(0.37, 0.5), NumSequenceKeypoint(1, 0)}
            })

            Items["AlphaDragger"] = Instances:Create("Frame", {
                Parent = Items["Alpha"].Instance,
                Name = "\0",
                ZIndex = 5,
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(0, 1, 1, 0),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Instances:Create("UIStroke", {
                Parent = Items["AlphaDragger"].Instance,
                Name = "\0",
                Color = FromRGB(12, 12, 12),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Border"})
        end

        Components.Colorpicker = function(self, Data) -- poetry warning (â•¯Â°â–¡Â°)â•¯
            local Colorpicker = {
                IsOpen = false,

                Hue = 0,
                Saturation = 0,
                Value = 0,
                Alpha = 0,
                Color = FromRGB(255, 255, 255),
                HexValue = "#ffffff",

                Pages = Data.Pages and { } or nil,
                Flag = Data.Flag,
            }

            local UpdateSync

            local Items = { } do
                Items["ColorpickerButton"] = Instances:Create("TextButton", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(0, 0, 0),
                    BorderColor3 = FromRGB(12, 12, 12),
                    Text = "",
                    AutoButtonColor = false,
                    Position = UDim2New(0, -123, 0, 0),
                    Size = UDim2New(0, 15, 0, 15),
                    BorderSizePixel = 2,
                    TextSize = 14,
                    BackgroundColor3 = FromRGB(157, 175, 255)
                })  Items["ColorpickerButton"]:AddToTheme({BorderColor3 = "Border"})

                Instances:Create("UIStroke", {
                    Parent = Items["ColorpickerButton"].Instance,
                    Name = "\0",
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Outline"})

                Items["ColorpickerButtonInline"] = Instances:Create("Frame", {
                    Parent = Items["ColorpickerButton"].Instance,
                    Name = "\0",
                    Position = UDim2New(0, 1, 0, 1),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, -2, 1, -2),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(157, 175, 255)
                })

                Instances:Create("UIGradient", {
                    Parent = Items["ColorpickerButtonInline"].Instance,
                    Name = "\0",
                    Rotation = -165,
                    Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
                }):AddToTheme({Color = function()
                    return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
                end})

                Items["ColorpickerWindow"] = Instances:Create("TextButton", {
                    Parent = Library.UnusedHolder.Instance,
                    Text = "",
                    AutoButtonColor = false,
                    Name = "\0",
                    Position = UDim2New(0, 12, 0, 12),
                    BorderColor3 = FromRGB(12, 12, 12),
                    Size = UDim2New(0, 266, 0, 258),
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(14, 17, 15)
                })  Items["ColorpickerWindow"]:AddToTheme({BorderColor3 = "Border", BackgroundColor3 = "Background"})

                Instances:Create("UIStroke", {
                    Parent = Items["ColorpickerWindow"].Instance,
                    Name = "\0",
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Outline"})

                if Data.Pages then 
                    Items["Pages"] = Instances:Create("Frame", {
                        Parent = Items["ColorpickerWindow"].Instance,
                        Name = "\0",
                        BackgroundTransparency = 1,
                        BorderColor3 = FromRGB(0, 0, 0),
                        Size = UDim2New(1, 0, 0, 20),
                        BorderSizePixel = 0,
                        BackgroundColor3 = FromRGB(255, 255, 255)
                    })

                    Instances:Create("UIListLayout", {
                        Parent = Items["Pages"].Instance,
                        Name = "\0",
                        FillDirection = Enum.FillDirection.Horizontal,
                        SortOrder = Enum.SortOrder.LayoutOrder,
                        HorizontalFlex = Enum.UIFlexAlignment.Fill
                    })

                    Items["Content"] = Instances:Create("Frame", {
                        Parent = Items["ColorpickerWindow"].Instance,
                        Name = "\0",
                        BackgroundTransparency = 1,
                        Position = UDim2New(0, 0, 0, 25),
                        BorderColor3 = FromRGB(0, 0, 0),
                        Size = UDim2New(1, 0, 1, -25),
                        BorderSizePixel = 0,
                        BackgroundColor3 = FromRGB(255, 255, 255)
                    })
                else
                    Components:CreateSubPaletteItems(Items)
                end
            end

            local ColorTab, ColorTabItems = Components:ColorpickerTab({
                ContentHolder = Items["Content"],
                Pages = Colorpicker.Pages,
                PageHolder = Items["Pages"],
                Stack = Colorpicker.Pages,
                Name = "Color"
            })

            local AnimationsTab, AnimationsTabItems = Components:ColorpickerTab({
                ContentHolder = Items["Content"],
                Pages = Colorpicker.Pages,
                PageHolder = Items["Pages"],
                Stack = Colorpicker.Pages,
                Name = "Animations"
            })

            local OtherTab, OtherTabItems = Components:ColorpickerTab({
                ContentHolder = Items["Content"],
                Pages = Colorpicker.Pages,
                PageHolder = Items["Pages"],
                Stack = Colorpicker.Pages,
                Name = "Other"
            })

            local OldColor = Colorpicker.Color
            local OldAlpha = Colorpicker.Alpha
            local CurrentAnimation

            local AnimationsDropdown, AnimationsDropdownItems
            local KeyframeOneLabel, KeyframeOneLabelItems
            local KeyframeTwoLabel, KeyframeTwoLabelItems

            local KeyframeOneColorpicker, KeyframeOneColorpickerItems
            local KeyframeTwoColorpicker, KeyframeTwoColorpickerItems

            local AnimationSpeedSlider, AnimationSpeedSliderItems

            if ColorTab then
                Items["Palette"] = Instances:Create("TextButton", {
                    Parent = ColorTabItems["PageContent"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(0, 0, 0),
                    BorderColor3 = FromRGB(42, 49, 45),
                    Text = "",
                    AutoButtonColor = false,
                    Position = UDim2New(0, 8, 0, 8),
                    Size = UDim2New(1, -46, 1, -46),
                    BorderSizePixel = 2,
                    TextSize = 14,
                    BackgroundColor3 = FromRGB(157, 175, 255)
                })  Items["Palette"]:AddToTheme({BorderColor3 = "Outline"})

                Instances:Create("UIStroke", {
                    Parent = Items["Palette"].Instance,
                    Name = "\0",
                    Color = FromRGB(12, 12, 12),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Border"})

                Items["Saturation"] = Instances:Create("ImageLabel", {
                    Parent = Items["Palette"].Instance,
                    Name = "\0",
                    BorderColor3 = FromRGB(0, 0, 0),
                    Image = Library:GetImage("Saturation"),
                    BackgroundTransparency = 1,
                    Size = UDim2New(1, 0, 1, 0),
                    ZIndex = 2,
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Items["Value"] = Instances:Create("ImageLabel", {
                    Parent = Items["Palette"].Instance,
                    Name = "\0",
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 2, 1, 0),
                    Image = Library:GetImage("Value"),
                    BackgroundTransparency = 1,
                    Position = UDim2New(0, -1, 0, 0),
                    ZIndex = 3,
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Items["PaletteDragger"] = Instances:Create("Frame", {
                    Parent = Items["Palette"].Instance,
                    Name = "\0",
                    Position = UDim2New(0, 8, 0, 8),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(0, 2, 0, 2),
                    BorderSizePixel = 0,
                    ZIndex = 5,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Instances:Create("UIStroke", {
                    Parent = Items["PaletteDragger"].Instance,
                    Name = "\0",
                    Color = FromRGB(12, 12, 12),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Border"})

                Items["Hue"] = Instances:Create("Frame", {
                    Parent = ColorTabItems["PageContent"].Instance,
                    Name = "\0",
                    Active = true,
                    BorderColor3 = FromRGB(42, 49, 45),
                    AnchorPoint = Vector2New(1, 0),
                    Position = UDim2New(1, -8, 0, 8),
                    Size = UDim2New(0, 20, 1, -16),
                    Selectable = true,
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Hue"]:AddToTheme({BorderColor3 = "Outline"})

                Instances:Create("UIStroke", {
                    Parent = Items["Hue"].Instance,
                    Name = "\0",
                    Color = FromRGB(12, 12, 12),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Border"})

                Items["HueInline"] = Instances:Create("TextButton", {
                    Parent = Items["Hue"].Instance,
                    AutoButtonColor = false,
                    Text = "",
                    Name = "\0",
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 0, 1, 0),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Instances:Create("UIGradient", {
                    Parent = Items["HueInline"].Instance,
                    Name = "\0",
                    Rotation = 90,
                    Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 0, 0)), RGBSequenceKeypoint(0.17, FromRGB(255, 255, 0)), RGBSequenceKeypoint(0.33, FromRGB(0, 255, 0)), RGBSequenceKeypoint(0.5, FromRGB(0, 255, 255)), RGBSequenceKeypoint(0.67, FromRGB(0, 0, 255)), RGBSequenceKeypoint(0.83, FromRGB(255, 0, 255)), RGBSequenceKeypoint(1, FromRGB(255, 0, 0))}
                })

                Items["HueDragger"] = Instances:Create("Frame", {
                    Parent = Items["Hue"].Instance,
                    Name = "\0",
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 0, 0, 1),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Instances:Create("UIStroke", {
                    Parent = Items["HueDragger"].Instance,
                    Name = "\0",
                    Color = FromRGB(12, 12, 12),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Border"})

                Items["Alpha"] = Instances:Create("TextButton", {
                    Parent = ColorTabItems["PageContent"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(0, 0, 0),
                    BorderColor3 = FromRGB(42, 49, 45),
                    Text = "",
                    AutoButtonColor = false,
                    AnchorPoint = Vector2New(0, 1),
                    Position = UDim2New(0, 8, 1, -8),
                    Size = UDim2New(1, -46, 0, 20),
                    BorderSizePixel = 2,
                    TextSize = 14,
                    BackgroundColor3 = FromRGB(157, 175, 255)
                })  Items["Alpha"]:AddToTheme({BorderColor3 = "Outline"})

                Instances:Create("UIStroke", {
                    Parent = Items["Alpha"].Instance,   
                    Name = "\0",
                    Color = FromRGB(12, 12, 12),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Border"})

                Items["Checkers"] = Instances:Create("ImageLabel", {
                    Parent = Items["Alpha"].Instance,
                    Name = "\0",
                    ScaleType = Enum.ScaleType.Tile,
                    BorderColor3 = FromRGB(0, 0, 0),
                    TileSize = UDim2New(0, 6, 0, 6),
                    Image = Library:GetImage("Checkers"),
                    BackgroundTransparency = 1,
                    Size = UDim2New(1, 0, 1, 0),
                    ZIndex = 2,
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  

                Instances:Create("UIGradient", {
                    Parent = Items["Checkers"].Instance,
                    Name = "\0",
                    Transparency = NumSequence{NumSequenceKeypoint(0, 1), NumSequenceKeypoint(0.37, 0.5), NumSequenceKeypoint(1, 0)}
                })

                Items["AlphaDragger"] = Instances:Create("Frame", {
                    Parent = Items["Alpha"].Instance,
                    Name = "\0",
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(0, 1, 1, 0),
                    ZIndex = 5,
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Instances:Create("UIStroke", {
                    Parent = Items["AlphaDragger"].Instance,
                    Name = "\0",
                    Color = FromRGB(12, 12, 12),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Border"})
            end

            if AnimationsTab then
                AnimationsDropdown, AnimationsDropdownItems = Components:Dropdown({
                    Parent = AnimationsTabItems["PageContent"],
                    Name = "Animations",
                    Items = {"Rainbow", "Fade", "Fade alpha", "Linear"},
                    Default = nil,
                    Flag = Colorpicker.Flag.."Animation",
                    Multi = false,
                    Debounce = Colorpicker,
                    Callback = function(Value)
                        CurrentAnimation = Value
                        if Value == "Rainbow" then 
                            if KeyframeOneLabel and KeyframeTwoLabel and AnimationSpeedSlider then
                                KeyframeOneLabel:SetVisibility(false)
                                KeyframeTwoLabel:SetVisibility(false)

                                AnimationSpeedSliderItems["Slider"].Instance.Position = UDim2New(0, 8, 0, 45)
                            end

                            OldColor = Colorpicker.Color

                            Library:Thread(function()
                                while task.wait() do 
                                    local RainbowHue = MathAbs(MathSin(tick() * (AnimationSpeedSlider.Value / 25)))
                                    local Color = FromHSV(RainbowHue, 1, 1)

                                    Colorpicker:Set(Color, Colorpicker.Alpha)
                                    UpdateSync(true)

                                    if CurrentAnimation ~= "Rainbow" then
                                        Colorpicker:Set(OldColor, Colorpicker.Alpha)
                                        break
                                    end
                                end
                            end)
                        elseif Value == "Fade" then 
                            if KeyframeOneLabel and KeyframeTwoLabel and AnimationSpeedSlider then
                                KeyframeOneLabel:SetVisibility(true)
                                KeyframeTwoLabel:SetVisibility(false)

                                AnimationSpeedSliderItems["Slider"].Instance.Position = UDim2New(0, 8, 0, 65)

                                OldColor = Colorpicker.Color
                                
                                Library:Thread(function()
                                    while task.wait() do 
                                        local Speed = MathAbs(MathSin(tick() * (AnimationSpeedSlider.Value / 25)))
                                        Colorpicker:Set(KeyframeOneColorpicker.Color:Lerp(FromRGB(0, 0, 0), Speed), Colorpicker.Alpha)
                                        UpdateSync(true)

                                        if CurrentAnimation ~= "Fade" then
                                            Colorpicker:Set(OldColor, Colorpicker.Alpha)
                                            break
                                        end
                                    end
                                end)
                            end
                        elseif Value == "Fade alpha" then
                            if KeyframeOneLabel and KeyframeTwoLabel then
                                KeyframeOneLabel:SetVisibility(false)
                                KeyframeTwoLabel:SetVisibility(false)

                                AnimationSpeedSliderItems["Slider"].Instance.Position = UDim2New(0, 8, 0, 45)

                                OldColor = Colorpicker.Alpha
                                
                                Library:Thread(function()
                                    while task.wait() do 
                                        local AlphaValue = MathAbs(MathSin(tick() * (AnimationSpeedSlider.Value / 25)))
                                        Colorpicker:Set(Colorpicker.Color, AlphaValue)
                                        UpdateSync(true)

                                        if CurrentAnimation ~= "Fade alpha" then
                                            Colorpicker:Set(Colorpicker.Color, OldAlpha)
                                            break
                                        end
                                    end
                                end)
                            end
                        elseif Value == "Linear" then
                            if KeyframeOneLabel and KeyframeTwoLabel then
                                KeyframeOneLabel:SetVisibility(true)
                                KeyframeTwoLabel:SetVisibility(true)

                                AnimationSpeedSliderItems["Slider"].Instance.Position = UDim2New(0, 8, 0, 85)

                                OldColor = Colorpicker.Color
                                
                                Library:Thread(function()
                                    while task.wait() do 
                                        local Speed = MathAbs(MathSin(tick() * (AnimationSpeedSlider.Value / 25)))
                                        Colorpicker:Set(KeyframeOneColorpicker.Color:Lerp(KeyframeTwoColorpicker.Color, Speed), Colorpicker.Alpha)
                                        UpdateSync(true)

                                        if CurrentAnimation ~= "Linear" then
                                            Colorpicker:Set(OldColor, Colorpicker.Alpha)
                                            break
                                        end
                                    end
                                end)
                            end
                        end
                    end
                })

                AnimationsDropdownItems["Dropdown"].Instance.Position = UDim2New(0, 8, 0, 0)
                AnimationsDropdownItems["Dropdown"].Instance.Size = UDim2New(1, -16, 0, 40)

                KeyframeOneLabel, KeyframeOneLabelItems = Components:Label({
                    Parent = AnimationsTabItems["PageContent"],
                    Name = "Keyframe 1",
                })

                KeyframeOneLabelItems["Label"].Instance.Position = UDim2New(0, 8, 0, 45)
                KeyframeOneLabelItems["Label"].Instance.Size = UDim2New(1, -16, 0, 20)

                KeyframeTwoLabel, KeyframeTwoLabelItems = Components:Label({
                    Parent = AnimationsTabItems["PageContent"],
                    Name = "Keyframe 2",
                })

                KeyframeTwoLabelItems["Label"].Instance.Position = UDim2New(0, 8, 0, 65)
                KeyframeTwoLabelItems["Label"].Instance.Size = UDim2New(1, -16, 0, 20)

                KeyframeOneColorpicker, KeyframeOneColorpickerItems = Components:Colorpicker({
                    Parent = KeyframeOneLabelItems["SubElements"],
                    Alpha = 0,
                    Pages = false,
                    Default = Color3.fromRGB(255, 255, 255),
                    Flag = Colorpicker.Flag.."Animation".."Keyframe1",
                    Debounce = Colorpicker,
                })

                KeyframeTwoColorpicker, KeyframeTwoColorpickerItems = Components:Colorpicker({
                    Parent = KeyframeTwoLabelItems["SubElements"],
                    Alpha = 0,
                    Pages = false,
                    Default = Color3.fromRGB(0, 0, 0),
                    Debounce = Colorpicker,
                    Flag = Colorpicker.Flag.."Animation".."Keyframe2",
                })

                AnimationSpeedSlider, AnimationSpeedSliderItems = Components:Slider({
                    Parent = AnimationsTabItems["PageContent"],
                    Name = "Speed",
                    Flag = Colorpicker.Flag .. "AnimationSpeed",
                    Min = 0,
                    Max = 100,
                    Decimals = 0.1,
                    Default = 20,
                    Suffix = "%",
                })

                AnimationSpeedSliderItems["Slider"].Instance.Position = UDim2New(0, 8, 0, 85)
                AnimationSpeedSliderItems["Slider"].Instance.Size = UDim2New(1, -16, 0, 28)
            end

            local IsSyncToggled

            if OtherTab then
                Items["CurrentColor"] = Instances:Create("Frame", {
                    Parent = OtherTabItems["PageContent"].Instance,
                    Name = "\0",
                    Position = UDim2New(0, 8, 0, 8),
                    BorderColor3 = FromRGB(42, 49, 45),
                    Size = UDim2New(1, -16, 0, 50),
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(157, 175, 255)
                })  Items["CurrentColor"]:AddToTheme({BorderColor3 = "Outline"})

                Instances:Create("UIStroke", {
                    Parent = Items["CurrentColor"].Instance,
                    Name = "\0",
                    Color = FromRGB(12, 12, 12),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Border"})

                Instances:Create("UIGradient", {
                    Parent = Items["CurrentColor"].Instance,
                    Name = "\0",
                    Rotation = 82,
                    Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(154, 154, 154))}
                })

                Items["RGBColor"] = Instances:Create("TextLabel", {
                    Parent = OtherTabItems["PageContent"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "RGB:",
                    Size = UDim2New(1, -16, 0, 15),
                    Position = UDim2New(0, 8, 0, 65),
                    BackgroundTransparency = 1,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    BorderSizePixel = 0,
                    RichText = true,
                    TextSize = 9,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Items["HEXColor"] = Instances:Create("TextLabel", {
                    Parent = OtherTabItems["PageContent"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "HEX:",
                    Size = UDim2New(1, -16, 0, 15),
                    Position = UDim2New(0, 8, 0, 85),
                    BackgroundTransparency = 1,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    BorderSizePixel = 0,
                    RichText = true,
                    TextSize = 9,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Items["HSVColor"] = Instances:Create("TextLabel", {
                    Parent = OtherTabItems["PageContent"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "HSV:",
                    Size = UDim2New(1, -16, 0, 15),
                    Position = UDim2New(0, 8, 0, 105),
                    BackgroundTransparency = 1,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    BorderSizePixel = 0,
                    RichText = true,
                    TextSize = 9,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                local CopyNPasteButton, CopyNPasteButtonItems = Components:Button({
                    Parent = OtherTabItems["PageContent"],
                })

                CopyNPasteButtonItems["Button"].Instance.Position = UDim2New(0, 8, 0, 145)
                CopyNPasteButtonItems["Button"].Instance.Size = UDim2New(1, -16, 0, 20)

                CopyNPasteButton:Add("Copy", function()
                    Library.CopiedColor = Colorpicker.Color
                end)

                CopyNPasteButton:Add("Paste", function()
                    if Library.CopiedColor then
                        Colorpicker:Set(Library.CopiedColor)
                    end
                end)

                local Stash = { }

                IsSyncToggled = false

                local SyncColorpickersToggle, SyncColorpickerToggleItems = Components:Toggle({
                    Parent = OtherTabItems["PageContent"],
                    Flag = "SyncColorpickers"..Colorpicker.Flag,
                    Name = "Sync colorpickers",
                    Default = false,
                    Callback = function(Value)
                        IsSyncToggled = Value
                        if Value then 
                            for Index, Value in Library.Colorpickers do 
                                Stash[Value] = Value.Color
                                Value:Set(Colorpicker.Color)
                            end
                        else
                            for Index, Value in Library.Colorpickers do 
                                if Stash[Value] then
                                    Value:Set(Stash[Value])
                                end
                            end
                        end
                    end
                })

                SyncColorpickerToggleItems["Toggle"].Instance.Position = UDim2New(0, 8, 0, 125)
                SyncColorpickerToggleItems["Toggle"].Instance.Size = UDim2New(1, -16, 0, 12)
            end

            local Debounce = false
            local RenderStepped  

            function Colorpicker:SetOpen(Bool)
                if Debounce then 
                    return
                end

                Colorpicker.IsOpen = Bool

                Debounce = true 

                if Colorpicker.IsOpen then 
                    Items["ColorpickerWindow"].Instance.Visible = true
                    Items["ColorpickerWindow"].Instance.Parent = Library.Holder.Instance
                    
                    RenderStepped = RunService.RenderStepped:Connect(function()
                        Items["ColorpickerWindow"].Instance.Position = UDim2New(0, Items["ColorpickerButton"].Instance.AbsolutePosition.X, 0, Items["ColorpickerButton"].Instance.AbsolutePosition.Y + Items["ColorpickerButton"].Instance.AbsoluteSize.Y + 5)
                    end)

                    if not Data.Debounce then
                        for Index, Value in Library.OpenFrames do 
                            if Value ~= Colorpicker and Value ~= AnimationsDropdownItems then 
                                Value:SetOpen(false)
                            end
                        end

                        Library.OpenFrames[Colorpicker] = Colorpicker 
                    end
                else
                    if not Data.Debounce then 
                        if Library.OpenFrames[Colorpicker] then 
                            Library.OpenFrames[Colorpicker] = nil
                        end
                    end

                    if RenderStepped then 
                        RenderStepped:Disconnect()
                        RenderStepped = nil
                    end
                end

                local Descendants = Items["ColorpickerWindow"].Instance:GetDescendants()
                TableInsert(Descendants, Items["ColorpickerWindow"].Instance)

                local NewTween

                for Index, Value in Descendants do 
                    local TransparencyProperty = Tween:GetProperty(Value)

                    if not TransparencyProperty then
                        continue 
                    end

                    if type(TransparencyProperty) == "table" then 
                        for _, Property in TransparencyProperty do 
                            NewTween = Tween:FadeItem(Value, Property, Bool, Library.FadeSpeed)
                        end
                    else
                        NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Library.FadeSpeed)
                    end
                end
                
                NewTween.Tween.Completed:Connect(function()
                    Debounce = false 
                    Items["ColorpickerWindow"].Instance.Visible = Colorpicker.IsOpen
                    task.wait(0.2)
                    Items["ColorpickerWindow"].Instance.Parent = not Colorpicker.IsOpen and Library.UnusedHolder.Instance or Library.Holder.Instance
                end)
            end

            UpdateSync = function(Bool)
                if IsSyncToggled and Bool then 
                    for Index, Value in Library.Colorpickers do 
                        if Value ~= Colorpicker and not StringFind(Value.Flag, "Theme") then
                            Value:Set(Colorpicker.Color)
                        end
                    end
                end
            end

            function Colorpicker:Update(IsFromAlpha, UpdateSyncc)
                local Hue, Saturation, Value = Colorpicker.Hue, Colorpicker.Saturation, Colorpicker.Value
                Colorpicker.Color = FromHSV(Hue, Saturation, Value)
                Colorpicker.HexValue = Colorpicker.Color:ToHex()

                Library.Flags[Colorpicker.Flag] = {
                    Alpha = Colorpicker.Alpha,
                    Color = Colorpicker.HexValue
                }

                Items["ColorpickerButton"]:Tween(nil, {BackgroundColor3 = Colorpicker.Color})
                Items["ColorpickerButtonInline"]:Tween(nil, {BackgroundColor3 = Colorpicker.Color})

                UpdateSync(UpdateSyncc)

                if OtherTab then
                    Items["CurrentColor"]:Tween(nil, {BackgroundColor3 = Colorpicker.Color})

                    local Red = MathFloor(Colorpicker.Color.R * 255)
                    local Green = MathFloor(Colorpicker.Color.G * 255)
                    local Blue = MathFloor(Colorpicker.Color.B * 255)
                    local RedGreenBlue = tostring(Red) .. ", " .. tostring(Green) .. ", " .. tostring(Blue)

                    local FloorHue, FloorSat, FloorVal = nil, nil, nil

                    Items["RGBColor"].Instance.Text = "RGB: "..RedGreenBlue
                    Items["HSVColor"].Instance.Text = `HSV: %1, %1, %1`
                    Items["HEXColor"].Instance.Text = "HEX: " .. "#" .. Colorpicker.HexValue
                end

                Items["Palette"]:Tween(nil, {BackgroundColor3 = FromHSV(Hue, 1, 1)})

                if not IsFromAlpha then 
                    Items["Alpha"]:Tween(nil, {BackgroundColor3 = Colorpicker.Color})
                end

                if Data.Callback then 
                    Library:SafeCall(Data.Callback, Colorpicker.Color, Colorpicker.Alpha)
                end
            end

        function Colorpicker:Set(Color, Alpha)
    if type(Color) == "table" then
        Color = FromRGB(Color[1], Color[2], Color[3])
        Alpha = Color[4]
    elseif type(Color) == "string" then
        Color = FromHex(Color)
    end 

    Colorpicker.Hue, Colorpicker.Saturation, Colorpicker.Value = Color:ToHSV()
    Colorpicker.Alpha = Alpha or 0  

    local PaletteValueX = MathClamp(1 - Colorpicker.Saturation, 0, 0.99)
    local PaletteValueY = MathClamp(1 - Colorpicker.Value, 0, 0.99)

    local AlphaPositionX = MathClamp(Colorpicker.Alpha, 0, 0.995)
        
    local HuePositionY = MathClamp(Colorpicker.Hue, 0, 0.995)

    Items["PaletteDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(PaletteValueX, 0, PaletteValueY, 0)})
    Items["HueDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(0, 0, HuePositionY, 0)})
    Items["AlphaDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(AlphaPositionX, 0, 0, 0)})
    Colorpicker:Update(true, true)
end

do
    local colorpickerButton = Items["ColorpickerButton"].Instance
    local debounce = false

    local function handleColorpickerClick()
        if debounce then return end
        debounce = true
        
        Colorpicker:SetOpen(not Colorpicker.IsOpen)
        
        task.delay(0.1, function() debounce = false end)
    end

    pcall(function()
        if colorpickerButton.MouseButton1Down then
            colorpickerButton.MouseButton1Down:Connect(handleColorpickerClick)
        end
    end)

    pcall(function()
        if colorpickerButton.MouseButton1Click then
            colorpickerButton.MouseButton1Click:Connect(handleColorpickerClick)
        end
    end)

    pcall(function()
        if colorpickerButton.TouchTap then
            colorpickerButton.TouchTap:Connect(handleColorpickerClick)
        end
    end)

    pcall(function()
        if colorpickerButton.Activated then
            colorpickerButton.Activated:Connect(handleColorpickerClick)
        end
    end)
end
            
            local SlidingPalette = false
            local PaletteChanged
            
            function Colorpicker:SlidePalette(Input)
                if not Input or not SlidingPalette then
                    return
                end

                local ValueX = MathClamp(1 - (Input.Position.X - Items["Palette"].Instance.AbsolutePosition.X) / Items["Palette"].Instance.AbsoluteSize.X, 0, 1)
                local ValueY = MathClamp(1 - (Input.Position.Y - Items["Palette"].Instance.AbsolutePosition.Y) / Items["Palette"].Instance.AbsoluteSize.Y, 0, 1)

                Colorpicker.Saturation = ValueX
                Colorpicker.Value = ValueY

                local SlideX = MathClamp((Input.Position.X - Items["Palette"].Instance.AbsolutePosition.X) / Items["Palette"].Instance.AbsoluteSize.X, 0, 0.99)
                local SlideY = MathClamp((Input.Position.Y - Items["Palette"].Instance.AbsolutePosition.Y) / Items["Palette"].Instance.AbsoluteSize.Y, 0, 0.99)

                Items["PaletteDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(SlideX, 0, SlideY, 0)})
                Colorpicker:Update(false, true)
            end
            
            local SlidingHue = false
            local HueChanged

            function Colorpicker:SlideHue(Input)
                if not Input or not SlidingHue then
                    return
                end
                
                local ValueY = MathClamp((Input.Position.Y - Items["Hue"].Instance.AbsolutePosition.Y) / Items["Hue"].Instance.AbsoluteSize.Y, 0, 1)

                Colorpicker.Hue = ValueY

                local SlideY = MathClamp((Input.Position.Y - Items["Hue"].Instance.AbsolutePosition.Y) / Items["Hue"].Instance.AbsoluteSize.Y, 0, 0.995)

                Items["HueDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(0, 0, SlideY, 0)})
                Colorpicker:Update(false, true)
            end

            local SlidingAlpha = false 
            local AlphaChanged

            function Colorpicker:SlideAlpha(Input)
                if not Input or not SlidingAlpha then
                    return
                end

                local ValueX = MathClamp((Input.Position.X - Items["Alpha"].Instance.AbsolutePosition.X) / Items["Alpha"].Instance.AbsoluteSize.X, 0, 1)

                Colorpicker.Alpha = ValueX

                local SlideX = MathClamp((Input.Position.X - Items["Alpha"].Instance.AbsolutePosition.X) / Items["Alpha"].Instance.AbsoluteSize.X, 0, 0.995)

                Items["AlphaDragger"]:Tween(TweenInfo.new(Library.Tween.Time, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2New(SlideX, 0, 0, 0)})
                Colorpicker:Update(true, true)
            end

            Items["Palette"]:Connect("InputBegan", function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
                    SlidingPalette = true 

                    Colorpicker:SlidePalette(Input)

                    if PaletteChanged then
                        return
                    end

                    PaletteChanged = Input.Changed:Connect(function()
                        if Input.UserInputState == Enum.UserInputState.End then
                            SlidingPalette = false

                            PaletteChanged:Disconnect()
                            PaletteChanged = nil
                        end
                    end)
                end
            end)

            Items["HueInline"]:Connect("InputBegan", function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
                    SlidingHue = true 

                    Colorpicker:SlideHue(Input)

                    if HueChanged then
                        return
                    end

                    HueChanged = Input.Changed:Connect(function()
                        if Input.UserInputState == Enum.UserInputState.End then
                            SlidingHue = false

                            HueChanged:Disconnect()
                            HueChanged = nil
                        end
                    end)
                end
            end)

            Items["Alpha"]:Connect("InputBegan", function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
                    SlidingAlpha = true 

                    Colorpicker:SlideAlpha(Input)

                    if AlphaChanged then
                        return
                    end

                    AlphaChanged = Input.Changed:Connect(function()
                        if Input.UserInputState == Enum.UserInputState.End then
                            SlidingAlpha = false

                            AlphaChanged:Disconnect()
                            AlphaChanged = nil
                        end
                    end)
                end
            end)

            Library:Connect(UserInputService.InputChanged, function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseMovement or Input.UserInputType == Enum.UserInputType.Touch then
                    if SlidingPalette then 
                        Colorpicker:SlidePalette(Input)
                    end

                    if SlidingHue then
                        Colorpicker:SlideHue(Input)
                    end

                    if SlidingAlpha then
                        Colorpicker:SlideAlpha(Input)
                    end
                end
            end)

            Library:Connect(UserInputService.InputBegan, function(Input)
                if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
                    if not Colorpicker.IsOpen then
                        return
                    end

                    if Library:IsMouseOverFrame(Items["ColorpickerWindow"]) then
                        return
                    end

                    if KeyframeOneLabel and KeyframeTwoLabel then
                        if Library:IsMouseOverFrame(KeyframeOneColorpickerItems["ColorpickerWindow"]) then
                            return
                        end

                        if Library:IsMouseOverFrame(KeyframeTwoColorpickerItems["ColorpickerWindow"]) then
                            return
                        end
                    end

                    Colorpicker:SetOpen(false)
                end
            end)

            if Data.Default then
                Colorpicker:Set(Data.Default, Data.Alpha)
                OldColor = Colorpicker.Color
            end

            Library.Colorpickers[Colorpicker] = Colorpicker

            Library.SetFlags[Colorpicker.Flag] = function(Value, Alpha)
                Colorpicker:Set(Value, Alpha)
            end

            return Colorpicker, Items
        end

        Components.Keybind = function(self, Data)
            local Keybind = { 
                IsOpen = false,

                Key = "",
                Value = "",

                Flag = Data.Flag,

                Mode = "",

                Toggled = false,

                Picking = false
            }

            local KeylistItem

            if Library.KeyList then
                KeylistItem = Library.KeyList:Add("", "", "")
            end

            local Items = { } do
                Items["KeyButton"] = Instances:Create("TextButton", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    TextTransparency = 0.4000000059604645,
                    Text = "MB2",
                    AutoButtonColor = false,
                    Size = UDim2New(0, 0, 1, 0),
                    BackgroundTransparency = 1,
                    BorderSizePixel = 0,
                    BorderColor3 = FromRGB(0, 0, 0),
                    AutomaticSize = Enum.AutomaticSize.X,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["KeyButton"]:AddToTheme({TextColor3 = "Text"})
                
                Items["KeyButton"]:TextBorder()
                
                Items["KeybindWindow"] = Instances:Create("Frame", {
                    Parent = Library.UnusedHolder.Instance,
                    Name = "\0",
                    Position = UDim2New(0.007692307699471712, 0, 0.35323384404182434, 0),
                    BorderColor3 = FromRGB(12, 12, 12),
                    Size = UDim2New(0, 70, 0, 90),
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(14, 17, 15)
                })  Items["KeybindWindow"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

                Items["Toggle"] = Instances:Create("TextButton", {
                    Parent = Items["KeybindWindow"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "Toggle",
                    AutoButtonColor = false,
                    Position = UDim2New(0, 8, 0, 8),
                    Size = UDim2New(1, -16, 0, 20),
                    BorderSizePixel = 0,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(202, 243, 255)
                })  Items["Toggle"]:AddToTheme({BackgroundColor3 = "Accent", TextColor3 = "Text"})

                Items["Toggle"]:TextBorder()

                Instances:Create("UIStroke", {
                    Parent = Items["KeybindWindow"].Instance,
                    Name = "\0",
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Outline"})

                Items["Hold"] = Instances:Create("TextButton", {
                    Parent = Items["KeybindWindow"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "Hold",
                    AutoButtonColor = false,
                    BackgroundTransparency = 1,
                    Position = UDim2New(0, 8, 0, 38),
                    Size = UDim2New(1, -16, 0, 20),
                    BorderSizePixel = 0,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(202, 243, 255)
                })  Items["Hold"]:AddToTheme({BackgroundColor3 = "Accent", TextColor3 = "Text"})

                Items["Hold"]:TextBorder()

                Items["Always"] = Instances:Create("TextButton", {
                    Parent = Items["KeybindWindow"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "Always",
                    AutoButtonColor = false,
                    BackgroundTransparency = 1,
                    Position = UDim2New(0, 8, 0, 68),
                    Size = UDim2New(1, -16, 0, 20),
                    BorderSizePixel = 0,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(202, 243, 255)
                })  Items["Always"]:AddToTheme({BackgroundColor3 = "Accent", TextColor3 = "Text"})  

                Items["Always"]:TextBorder()
            end

            local Modes = {
                ["Toggle"] = Items["Toggle"],
                ["Hold"] = Items["Hold"],
                ["Always"] = Items["Always"]
            }

            local Update = function()
                if KeylistItem then
                    KeylistItem:SetText(Keybind.Value, Data.Name, Keybind.Mode)
                    KeylistItem:SetStatus(Keybind.Toggled)
                end
            end

            function Keybind:Get()
                return Keybind.Key, Keybind.Mode, Keybind.Toggled
            end

            function Keybind:Set(Key)
                if StringFind(tostring(Key), "Enum") then 
                    Keybind.Key = tostring(Key)

                    Key = Key.Name == "Backspace" and "None" or Key.Name

                    local KeyString = Keys[Keybind.Key] or StringGSub(Key, "Enum.", "") or "None"
                    local TextToDisplay = StringGSub(StringGSub(KeyString, "KeyCode.", ""), "UserInputType.", "") or "None"

                    Keybind.Value = TextToDisplay
                    Items["KeyButton"].Instance.Text = TextToDisplay

                    Library.Flags[Keybind.Flag] = {
                        Mode = Keybind.Mode,
                        Key = Keybind.Key,
                        Toggled = Keybind.Toggled
                    }

                    if Data.Callback then 
                        Library:SafeCall(Data.Callback, Keybind.Toggled)
                    end

                    Update()
                elseif type(Key) == "table" then
                    local RealKey = Key.Key == "Backspace" and "None" or Key.Key
                    Keybind.Key = tostring(Key.Key)

                    if Key.Mode then
                        Keybind.Mode = Key.Mode
                        Keybind:SetMode(Key.Mode)
                    else
                        Keybind.Mode = "Toggle"
                        Keybind:SetMode("Toggle")
                    end

                    local KeyString = Keys[Keybind.Key] or StringGSub(tostring(RealKey), "Enum.", "") or RealKey
                    local TextToDisplay = KeyString and StringGSub(StringGSub(KeyString, "KeyCode.", ""), "UserInputType.", "") or "None"

                    TextToDisplay = StringGSub(StringGSub(KeyString, "KeyCode.", ""), "UserInputType.", "")

                    Keybind.Value = TextToDisplay
                    Items["KeyButton"].Instance.Text = TextToDisplay

                    if Data.Callback then 
                        Library:SafeCall(Data.Callback, Keybind.Toggled)
                    end

                    Update()
                elseif TableFind({"Toggle", "Hold", "Always"}, Key) then
                    Keybind.Mode = Key
                    Keybind:SetMode(Keybind.Mode)

                    if Data.Callback then 
                        Library:SafeCall(Data.Callback, Keybind.Toggled)
                    end

                    Update()
                end

                Keybind.Picking = false
            end

            local Debounce = false
            local RenderStepped  

            function Keybind:SetOpen(Bool)
                if Debounce then 
                    return
                end

                Keybind.IsOpen = Bool

                Debounce = true 

                if Keybind.IsOpen then 
                    Items["KeybindWindow"].Instance.Visible = true
                    Items["KeybindWindow"].Instance.Parent = Library.Holder.Instance
                    
                    RenderStepped = RunService.RenderStepped:Connect(function()
                        Items["KeybindWindow"].Instance.Position = UDim2New(0, Items["KeyButton"].Instance.AbsolutePosition.X, 0, Items["KeyButton"].Instance.AbsolutePosition.Y + Items["KeyButton"].Instance.AbsoluteSize.Y + 5)
                    end)

                    if not Debounce then 
                        for Index, Value in Library.OpenFrames do 
                            if Value ~= Keybind then 
                                Value:SetOpen(false)
                            end
                        end

                        Library.OpenFrames[Keybind] = Keybind 
                    end
                else
                    if not Debounce then 
                        if Library.OpenFrames[Keybind] then 
                            Library.OpenFrames[Keybind] = nil
                        end
                    end

                    if RenderStepped then 
                        RenderStepped:Disconnect()
                        RenderStepped = nil
                    end
                end

                local Descendants = Items["KeybindWindow"].Instance:GetDescendants()
                TableInsert(Descendants, Items["KeybindWindow"].Instance)

                local NewTween

                for Index, Value in Descendants do 
                    local TransparencyProperty = Tween:GetProperty(Value)

                    if not TransparencyProperty then
                        continue 
                    end

                    if type(TransparencyProperty) == "table" then 
                        for _, Property in TransparencyProperty do 
                            NewTween = Tween:FadeItem(Value, Property, Bool, Library.FadeSpeed)
                        end
                    else
                        NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Library.FadeSpeed)
                    end
                end
                
                NewTween.Tween.Completed:Connect(function()
                    Debounce = false 
                    Items["KeybindWindow"].Instance.Visible = Keybind.IsOpen
                    task.wait(0.2)
                    Items["KeybindWindow"].Instance.Parent = not Keybind.IsOpen and Library.UnusedHolder.Instance or Library.Holder.Instance
                end)
            end

            function Keybind:SetMode(Mode)
                for Index, Value in Modes do 
                    if Index == Mode then
                        Value:Tween(nil, {BackgroundTransparency = 0})
                    else
                        Value:Tween(nil, {BackgroundTransparency = 1})
                    end
                end

                Library.Flags[Keybind.Flag] = {
                    Mode = Keybind.Mode,
                    Key = Keybind.Key,
                    Toggled = Keybind.Toggled
                }

                if Data.Callback then 
                    Library:SafeCall(Data.Callback, Keybind.Toggled)
                end

                Update()
            end

            function Keybind:Press(Bool)
    if Keybind.Mode == "Toggle" then 
        Keybind.Toggled = not Keybind.Toggled
    elseif Keybind.Mode == "Hold" then 
        Keybind.Toggled = Bool
    elseif Keybind.Mode == "Always" then 
        Keybind.Toggled = true
    end

    Library.Flags[Keybind.Flag] = {
        Mode = Keybind.Mode,
        Key = Keybind.Key,
        Toggled = Keybind.Toggled
    }

    if Data.Callback then 
        Library:SafeCall(Data.Callback, Keybind.Toggled)
    end

    Update()
end

do
    local keyButton = Items["KeyButton"].Instance
    local keybindDebounce = false

    local function handleKeybindPick()
        if keybindDebounce then return end
        keybindDebounce = true
        
        Keybind.Picking = true 

        Items["KeyButton"].Instance.Text = "."
        Library:Thread(function()
            local Count = 1

            while true do 
                if not Keybind.Picking then 
                    break
                end

                if Count == 4 then
                    Count = 1
                end

                Items["KeyButton"].Instance.Text = Count == 1 and "." or Count == 2 and ".." or Count == 3 and "..."
                Count += 1
                task.wait(0.5)
            end
        end)

        local InputBegan
        InputBegan = UserInputService.InputBegan:Connect(function(Input)
            if Input.UserInputType == Enum.UserInputType.Keyboard then 
                Keybind:Set(Input.KeyCode)
            else
                Keybind:Set(Input.UserInputType)
            end

            InputBegan:Disconnect()
            InputBegan = nil
        end)
        
        task.delay(0.1, function() keybindDebounce = false end)
    end

    pcall(function()
        if keyButton.MouseButton1Click then
            keyButton.MouseButton1Click:Connect(handleKeybindPick)
        end
    end)

    pcall(function()
        if keyButton.MouseButton1Down then
            keyButton.MouseButton1Down:Connect(handleKeybindPick)
        end
    end)

    pcall(function()
        if keyButton.TouchTap then
            keyButton.TouchTap:Connect(handleKeybindPick)
        end
    end)

    pcall(function()
        if keyButton.Activated then
            keyButton.Activated:Connect(handleKeybindPick)
        end
    end)
end

do
    local keyButton = Items["KeyButton"].Instance
    local rightClickDebounce = false

    local function handleRightClick()
        if rightClickDebounce then return end
        rightClickDebounce = true
        
        Keybind:SetOpen(not Keybind.IsOpen)
        
        task.delay(0.1, function() rightClickDebounce = false end)
    end

    pcall(function()
        if keyButton.MouseButton2Down then
            keyButton.MouseButton2Down:Connect(handleRightClick)
        end
    end)

    pcall(function()
        if keyButton.RightMouseButtonClick then
            keyButton.RightMouseButtonClick:Connect(handleRightClick)
        end
    end)
end

Library:Connect(UserInputService.InputBegan, function(Input)
    if Keybind.Value == "None" then
        return
    end

    if tostring(Input.KeyCode) == Keybind.Key then
        if Keybind.Mode == "Toggle" then 
            Keybind:Press()
        elseif Keybind.Mode == "Hold" then 
            Keybind:Press(true)
        elseif Keybind.Mode == "Always" then 
            Keybind:Press(true)
        end
    elseif tostring(Input.UserInputType) == Keybind.Key then
        if Keybind.Mode == "Toggle" then 
            Keybind:Press()
        elseif Keybind.Mode == "Hold" then 
            Keybind:Press(true)
        elseif Keybind.Mode == "Always" then 
            Keybind:Press(true)
        end
    end

    if Input.UserInputType == Enum.UserInputType.MouseButton1 or Input.UserInputType == Enum.UserInputType.Touch then
        if not Keybind.IsOpen then
            return
        end

        if Library:IsMouseOverFrame(Items["KeybindWindow"]) then
            return
        end

        Keybind:SetOpen(false)
    end
end)

Library:Connect(UserInputService.InputEnded, function(Input)
    if Keybind.Value == "None" then
        return
    end

    if tostring(Input.KeyCode) == Keybind.Key then
        if Keybind.Mode == "Hold" then 
            Keybind:Press(false)
        elseif Keybind.Mode == "Always" then 
            Keybind:Press(true)
        end
    elseif tostring(Input.UserInputType) == Keybind.Key then
        if Keybind.Mode == "Hold" then 
            Keybind:Press(false)
        elseif Keybind.Mode == "Always" then 
            Keybind:Press(true)
        end
    end
end)

-- Mode selection buttons
do
    local function createModeHandler(modeItem, modeType)
        local modeButton = Items[modeItem].Instance
        local modeDebounce = false

        local function handleModeSelect()
            if modeDebounce then return end
            modeDebounce = true
            
            Keybind.Mode = modeType
            Keybind:SetMode(modeType)
            
            task.delay(0.1, function() modeDebounce = false end)
        end

        pcall(function()
            if modeButton.MouseButton1Down then
                modeButton.MouseButton1Down:Connect(handleModeSelect)
            end
        end)

        pcall(function()
            if modeButton.MouseButton1Click then
                modeButton.MouseButton1Click:Connect(handleModeSelect)
            end
        end)

        pcall(function()
            if modeButton.TouchTap then
                modeButton.TouchTap:Connect(handleModeSelect)
            end
        end)

        pcall(function()
            if modeButton.Activated then
                modeButton.Activated:Connect(handleModeSelect)
            end
        end)
    end

    createModeHandler("Toggle", "Toggle")
    createModeHandler("Hold", "Hold")
    createModeHandler("Always", "Always")
end

if Data.Default then
    Keybind:Set({Key = Data.Default, Mode = Data.Mode or "Toggle"})
end

Library.SetFlags[Keybind.Flag] = function(Value)
    Keybind:Set(Value)
end

return Keybind, Items 
end

        Components.Textbox = function(self, Data)
            local Textbox = {
                Flag = Data.Flag,
                Value = ""
            }

            local Items = { } do
                Items["Textbox"] = Instances:Create("Frame", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 0, 0, 40),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Items["Text"] = Instances:Create("TextLabel", {
                    Parent = Items["Textbox"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = Data.Name,
                    BackgroundTransparency = 1,
                    Size = UDim2New(0, 0, 0, 15),
                    BorderSizePixel = 0,
                    AutomaticSize = Enum.AutomaticSize.X,
                    TextSize = 9,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Text"]:AddToTheme({TextColor3 = "Text"})

                Items["Text"]:TextBorder()

                Items["Background"] = Instances:Create("Frame", {
                    Parent = Items["Textbox"].Instance,
                    Name = "\0",
                    AnchorPoint = Vector2New(0, 1),
                    Position = UDim2New(0, 0, 1, 0),
                    BorderColor3 = FromRGB(12, 12, 12),
                    Size = UDim2New(1, 0, 0, 20),
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(30, 36, 31)
                })  Items["Background"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

                Instances:Create("UIGradient", {
                    Parent = Items["Background"].Instance,
                    Name = "\0",
                    Rotation = -165,
                    Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
                }):AddToTheme({Color = function()
                    return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
                end})

                Instances:Create("UIStroke", {
                    Parent = Items["Background"].Instance,
                    Name = "\0",
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Outline"})

                Items["Input"] = Instances:Create("TextBox", {
                    Parent = Items["Background"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    PlaceholderColor3 = FromRGB(185, 185, 185),
                    PlaceholderText = Data.Placeholder,
                    TextSize = 9,
                    Size = UDim2New(1, 0, 1, 0),
                    ClipsDescendants = true,
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "",
                    TextColor3 = FromRGB(235, 235, 235),
                    BackgroundTransparency = 1,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    Position = UDim2New(0, 0, 0, 0),
                    ClearTextOnFocus = false,
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Input"]:AddToTheme({TextColor3 = "Text", PlaceholderColor3 = "Placeholder Text"})

                Items["Input"]:TextBorder()

                Instances:Create("UIPadding", {
                    Parent = Items["Input"].Instance,
                    Name = "\0",
                    PaddingLeft = UDimNew(0, 8),
                    PaddingRight = UDimNew(0, 8)
                })
            end

            function Textbox:Get()
                return Textbox.Value
            end

            function Textbox:SetVisibility(Bool)
                Items["Textbox"].Instance.Visible = Bool
            end

            function Textbox:Set(Value)
                if Data.Numeric then
                    if (not tonumber(Value)) and StringLen(tostring(Value)) > 0 then
                        Value = Textbox.Value
                    end
                end

                Textbox.Value = Value
                Items["Input"].Instance.Text = Value
                Library.Flags[Textbox.Flag] = Value

                if Data.Callback then
                    Library:SafeCall(Data.Callback, Value)
                end
            end
            
            if Data.Finished then 
                Items["Input"]:Connect("FocusLost", function(PressedEnterQuestionMark)
                    if PressedEnterQuestionMark then
                        Textbox:Set(Items["Input"].Instance.Text)
                    end
                end)
            else
                Items["Input"].Instance:GetPropertyChangedSignal("Text"):Connect(function()
                    Textbox:Set(Items["Input"].Instance.Text)
                end)
            end

            if Data.Default then
                Textbox:Set(Data.Default)
            end

            Library.SetFlags[Textbox.Flag] = function(Value)
                Textbox:Set(Value)
            end

            return Textbox, Items
        end

        Components.Searchbox = function(self, Data) -- just pasted the entire dropdown fucntion with different instances, i cant be asked to make a whole new functionality
            local Dropdown = {
                Flag = Data.Flag, 
                Value = { },
                Options = { },
                IsOpen = false
            }

            local Items = { } do
                Items["Listbox"] = Instances:Create("Frame", {
                    Parent = Data.Parent.Instance,
                    Name = "\0",
                    BackgroundTransparency = 1,
                    BorderColor3 = FromRGB(0, 0, 0),
                    Size = UDim2New(1, 0, 0, 185),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })

                Items["Search"] = Instances:Create("Frame", {
                    Parent = Items["Listbox"].Instance,
                    Name = "\0",
                    BackgroundTransparency = 0.4000000059604645,
                    Size = UDim2New(0, 0, 0, 20),
                    BorderColor3 = FromRGB(12, 12, 12),
                    BorderSizePixel = 2,
                    AutomaticSize = Enum.AutomaticSize.X,
                    BackgroundColor3 = FromRGB(14, 17, 15)
                })  Items["Search"]:AddToTheme({BorderColor3 = "Border", BackgroundColor3 = "Background"})

                Instances:Create("UIStroke", {
                    Parent = Items["Search"].Instance,
                    Name = "\0",
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border,
                    Transparency = 0.4000000059604645,
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter
                }):AddToTheme({Color = "Outline"})

                Items["Icon"] = Instances:Create("ImageLabel", {
                    Parent = Items["Search"].Instance,
                    Name = "\0",
                    ScaleType = Enum.ScaleType.Fit,
                    BorderColor3 = FromRGB(0, 0, 0),
                    AnchorPoint = Vector2New(0, 0.5),
                    Image = "rbxassetid://71197946135150",
                    BackgroundTransparency = 1,
                    Position = UDim2New(0, 0, 0.5, 0),
                    Size = UDim2New(0, 16, 0, 16),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Icon"]:AddToTheme({ImageColor3 = "Text"})

                Items["Input"] = Instances:Create("TextBox", {
                    Parent = Items["Search"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = "",
                    Size = UDim2New(0, 0, 1, 0),
                    Position = UDim2New(0, 22, 0, 0),
                    BorderSizePixel = 0,
                    BackgroundTransparency = 1,
                    PlaceholderColor3 = FromRGB(185, 185, 185),
                    AutomaticSize = Enum.AutomaticSize.X,
                    PlaceholderText = "search..",
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["Input"]:AddToTheme({TextColor3 = "Text", PlaceholderColor3 = "Placeholder Text"})

                Items["Input"]:TextBorder()

                Instances:Create("UIPadding", {
                    Parent = Items["Search"].Instance,
                    Name = "\0",
                    PaddingRight = UDimNew(0, 5),
                    PaddingLeft = UDimNew(0, 3)
                })

                Items["RealListbox"] = Instances:Create("Frame", {
                    Parent = Items["Listbox"].Instance,
                    Name = "\0",
                    ClipsDescendants = true,
                    BorderColor3 = FromRGB(12, 12, 12),
                    Size = UDim2New(1, 0, 1, -28),
                    SelectionGroup = true,
                    Position = UDim2New(0, 0, 0, 28),
                    Selectable = true,
                    Active = true,
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(30, 36, 31)
                })  Items["RealListbox"]:AddToTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})

                Instances:Create("UIStroke", {
                    Parent = Items["RealListbox"].Instance,
                    Name = "\0",
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Outline"})

                Instances:Create("UIGradient", {
                    Parent = Items["RealListbox"].Instance,
                    Name = "\0",
                    Rotation = -165,
                    Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(208, 208, 208))}
                }):AddToTheme({Color = function()
                    return RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, Library.Theme.Gradient)}
                end})

                Items["List"] = Instances:Create("ScrollingFrame", {
                    Parent = Items["RealListbox"].Instance,
                    Name = "\0",
                    Active = true,
                    AutomaticCanvasSize = Enum.AutomaticSize.Y,
                    BorderSizePixel = 0,
                    CanvasSize = UDim2New(0, 0, 0, 0),
                    ScrollBarImageColor3 = FromRGB(202, 243, 255),
                    MidImage = "rbxassetid://136419474381965",
                    BorderColor3 = FromRGB(0, 0, 0),
                    ScrollBarThickness = 2,
                    Size = UDim2New(1, -12, 1, -10),
                    Position = UDim2New(0, 3, 0, 5),
                    TopImage = "rbxassetid://136419474381965",
                    CanvasPosition = Vector2New(0, 57),
                    BottomImage = "rbxassetid://136419474381965",
                    BackgroundTransparency = 1,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  Items["List"]:AddToTheme({ScrollBarImageColor3 = "Accent"})

                Instances:Create("UIListLayout", {
                    Parent = Items["List"].Instance,
                    Name = "\0",
                    Padding = UDimNew(0, 2),
                    SortOrder = Enum.SortOrder.LayoutOrder
                })

                Instances:Create("UIPadding", {
                    Parent = Items["List"].Instance,
                    Name = "\0",
                    PaddingBottom = UDimNew(0, 8),
                    PaddingLeft = UDimNew(0, 5),
                })
            end

            function Dropdown:Get()
                return Dropdown.Value
            end

            function Dropdown:SetVisibility(Bool)
                Items["Listbox"].Instance.Visible = Bool
            end

            function Dropdown:Set(Option)
                if Data.Multi then 
                    if type(Option) ~= "table" then 
                        return
                    end

                    Dropdown.Value = Option
                    Library.Flags[Dropdown.Flag] = Option

                    for Index, Value in Option do
                        local OptionData = Dropdown.Options[Value]
                        
                        if not OptionData then
                            continue
                        end

                        OptionData.Selected = true 
                        OptionData:Toggle("Active")
                    end
                else
                    if not Dropdown.Options[Option] then
                        return
                    end

                    local OptionData = Dropdown.Options[Option]

                    Dropdown.Value = Option
                    Library.Flags[Dropdown.Flag] = Option

                    for Index, Value in Dropdown.Options do
                        if Value ~= OptionData then
                            Value.Selected = false 
                            Value:Toggle("Inactive")
                        else
                            Value.Selected = true 
                            Value:Toggle("Active")
                        end
                    end
                end

                if Data.Callback then   
                    Library:SafeCall(Data.Callback, Dropdown.Value)
                end
            end

            function Dropdown:Add(Option)
                local OptionButton = Instances:Create("TextButton", {
                    Parent = Items["List"].Instance,
                    Name = "\0",
                    FontFace = Library.Font,
                    TextColor3 = FromRGB(235, 235, 235),
                    BorderColor3 = FromRGB(0, 0, 0),
                    Text = Option,
                    AutoButtonColor = false,
                    BorderSizePixel = 0,
                    BackgroundTransparency = 1,
                    TextXAlignment = Enum.TextXAlignment.Left,
                    Size = UDim2New(1, 0, 0, 20),
                    ZIndex = 1,
                    TextSize = 11,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  OptionButton:AddToTheme({TextColor3 = "Text"})

                OptionButton:TextBorder()

                local OptionData = {
                    Button = OptionButton,
                    Name = Option,
                    Selected = false
                }

                function OptionData:Toggle(Status)
                    if Status == "Active" then 
                        OptionData.Button:ChangeItemTheme({TextColor3 = "Accent"})
                        OptionData.Button:Tween(nil, {TextColor3 = Library.Theme.Accent})
                    else
                        OptionData.Button:ChangeItemTheme({TextColor3 = "Text"}) 
                        OptionData.Button:Tween(nil, {TextColor3 = Library.Theme.Text})
                    end
                end

function OptionData:Set()
    OptionData.Selected = not OptionData.Selected

    if Data.Multi then 
        local Index = TableFind(Dropdown.Value, OptionData.Name)

        if Index then 
            TableRemove(Dropdown.Value, Index)
        else
            TableInsert(Dropdown.Value, OptionData.Name)
        end

        OptionData:Toggle(Index and "Inactive" or "Active")

        Library.Flags[Dropdown.Flag] = Dropdown.Value
    else
        if OptionData.Selected then 
            Dropdown.Value = OptionData.Name
            Library.Flags[Dropdown.Flag] = OptionData.Name

            OptionData.Selected = true
            OptionData:Toggle("Active")

            for Index, Value in Dropdown.Options do 
                if Value ~= OptionData then
                    Value.Selected = false 
                    Value:Toggle("Inactive")
                end
            end
        else
            Dropdown.Value = nil
            Library.Flags[Dropdown.Flag] = nil

            OptionData.Selected = false
            OptionData:Toggle("Inactive")
        end
    end

    if Data.Callback then
        Library:SafeCall(Data.Callback, Dropdown.Value)
    end
end

do
    local button = OptionData.Button.Instance
    local debounce = false

    local function handleOption()
        if debounce then return end
        debounce = true
        OptionData:Set()
        task.delay(0.1, function() debounce = false end)
    end

    pcall(function()
        if button.MouseButton1Down then
            button.MouseButton1Down:Connect(handleOption)
        end
    end)

    pcall(function()
        if button.MouseButton1Click then
            button.MouseButton1Click:Connect(handleOption)
        end
    end)

    pcall(function()
        if button.TouchTap then
            button.TouchTap:Connect(handleOption)
        end
    end)

    pcall(function()
        if button.Activated then
            button.Activated:Connect(handleOption)
        end
    end)
end

Dropdown.Options[OptionData.Name] = OptionData
return OptionData
end

function Dropdown:Remove(Option)
    if not Dropdown.Options[Option] then
        return
    end

    Dropdown.Options[Option].Button:Clean()
    Dropdown.Options[Option] = nil
end

function Dropdown:Refresh(List)
    for Index, Value in Dropdown.Options do 
        Dropdown:Remove(Value.Name)
    end

    for Index, Value in List do 
        Dropdown:Add(Value)
    end
end

Items["Listbox"]:OnHover(function()
    Items["Listbox"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
    Items["Listbox"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
end)

Items["Listbox"]:OnHoverLeave(function()
    Items["Listbox"]:ChangeItemTheme({BackgroundColor3 = "Element", BorderColor3 = "Border"})
    Items["Listbox"]:Tween(nil, {BackgroundColor3 = Library.Theme["Element"]})
end)

local SearchStepped

Items["Input"]:Connect("Focused", function()
    SearchStepped = RunService.RenderStepped:Connect(function()
        for Index, Value in Dropdown.Options do
            if Items["Input"].Instance.Text ~= "" then
                if StringFind(StringLower(Value.Name), StringLower(Items["Input"].Instance.Text)) then
                    Value.Button.Instance.Visible = true
                else
                    Value.Button.Instance.Visible = false
                end
            else
                Value.Button.Instance.Visible = true
            end
        end
    end)
end)

Items["Input"]:Connect("FocusLost", function()
    if SearchStepped then
        SearchStepped:Disconnect()
        SearchStepped = nil
    end
end)

for Index, Value in Data.Items do 
    Dropdown:Add(Value)
end

if Data.Default then 
    Dropdown:Set(Data.Default)
end

Library.SetFlags[Dropdown.Flag] = function(Value)
    Dropdown:Set(Value)
end

return Dropdown, Items 
  end
end

    -- Library components
    Library.Watermark = function(self, Name)
        local Watermark = { }

        local Items = { } do 
            Items["Watermark"] = Instances:Create("Frame", {
                Parent = Library.Holder.Instance,
                Name = "\0",
                AnchorPoint = Vector2New(0.5, 1),
                Position = UDim2New(0.5, 0, 1, -12),
                BorderColor3 = FromRGB(12, 12, 12),
                BorderSizePixel = 2,
                AutomaticSize = Enum.AutomaticSize.XY,
                BackgroundColor3 = FromRGB(14, 17, 15)
            })  Items["Watermark"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

            Items["Watermark"]:MakeDraggable()

            Instances:Create("UIStroke", {
                Parent = Items["Watermark"].Instance,
                Name = "\0",
                Color = FromRGB(42, 49, 45),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Outline"})

            Instances:Create("UIPadding", {
                Parent = Items["Watermark"].Instance,
                Name = "\0",
                PaddingTop = UDimNew(0, 5),
                PaddingBottom = UDimNew(0, 7),
                PaddingRight = UDimNew(0, 5),
                PaddingLeft = UDimNew(0, 5)
            })

            Items["Text"] = Instances:Create("TextLabel", {
                Parent = Items["Watermark"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(235, 235, 235),
                BorderColor3 = FromRGB(0, 0, 0),
                Text = Name,
                Position = UDim2New(0, 0, 0, 2),
                BackgroundTransparency = 1,
                TextXAlignment = Enum.TextXAlignment.Left,
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.XY,
                TextSize = 12,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Text"]:AddToTheme({TextColor3 = "Text"})

            Items["Text"]:TextBorder()

            Items["Liner"] = Instances:Create("Frame", {
                Parent = Items["Watermark"].Instance,
                Name = "\0",
                Position = UDim2New(0, -5, 0, -5),
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, 10, 0, 1),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(202, 243, 255)
            })  Items["Liner"]:AddToTheme({BackgroundColor3 = "Accent"})
        end

        function Watermark:SetVisibility(Bool)
            Items["Watermark"].Instance.Visible = Bool
        end

        return Watermark
    end

    Library.KeybindList = function(self)
        local KeybindList = { }
        Library.KeyList = KeybindList

        local Items = { } do
            Items["KeybindList"] = Instances:Create("Frame", {
                Parent = Library.Holder.Instance,
                Name = "\0",
                AnchorPoint = Vector2New(0, 0.5),
                Position = UDim2New(0, 12, 0.5, 55),
                BorderColor3 = FromRGB(12, 12, 12),
                Size = UDim2New(0, 116, 0, 32),
                BorderSizePixel = 2,
                BackgroundColor3 = FromRGB(14, 17, 15)
            })  Items["KeybindList"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

            Items["KeybindList"]:MakeDraggable()

            Instances:Create("UIStroke", {
                Parent = Items["KeybindList"].Instance,
                Name = "\0",
                Color = FromRGB(42, 49, 45),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Outline"})

            Items["Title"] = Instances:Create("TextLabel", {
                Parent = Items["KeybindList"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(235, 235, 235),
                BorderColor3 = FromRGB(0, 0, 0),
                Text = "Keybinds",
                Size = UDim2New(0, 0, 0, 20),
                BackgroundTransparency = 1,
                Position = UDim2New(0, 0, 0, -4),
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.X,
                TextSize = 11,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Title"]:AddToTheme({TextColor3 = "Text"})

            Items["Title"]:TextBorder()

            Instances:Create("UIPadding", {
                Parent = Items["KeybindList"].Instance,
                Name = "\0",
                PaddingTop = UDimNew(0, 8),
                PaddingBottom = UDimNew(0, 8),
                PaddingRight = UDimNew(0, 8),
                PaddingLeft = UDimNew(0, 8)
            })

            Items["Liner"] = Instances:Create("Frame", {
                Parent = Items["KeybindList"].Instance,
                Name = "\0",
                Position = UDim2New(0, 0, 0, 15),
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, 0, 0, 1),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(202, 243, 255)
            })  Items["Liner"]:AddToTheme({BackgroundColor3 = "Accent"})

            Items["Content"] = Instances:Create("Frame", {
                Parent = Items["KeybindList"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(0, 0, 0),
                BackgroundTransparency = 1,
                Position = UDim2New(0, 0, 0, 32),
                Size = UDim2New(1, 0, 0, 0),
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.Y,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Instances:Create("UIListLayout", {
                Parent = Items["Content"].Instance,
                Name = "\0",
                SortOrder = Enum.SortOrder.LayoutOrder
            })
        end

        function KeybindList:Add(Key, Name, Mode)
            local NewKey = Instances:Create("TextLabel", {
                Parent = Items["Content"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(235, 235, 235),
                BorderColor3 = FromRGB(0, 0, 0),
                Text = "" ..Key .." - " ..Name .. " ("..Mode..")",
                BackgroundTransparency = 1,
                Size = UDim2New(0, 0, 0, 15),
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.X,
                TextTransparency = 1,
                Visible = false,
                TextSize = 9,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  NewKey:AddToTheme({TextColor3 = "Text"})

            NewKey:TextBorder()

            function NewKey:SetText(Key, Name, Mode)
                NewKey.Instance.Text = "" ..Key .." - " ..Name .. " ("..Mode..")"
            end

            function NewKey:SetStatus(Bool)
                if Bool then
                    NewKey.Instance.Visible = true
                    NewKey:Tween(nil, {TextTransparency = 0})
                else
                    NewKey:Tween(nil, {TextTransparency = 1}).Tween.Completed:Connect(function()
                        NewKey.Instance.Visible = false
                    end)
                end
            end

            return NewKey
        end

        function KeybindList:SetVisibility(Bool)
            Items["KeybindList"].Instance.Visible = Bool
        end

        return KeybindList
    end

    Library.Notification = function(self, Title, Description, Duration)
        local Items = { } do 
            Items["Notification"] = Instances:Create("Frame", {
                Parent = Library.NotifHolder.Instance,
                Name = "\0",
                Size = UDim2New(0, 0, 0, 25),
                BorderColor3 = FromRGB(12, 12, 12),
                BorderSizePixel = 2,
                AutomaticSize = Enum.AutomaticSize.XY,
                BackgroundColor3 = FromRGB(14, 17, 15)
            })  Items["Notification"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

            Items["UIStroke1"] = Instances:Create("UIStroke", {
                Parent = Items["Notification"].Instance,
                Name = "\0",
                Color = FromRGB(42, 49, 45),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            })  Items["UIStroke1"]:AddToTheme({Color = "Outline"})

            Instances:Create("UIPadding", {
                Parent = Items["Notification"].Instance,
                Name = "\0",
                PaddingTop = UDimNew(0, 5),
                PaddingBottom = UDimNew(0, 12),
                PaddingRight = UDimNew(0, 5),
                PaddingLeft = UDimNew(0, 5)
            })

            Items["Title"] = Instances:Create("TextLabel", {
                Parent = Items["Notification"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(235, 235, 235),
                BorderColor3 = FromRGB(0, 0, 0),
                Text = Title,
                BackgroundTransparency = 1,
                TextXAlignment = Enum.TextXAlignment.Left,
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.XY,
                TextSize = 10,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Title"]:AddToTheme({TextColor3 = "Text"})

           Items["UIStroke2"] =  Items["Title"]:TextBorder()

            Items["Description"] = Instances:Create("TextLabel", {
                Parent = Items["Notification"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(235, 235, 235),
                TextTransparency = 0.4000000059604645,
                Text = Description,
                Position = UDim2New(0, 0, 0, 15),
                BorderSizePixel = 0,
                BackgroundTransparency = 1,
                TextXAlignment = Enum.TextXAlignment.Left,
                BorderColor3 = FromRGB(0, 0, 0),
                AutomaticSize = Enum.AutomaticSize.XY,
                TextSize = 10,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Description"]:AddToTheme({TextColor3 = "Text"})

            Items["UIStroke3"] = Items["Description"]:TextBorder()

            Items["Liner"] = Instances:Create("Frame", {
                Parent = Items["Notification"].Instance,
                Name = "\0",
                Position = UDim2New(0, 0, 1, 8),
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, 0, 0, 1),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(202, 243, 255)
            })  Items["Liner"]:AddToTheme({BackgroundColor3 = "Accent"})
        end

        local Size = Items["Notification"].Instance.AbsoluteSize

        for Index, Value in Items do 
            if Value.Instance:IsA("Frame") then
                Value.Instance.BackgroundTransparency = 1
            elseif Value.Instance:IsA("TextLabel") then 
                Value.Instance.TextTransparency = 1
            elseif Value.Instance:IsA("UIStroke") then
                Value.Instance.Transparency = 1
            end
        end 

        Items["Notification"].Instance.AutomaticSize = Enum.AutomaticSize.Y

        Library:Thread(function()
            for Index, Value in Items do 
                if Value.Instance:IsA("Frame") then
                    Value:Tween(nil, {BackgroundTransparency = 0})
                elseif Value.Instance:IsA("TextLabel") and Index ~= "Description" then 
                    Value:Tween(nil, {TextTransparency = 0})
                elseif Value.Instance:IsA("TextLabel") and Index == "Description" then 
                    Value:Tween(nil, {TextTransparency = 0.4})
                elseif Value.Instance:IsA("UIStroke") then
                    Value:Tween(nil, {Transparency = 0})
                end
            end

            Items["Notification"]:Tween(nil, {Size = UDim2New(0, Size.X, 0, 0)})
            Items["Liner"]:Tween(TweenInfo.new(Duration, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Size = UDim2New(0, 0, 0, 1)})
            
            task.delay(Duration + 0.1, function()
                for Index, Value in Items do 
                    if Value.Instance:IsA("Frame") then
                        Value:Tween(nil, {BackgroundTransparency = 1})
                    elseif Value.Instance:IsA("TextLabel") then 
                        Value:Tween(nil, {TextTransparency = 1})
                    elseif Value.Instance:IsA("UIStroke") then
                        Value:Tween(nil, {Transparency = 1})
                    end
                end

                Items["Notification"]:Tween(nil, {Size = UDim2New(0, 0, 0, 0)})
                task.wait(0.5)
                Items["Notification"]:Clean()
            end)
        end)
    end

    Library.InventoryViewer = function(self)
        local Viewer = { }
        Viewer.Items = { } 

        local Items = { } do
            Items["InventoryViewer"] = Instances:Create("Frame", {
                Parent = Library.Holder.Instance,
                Name = "\0",
                Position = UDim2New(0.007766990456730127, 0, 0.11442785710096359, 0),
                BorderColor3 = FromRGB(12, 12, 12),
                Size = UDim2New(0, 325, 0, 277),
                BorderSizePixel = 2,
                BackgroundColor3 = FromRGB(14, 17, 15)
            })  Items["InventoryViewer"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

            Instances:Create("UIStroke", {
                Parent = Items["InventoryViewer"].Instance,
                Name = "\0",
                Color = FromRGB(42, 49, 45),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Outline"})

            Items["Title"] = Instances:Create("TextLabel", {
                Parent = Items["InventoryViewer"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(235, 235, 235),
                BorderColor3 = FromRGB(0, 0, 0),
                Text = "Inventory",
                Size = UDim2New(0, 0, 0, 15),
                BackgroundTransparency = 1,
                Position = UDim2New(0, 8, 0, 4),
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.X,
                TextSize = 9,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Title"]:AddToTheme({TextColor3 = "Text"})

            Items["Tools"] = Instances:Create("Frame", {
                Parent = Items["InventoryViewer"].Instance,
                Name = "\0",
                Position = UDim2New(0, 8, 0, 27),
                BorderColor3 = FromRGB(42, 49, 45),
                Size = UDim2New(1, -16, 1, -108),
                BorderSizePixel = 2,
                BackgroundColor3 = FromRGB(20, 24, 21)
            })  Items["Tools"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Outline"})

            Instances:Create("UIStroke", {
                Parent = Items["Tools"].Instance,
                Name = "\0",
                Color = FromRGB(12, 12, 12),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Border"})

            Items["Holder"] = Instances:Create("ScrollingFrame", {
                Parent = Items["Tools"].Instance,
                Name = "\0",
                Active = true,
                AutomaticCanvasSize = Enum.AutomaticSize.Y,
                BorderSizePixel = 0,
                CanvasSize = UDim2New(0, 0, 0, 0),
                ScrollBarImageColor3 = FromRGB(202, 243, 255),
                MidImage = "rbxassetid://123708228368098",
                BorderColor3 = FromRGB(0, 0, 0),
                ScrollBarThickness = 2,
                Size = UDim2New(1, -4, 1, -8),
                BackgroundTransparency = 1,
                Position = UDim2New(0, 0, 0, 4),
                BottomImage = "rbxassetid://123708228368098",
                TopImage = "rbxassetid://123708228368098",
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Holder"]:AddToTheme({ScrollBarImageColor3 = "Accent"})

            Instances:Create("UIGridLayout", {
                Parent = Items["Holder"].Instance,
                Name = "\0",
                SortOrder = Enum.SortOrder.LayoutOrder,
                CellSize = UDim2New(0, 65, 0, 65)
            })

            Instances:Create("UIPadding", {
                Parent = Items["Holder"].Instance,
                Name = "\0",
                PaddingTop = UDimNew(0, 4),
                PaddingLeft = UDimNew(0, 8)
            })

            Items["PlayerAvatar"] = Instances:Create("ImageLabel", {
                Parent = Items["InventoryViewer"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(42, 49, 45),
                AnchorPoint = Vector2New(0, 1),
                Image = "rbxasset://textures/ui/GuiImagePlaceholder.png",
                Position = UDim2New(0, 8, 1, -8),
                Size = UDim2New(0, 60, 0, 60),
                BorderSizePixel = 2,
                BackgroundColor3 = FromRGB(14, 17, 15)
            })  Items["PlayerAvatar"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Outline"})

            Instances:Create("UIStroke", {
                Parent = Items["PlayerAvatar"].Instance,
                Name = "\0",
                Color = FromRGB(12, 12, 12),
                LineJoinMode = Enum.LineJoinMode.Miter,
                ApplyStrokeMode = Enum.ApplyStrokeMode.Border
            }):AddToTheme({Color = "Outline"})
            
            Items["PlayerHealth"] = Instances:Create("TextLabel", {
                Parent = Items["InventoryViewer"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(235, 235, 235),
                BorderColor3 = FromRGB(0, 0, 0),
                Text = "Health: ",
                AnchorPoint = Vector2New(0, 1),
                Size = UDim2New(0, 0, 0, 15),
                BackgroundTransparency = 1,
                Position = UDim2New(0, 75, 1, -55),
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.X,
                TextSize = 9,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["PlayerHealth"]:AddToTheme({TextColor3 = "Text"})

            Items["PlayerDistance"] = Instances:Create("TextLabel", {
                Parent = Items["InventoryViewer"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(235, 235, 235),
                BorderColor3 = FromRGB(0, 0, 0),
                Text = "Distance:  studs",
                AnchorPoint = Vector2New(0, 1),
                Size = UDim2New(0, 0, 0, 15),
                BackgroundTransparency = 1,
                Position = UDim2New(0, 75, 1, -35),
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.X,
                TextSize = 9,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["PlayerDistance"]:AddToTheme({TextColor3 = "Text"})
        end

        function Viewer:SetPlayerHealth(Value)
            Items["PlayerHealth"].Instance.Text = tostring(Value)
        end

        function Viewer:SetPlayerDistance(Value)
            Items["PlayerDistance"].Instance.Text = "Distance: "..tostring(Value).." studs"
        end

        function Viewer:SetPlayer(Value)
            local PlayerAvatar, _ = Players:GetUserThumbnailAsync(Value.UserId)
            Items["PlayerAvatar"].Instance.Image = PlayerAvatar
            Items["Title"].Instance.Text = Value.Name .. "'s Inventory"
        end

        function Viewer:AddTool(Name, Image)
            local NewItem = { }

            local SubItems = { } do
                SubItems["Item"] = Instances:Create("Frame", {
                    Parent = Items["Holder"].Instance,
                    Name = "\0",
                    BorderColor3 = FromRGB(12, 12, 12),
                    Size = UDim2New(0, 100, 0, 100),
                    BorderSizePixel = 2,
                    BackgroundColor3 = FromRGB(20, 24, 21)
                })  SubItems["Item"]:AddToTheme({BackgroundColor3 = "Inline", BorderColor3 = "Border"})

                Instances:Create("UIStroke", {
                    Parent = SubItems["Item"].Instance,
                    Name = "\0",
                    Color = FromRGB(42, 49, 45),
                    LineJoinMode = Enum.LineJoinMode.Miter,
                    ApplyStrokeMode = Enum.ApplyStrokeMode.Border
                }):AddToTheme({Color = "Outline"})

                SubItems["Image"] = Instances:Create("ImageLabel", {
                    Parent = SubItems["Item"].Instance,
                    Name = "\0",
                    ImageColor3 = FromRGB(202, 243, 255),
                    ScaleType = Enum.ScaleType.Fit,
                    BorderColor3 = FromRGB(0, 0, 0),
                    AnchorPoint = Vector2New(0.5, 0.5),
                    Image = "rbxassetid://"..Image,
                    BackgroundTransparency = 1,
                    Position = UDim2New(0.5, 0, 0.5, 0),
                    Size = UDim2New(0, 45, 0, 45),
                    BorderSizePixel = 0,
                    BackgroundColor3 = FromRGB(255, 255, 255)
                })  SubItems["Image"]:AddToTheme({ImageColor3 = "Accent"})
            end

            function NewItem:Remove()
                Viewer.Items[Name] = nil
                SubItems["Item"]:Clean()
            end

            Viewer.Items[Name] = NewItem
            return NewItem
        end

        function Viewer:RemoveAllTools()
            for Index, Value in Viewer.Items do 
                Value:Remove()
            end
        end

        return Viewer
    end

    Library.Window = function(self, Data)
        Data = Data or { }

        local Window = { 
            Logo = Data.Logo or Data.logo or "",
            FadeTime = Data.FadeTime or Data.fadetime or 0.4,
            Size = Data.Size or Data.size or UDim2New(0, 751, 0, 539),

            Pages = { },
            Items = { },

            IsOpen = false,
        }

        local Items = Components:Window({
            Parent = Library.Holder,
            Draggable = true,
            Resizeable = true,
            AnchorPoint = Vector2New(0, 0),
            Position = UDim2New(0, Camera.ViewportSize.X / 3.3, 0, Camera.ViewportSize.Y / 3.3),
            Size = Window.Size
        }) do
            Items["Side"] = Instances:Create("Frame", {
                Parent = Items["Window"].Instance,
                Name = "\0",
                Position = UDim2New(0, 12, 0, 12),
                BorderColor3 = FromRGB(42, 49, 45),
                Size = UDim2New(0, 200, 1, -24),
                BorderSizePixel = 2,
                BackgroundColor3 = FromRGB(20, 24, 21)
            })  Items["Side"]:AddToTheme({BackgroundColor3 = "Inline", BorderColor3 = "Outline"})
            
            Items["Side"]:Border("Border")

            Items["Window"].Instance.Visible = false

            Items["Logo"] = Instances:Create("ImageLabel", {
                Parent = Items["Side"].Instance,
                Name = "\0",
                ImageColor3 = FromRGB(202, 243, 255),
                ScaleType = Enum.ScaleType.Fit,
                BorderColor3 = FromRGB(0, 0, 0),
                AnchorPoint = Vector2New(0.5, 0),
                Image = "rbxassetid://" .. Window.Logo,
                BackgroundTransparency = 1,
                Position = UDim2New(0.5, 0, 0, 12),
                Size = UDim2New(0, 75, 0, 75),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Logo"]:AddToTheme({ImageColor3 = "Accent"})

            Items["Search"] = Instances:Create("Frame", {
                Parent = Items["Side"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(12, 12, 12),
                AnchorPoint = Vector2New(0, 1),
                BackgroundTransparency = 0.4000000059604645,
                Position = UDim2New(0, 6, 1, -6),
                Size = UDim2New(0, 0, 0, 20),
                BorderSizePixel = 2,
                AutomaticSize = Enum.AutomaticSize.X,
                BackgroundColor3 = FromRGB(14, 17, 15)
            })  Items["Search"]:AddToTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})

            Items["SearchStroke"] = Items["Search"]:Border("Outline")

            Items["Icon"] = Instances:Create("ImageLabel", {
                Parent = Items["Search"].Instance,
                Name = "\0",
                ScaleType = Enum.ScaleType.Fit,
                BorderColor3 = FromRGB(0, 0, 0),
                AnchorPoint = Vector2New(0, 0.5),
                Image = "rbxassetid://71197946135150",
                BackgroundTransparency = 1,
                Position = UDim2New(0, 0, 0.5, 0),
                Size = UDim2New(0, 16, 0, 16),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Items["Input"] = Instances:Create("TextBox", {
                Parent = Items["Search"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                CursorPosition = -1,
                TextColor3 = FromRGB(235, 235, 235),
                BorderColor3 = FromRGB(0, 0, 0),
                Text = "",
                Size = UDim2New(0, 0, 1, 0),
                Position = UDim2New(0, 22, 0, 0),
                BorderSizePixel = 0,
                BackgroundTransparency = 1,
                PlaceholderColor3 = FromRGB(185, 185, 185),
                AutomaticSize = Enum.AutomaticSize.X,
                PlaceholderText = "..",
                TextSize = 9,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Input"]:AddToTheme({TextColor3 = "Text", PlaceholderColor3 = "Placeholder Text"})

            Items["Input"]:TextBorder()

            Instances:Create("UIPadding", {
                Parent = Items["Search"].Instance,
                Name = "\0",
                PaddingRight = UDimNew(0, 5),
                PaddingLeft = UDimNew(0, 3)
            })

            Items["Pages"] = Instances:Create("Frame", {
                Parent = Items["Side"].Instance,
                Name = "\0",
                BackgroundTransparency = 1,
                Position = UDim2New(0, 0, 0, 100),
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, 0, 1, -135),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Instances:Create("UIPadding", {
                Parent = Items["Pages"].Instance,
                Name = "\0",
                PaddingRight = UDimNew(0, 8),
                PaddingLeft = UDimNew(0, 8)
            })

            Instances:Create("UIListLayout", {
                Parent = Items["Pages"].Instance,
                Name = "\0",
                Padding = UDimNew(0, 8),
                SortOrder = Enum.SortOrder.LayoutOrder
            })

            local Content, _ = Players:GetUserThumbnailAsync(LocalPlayer.UserId, Enum.ThumbnailType.HeadShot, Enum.ThumbnailSize.Size420x420)

            Items["Avatar"] = Instances:Create("ImageLabel", {
                Parent = Items["Side"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(0, 0, 0),
                AnchorPoint = Vector2New(1, 1),
                Image = Content,
                BackgroundTransparency = 1,
                Position = UDim2New(1, -6, 1, -6),
                Size = UDim2New(0, 25, 0, 25),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Items["Avatar"]:Border("Outline").Instance.LineJoinMode = Enum.LineJoinMode.Round

            Instances:Create("UICorner", {
                Parent = Items["Avatar"].Instance,
                Name = "\0",
                CornerRadius = UDimNew(1, 0)
            })

            Items["Content"] = Instances:Create("Frame", {
                Parent = Items["Window"].Instance,
                Name = "\0",
                BackgroundTransparency = 1,
                Position = UDim2New(0, 226, 0, 12),
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, -238, 1, -24),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Items["MouseBackground"] = Instances:Create("Frame", {
                Parent = Library.Holder.Instance,
                Name = "\0",
                BackgroundTransparency = 1,
                Position = UDim2New(0, 0, 0, 0),
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(0, 16, 0, 16),
                BorderSizePixel = 0,
                ZIndex = 9999,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Items["MouseImage"] = Instances:Create("ImageLabel", {
                Parent = Items["MouseBackground"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(0, 0, 0),
                Image = "rbxassetid://76631660114196",
                BackgroundTransparency = 1,
                Size = UDim2New(1, 0, 1, 0),
                BorderSizePixel = 0,
                ZIndex = 9999,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["MouseImage"]:AddToTheme({ImageColor3 = "Accent"})

            Instances:Create("UIGradient", {
                Parent = Items["MouseImage"].Instance,
                Name = "\0",
                Rotation = 90,
                Color = RGBSequence{RGBSequenceKeypoint(0, FromRGB(255, 255, 255)), RGBSequenceKeypoint(1, FromRGB(99, 108, 117))}
            })

            UserInputService.MouseIconEnabled = false

            Window.Items = Items
        end

        local Debounce = false

        Items["Input"]:Connect("Focused", function()
            Items["Search"]:Tween(nil, {BackgroundTransparency = 0})
            Items["SearchStroke"]:Tween(nil, {Transparency = 0})
        end)

        Items["Input"]:Connect("FocusLost", function()
            Items["Search"]:Tween(nil, {BackgroundTransparency = 0.4})
            Items["SearchStroke"]:Tween(nil, {Transparency = 0.4})
        end)

        Items["Input"]:OnHover(function()
            Items["Search"]:ChangeItemTheme({BackgroundColor3 = "Hovered Element", BorderColor3 = "Border"})
            Items["Search"]:Tween(nil, {BackgroundColor3 = Library.Theme["Hovered Element"]})
        end)

        Items["Input"]:OnHoverLeave(function()
            Items["Search"]:ChangeItemTheme({BackgroundColor3 = "Background", BorderColor3 = "Border"})
            Items["Search"]:Tween(nil, {BackgroundColor3 = Library.Theme.Background})
        end)

        Library:Connect(RunService.RenderStepped, function()
            local MouseLocation = UserInputService:GetMouseLocation() 
            Items["MouseBackground"].Instance.Position = UDim2New(0, MouseLocation.X - 1, 0, MouseLocation.Y - 56)           
        end)

        local OldSizes = { }

        function Window:AddToOldSizes(Item, Size)
            if not OldSizes[Item] then
                OldSizes[Item] = Size
            end
        end

        function Window:GetOldSize(Item)
            if OldSizes[Item] then
                return OldSizes[Item]
            end
        end

        function Window:SetOpen(Bool)
            if Debounce then 
                return
            end

            Window.IsOpen = Bool

            Debounce = true 

            if Window.IsOpen then 
                Items["Window"].Instance.Visible = true 
            end

            local Descendants = Items["Window"].Instance:GetDescendants()
            TableInsert(Descendants, Items["Window"].Instance)

            local NewTween

            for Index, Value in Descendants do 
                local TransparencyProperty = Tween:GetProperty(Value)

                if not TransparencyProperty then
                    continue 
                end

                if type(TransparencyProperty) == "table" then 
                    for _, Property in TransparencyProperty do 
                        NewTween = Tween:FadeItem(Value, Property, Bool, Library.FadeSpeed)
                    end
                else
                    NewTween = Tween:FadeItem(Value, TransparencyProperty, Bool, Library.FadeSpeed)
                end
            end
            
            NewTween.Tween.Completed:Connect(function()
                Debounce = false 
                Items["Window"].Instance.Visible = Window.IsOpen
                if Window.IsOpen then
                    Items["MouseBackground"].Instance.Visible = true
                    UserInputService.MouseIconEnabled = false
                else
                    Items["MouseBackground"].Instance.Visible = false
                    UserInputService.MouseIconEnabled = true
                end
            end)
        end

        Library:Connect(UserInputService.InputBegan, function(Input)
            if tostring(Input.KeyCode) == Library.MenuKeybind or tostring(Input.UserInputType) == Library.MenuKeybind then
                Window:SetOpen(not Window.IsOpen)
            end
        end)

        local SearchStepped

        Items["Input"]:Connect("Focused", function()
            local PageSearchData = Library.SearchItems[Library.CurrentPage]

            if not PageSearchData then
                return 
            end

            SearchStepped = RunService.RenderStepped:Connect(function()
                for Index, Value in PageSearchData do 
                    local Name = Value.Name
                    local Element = Value.Element

                    if StringFind(StringLower(Name), StringLower(Items["Input"].Instance.Text)) then
                        if Items["Input"].Instance.Text ~= "" then 
                            Element.Instance.Visible  = true 
                            Element:Tween(TweenInfo.new(0.08, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = Window:GetOldSize(Element)})
                        else
                            Element.Instance.Visible  = true 
                            Element:Tween(TweenInfo.new(0.08, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = Window:GetOldSize(Element)})
                        end
                    else
                        Window:AddToOldSizes(Element, Element.Instance.Size)
                        Element:Tween(TweenInfo.new(0.08, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {Size = UDim2New(Window:GetOldSize(Element).X.Scale, Window:GetOldSize(Element).X.Offset, 0, 0)})
                        task.wait(0.1)
                        Element.Instance.Visible = false
                    end
                end
            end)
        end)

        Items["Input"]:Connect("FocusLost", function()
            if SearchStepped then 
                SearchStepped:Disconnect()
                SearchStepped = nil
            end
        end)

        Window:SetOpen(true)
        return setmetatable(Window, self)
    end

    Library.Page = function(self, Data)
        Data = Data or { }

        local Page = {
            Window = self,

            Name = Data.Name or Data.name or "Page",
            Columns = Data.Columns or Data.columns or 2,
            SubPages = Data.SubPages or Data.subpages or false,
        }

        Library.SearchItems[Page] = { }

        local NewPage, Items = Components:WindowPage({
            Name = Page.Name,
            ContentHolder = Page.Window.Items["Content"],
            Stack = Page.Window.Pages,
            Parent = Page.Window.Items["Pages"],
            Columns = Page.Columns,
            SubPages = Page.SubPages,
            FadeTime = Page.Window.FadeTime,
            Window = Page.Window
        })

        return setmetatable(NewPage, Library.Pages)
    end

    Library.Pages.SubPage = function(self, Data)
        Data = Data or { }

        local SubPage = {
            Window = self.Window,
            Page = self,

            Name = Data.Name or Data.name or "SubPage",
            Columns = Data.Columns or Data.columns or 2,
        }

        Library.SearchItems[SubPage] = { }

        local NewSubPage, Items = Components:WindowSubPage({
            Page = SubPage.Page,
            Name = SubPage.Name,
            Columns = SubPage.Columns,
            Window = SubPage.Page.Window
        })

        return setmetatable(NewSubPage, Library.Pages)
    end

    Library.Pages.Section = function(self, Data)
        Data = Data or { }

        local Section = {
            Window = self.Window,
            Page = self,

            Name = Data.Name or Data.name or "Section",
            Side = Data.Side or Data.side or 1,

            Items = { }
        }

        local Items = { } do
            Items["Section"] = Instances:Create("Frame", {
                Parent = Section.Page.ColumnsData[Section.Side].Instance,
                Name = "\0",
                Size = UDim2New(1, 0, 0, 25),
                BorderColor3 = FromRGB(42, 49, 45),
                BorderSizePixel = 2,
                AutomaticSize = Enum.AutomaticSize.Y,
                BackgroundColor3 = FromRGB(20, 24, 21)
            })  Items["Section"]:AddToTheme({BackgroundColor3 = "Inline", BorderColor3 = "Outline"})

            Items["Section"]:Border("Border")

            Items["Liner"] = Instances:Create("Frame", {
                Parent = Items["Section"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, 0, 0, 1),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(202, 243, 255)
            })  Items["Liner"]:AddToTheme({BackgroundColor3  = "Accent"})

            Items["Glow"] = Instances:Create("Frame", {
                Parent = Items["Section"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, 0, 0, 15),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(202, 243, 255)
            })  Items["Glow"]:AddToTheme({BackgroundColor3  = "Accent"})

            Instances:Create("UIGradient", {
                Parent = Items["Glow"].Instance,
                Name = "\0",
                Rotation = 90,
                Transparency = NumSequence{NumSequenceKeypoint(0, 0), NumSequenceKeypoint(0.193, 0.8687499761581421), NumSequenceKeypoint(0.504, 0.96875), NumSequenceKeypoint(1, 1)}
            })

            Items["Text"] = Instances:Create("TextLabel", {
                Parent = Items["Section"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(235, 235, 235),
                BorderColor3 = FromRGB(0, 0, 0),
                Text = Section.Name,
                Size = UDim2New(0, 0, 0, 15),
                BackgroundTransparency = 1,
                Position = UDim2New(0, 6, 0, 5),
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.X,
                TextSize = 15,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Text"]:AddToTheme({TextColor3 = "Text"})

            Items["Text"]:TextBorder()

            Instances:Create("UIPadding", {
                Parent = Items["Section"].Instance,
                Name = "\0",
                PaddingBottom = UDimNew(0, 8)
            })

            Items["Content"] = Instances:Create("Frame", {
                Parent = Items["Section"].Instance,
                Name = "\0",
                BorderColor3 = FromRGB(0, 0, 0),
                BackgroundTransparency = 1,
                Position = UDim2New(0, 10, 0, 26),
                Size = UDim2New(1, -20, 0, 0),
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.Y,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Instances:Create("UIListLayout", {
                Parent = Items["Content"].Instance,
                Name = "\0",
                Padding = UDimNew(0, 8),
                SortOrder = Enum.SortOrder.LayoutOrder
            })

            Section.Items = Items
        end

        return setmetatable(Section, Library.Sections)
    end
    
    Library.Sections.Toggle = function(self, Data)
        Data = Data or { }

        local Toggle = {
            Window = self.Window,
            Page = self.Page,
            Section = self,

            Name = Data.Name or Data.name or "Toggle",
            Flag = Data.Flag or Data.flag or Library:NextFlag(),
            Default = Data.Default or Data.default or false,
            Callback = Data.Callback or Data.callback or function() end
        }

        local NewToggle, ToggleItems = Components:Toggle({
            Name = Toggle.Name,
            Parent = Toggle.Section.Items["Content"],
            Flag = Toggle.Flag,
            Default = Toggle.Default,
            Page = Toggle.Page,
            Callback = Toggle.Callback
        })

        function NewToggle:Colorpicker(Data)
            local Colorpicker = {
                Window = self.Window,
                Page = self.Page,
                Section = self,

                Flag = Data.Flag or Data.flag or Library:NextFlag(),
                Default = Data.Default or Data.default or Color3.fromRGB(255, 255, 255),
                Callback = Data.Callback or Data.callback or function() end,
                Alpha = Data.Alpha or Data.alpha or 0,
            }

            local NewColorpicker, ColorpickerItems = Components:Colorpicker({
                Name = Colorpicker.Name,
                Parent = ToggleItems["SubElements"],
                Pages = true,
                Page = Colorpicker.Page,
                Flag = Colorpicker.Flag,
                Default = Colorpicker.Default,
                Alpha = Colorpicker.Alpha,
                Callback = Colorpicker.Callback,
            })

            return NewColorpicker
        end

        function NewToggle:Keybind(Data)
            Data = Data or { }

            local Keybind = {
                Window = self.Window,
                Page = self.Page,
                Section = self.Section,

                Flag = Data.Flag or Data.flag or Library:NextFlag(),
                Default = Data.Default or Data.default or Enum.KeyCode.RightShift,
                Callback = Data.Callback or Data.callback or function() end,
                Mode = Data.Mode or Data.mode or "Toggle",
            }

            local NewKeybind, KeybindItems = Components:Keybind({
                Name = Toggle.Name,
                Parent = ToggleItems["SubElements"],
                Page = Keybind.Page,
                Flag = Keybind.Flag,
                Default = Keybind.Default,
                Mode = Keybind.Mode,
                Callback = Keybind.Callback
            })

            return NewKeybind
        end

        return NewToggle
    end

    Library.Sections.Button = function(self)
        local Button = {
            Window = self.Window,
            Page = self.Page,
            Section = self
        }

        local NewButton, ButtonItems = Components:Button({
            Parent = Button.Section.Items["Content"],
            Page = Button.Page
        })

        return NewButton
    end

    Library.Sections.Slider = function(self, Data)
        Data = Data or { }
        
        local Slider = {
            Window = self.Window,
            Page = self.Page,
            Section = self,

            Name = Data.Name or Data.name or "Slider",
            Flag = Data.Flag or Data.flag or Library:NextFlag(),
            Min = Data.Min or Data.min or 0,
            Decimals = Data.Decimals or Data.decimals or 1,
            Suffix = Data.Suffix or Data.suffix or "",
            Max = Data.Max or Data.max or 100,
            Default = Data.Default or Data.Default or 0,
            Callback = Data.Callback or Data.callback or function() end,
        }

        local NewSlider, SliderItems = Components:Slider({
            Name = Slider.Name,
            Parent = Slider.Section.Items["Content"],
            Flag = Slider.Flag,
            Min = Slider.Min,
            Page = Slider.Page,
            Decimals = Slider.Decimals,
            Suffix = Slider.Suffix,
            Max = Slider.Max,
            Default = Slider.Default,
            Callback = Slider.Callback,
        })

        local PageSearchData = Library.SearchItems[Slider.Page]

        if PageSearchData then
            local SearchData = {
                Element = SliderItems["Slider"],
                Name = Slider.Name,
            }

            TableInsert(PageSearchData, SearchData)
        end

        return NewSlider 
    end

    Library.Sections.Dropdown = function(self, Data)
        Data = Data or { }

        local Dropdown = {
            Window = self.Window,
            Page = self.Page,
            Section = self,

            Name = Data.Name or Data.name or "Dropdown",
            Flag = Data.Flag or Data.flag or Library:NextFlag(),
            Items = Data.Items or Data.items or { },
            Default = Data.Default or Data.default or nil,
            Multi = Data.Multi or Data.multi or false,
            Callback = Data.Callback or Data.callback or function() end            
        }

        local NewDropdown, DropdownItems = Components:Dropdown({
            Name = Dropdown.Name,
            Parent = Dropdown.Section.Items["Content"],
            Flag = Dropdown.Flag,
            Items = Dropdown.Items,
            Page = Dropdown.Page,
            Default = Dropdown.Default,
            Multi = Dropdown.Multi,
            Callback = Dropdown.Callback,
        })

        local PageSearchData = Library.SearchItems[Dropdown.Page]

        if PageSearchData then
            local SearchData = {
                Element = DropdownItems["Dropdown"],
                Name = Dropdown.Name,
            }

            TableInsert(PageSearchData, SearchData)
        end

        return NewDropdown 
    end

    Library.Sections.Label = function(self, Name)
        local Label = {
            Window = self.Window,
            Page = self.Page,
            Section = self,

            Name = Name or "Label"
        }

        local NewLabel, LabelItems = Components:Label({
            Name = Label.Name,
            Parent = Label.Section.Items["Content"],
            Page = Label.Page,
        })

        function NewLabel:Colorpicker(Data)
            Data = Data or { }

            local Colorpicker = {
                Window = self.Window,
                Page = self.Page,
                Section = self.Section,

                Flag = Data.Flag or Data.flag or Library:NextFlag(),
                Default = Data.Default or Data.default or Color3.fromRGB(255, 255, 255),
                Callback = Data.Callback or Data.callback or function() end,
                Alpha = Data.Alpha or Data.alpha or 0,
            }

            local NewColorpicker, ColorpickerItems = Components:Colorpicker({
                Name = Colorpicker.Name,
                Parent = LabelItems["SubElements"],
                Pages = true,
                Page = Colorpicker.Page,
                Flag = Colorpicker.Flag,
                Default = Colorpicker.Default,
                Alpha = Colorpicker.Alpha,
                Callback = Colorpicker.Callback,
            })

            return NewColorpicker
        end

        function NewLabel:Keybind(Data)
            Data = Data or { }

            local Keybind = {
                Window = self.Window,
                Page = self.Page,
                Section = self.Section,

                Flag = Data.Flag or Data.flag or Library:NextFlag(),
                Default = Data.Default or Data.default or Enum.KeyCode.RightShift,
                Callback = Data.Callback or Data.callback or function() end,
                Mode = Data.Mode or Data.mode or "Toggle",
            }

            local NewKeybind, KeybindItems = Components:Keybind({
                Name = Label.Name,
                Parent = LabelItems["SubElements"],
                Page = Keybind.Page,
                Flag = Keybind.Flag,
                Default = Keybind.Default,
                Mode = Keybind.Mode,
                Callback = Keybind.Callback
            })

            return NewKeybind
        end

        local PageSearchData = Library.SearchItems[Label.Page]

        if PageSearchData then
            local SearchData = {
                Element = LabelItems["Label"],
                Name = Label.Name,
            }

            TableInsert(PageSearchData, SearchData)
        end

        return NewLabel
    end

    Library.Sections.Textbox = function(self, Data)
        Data = Data or { }

        local Textbox = {
            Window = self.Window,
            Page = self.Page,
            Section = self,

            Name = Data.Name or Data.name or "Textbox",
            Flag = Data.Flag or Data.flag or Library:NextFlag(),
            Default = Data.Default or Data.default or "",
            Numeric = Data.Numeric or Data.numeric or false,
            Finished = Data.Finished or Data.finished or false,
            Placeholder = Data.Placeholder or Data.placeholder or "...",
            Callback = Data.Callback or Data.callback or function() end,
        }

        local NewTextbox, TextboxItems = Components:Textbox({
            Name = Textbox.Name,
            Placeholder = Textbox.Placeholder,
            Parent = Textbox.Section.Items["Content"],
            Flag = Textbox.Flag,
            Page = Textbox.Page,
            Default = Textbox.Default,
            Numeric = Textbox.Numeric,
            Finished = Textbox.Finished,
            Callback = Textbox.Callback,
        })

        local PageSearchData = Library.SearchItems[Textbox.Page]

        if PageSearchData then
            local SearchData = {
                Element = TextboxItems["Textbox"],
                Name = Textbox.Name,
            }

            TableInsert(PageSearchData, SearchData)
        end

        return NewTextbox
    end

    Library.Sections.Searchbox = function(self, Data)
        Data = Data or { }

        local Searchbox = {
            Window = self.Window,
            Page = self.Page,
            Section = self,

            Name = Data.Name or Data.name or "Searchbox",
            Flag = Data.Flag or Data.flag or Library:NextFlag(),
            Items = Data.Items or Data.items or { },
            Default = Data.Default or Data.default or nil,
            Multi = Data.Multi or Data.multi or false,
            Callback = Data.Callback or Data.callback or function() end            
        }

        local NewSearchbox, SearchboxItems = Components:Searchbox({
            Parent = Searchbox.Section.Items["Content"],
            Flag = Searchbox.Flag,
            Items = Searchbox.Items,
            Page = Searchbox.Page,
            Default = Searchbox.Default,
            Multi = Searchbox.Multi,
            Callback = Searchbox.Callback,
        })

        local PageSearchData = Library.SearchItems[Searchbox.Page]

        if PageSearchData then
            local SearchData = {
                Element = SearchboxItems["Listbox"],
                Name = Searchbox.Name,
            }

            TableInsert(PageSearchData, SearchData)
        end

        return NewSearchbox 
    end

    Library.BlankElement = function(self, Data)
        local BlankElement = {
            Name = Data.Name or Data.name or "Blank",
            Size = Data.Size or Data.size or 18
        }

        local Items = { } do
            Items["BlankElement"] = Instances:Create("Frame", {
                Parent = Library.Holder.Instance,
                Name = "\0",
                BackgroundTransparency = 1,
                BorderColor3 = FromRGB(0, 0, 0),
                Size = UDim2New(1, 0, 0, BlankElement.Size),
                BorderSizePixel = 0,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })

            Items["Text"] = Instances:Create("TextLabel", {
                Parent = Items["Label"].Instance,
                Name = "\0",
                FontFace = Library.Font,
                TextColor3 = FromRGB(235, 235, 235),
                BorderColor3 = FromRGB(0, 0, 0),
                Text = BlankElement.Name,
                Size = UDim2New(0, 0, 0, 15),
                AnchorPoint = Vector2New(0, 0.5),
                Position = UDim2New(0, 0, 0.5, 0),
                BackgroundTransparency = 1,
                TextXAlignment = Enum.TextXAlignment.Left,
                BorderSizePixel = 0,
                AutomaticSize = Enum.AutomaticSize.X,
                TextSize = 9,
                BackgroundColor3 = FromRGB(255, 255, 255)
            })  Items["Text"]:AddToTheme({TextColor3 = "Text"})

            Items["Text"]:TextBorder()
        end

        return BlankElement, Items
    end

    Library.CreateSettingsPage = function(self, Window, Watermark, KeybindList)
        local SettingsPage = Window:Page({Name = "Settings", SubPages = true}) do 
            local ThemingSubPage = SettingsPage:SubPage({Name = "Theming", Columns = 2}) do 
                local ThemesSection = ThemingSubPage:Section({Name = "Themes", Side = 1}) do
                    for Index, Value in Library.Theme do 
                        ThemesSection:Label(Index):Colorpicker({
                            Name = Index,
                            Flag = Index.."Theme",
                            Default = Value,
                            Callback = function(Value)
                                Library.Theme[Index] = Value
                                Library:ChangeTheme(Index, Value)
                            end
                        })
                    end
                end
            end

local ConfigPage = SettingsPage:SubPage({Name = "Configs"}) do
local ConfigSection = ConfigPage:Section({Name = "Configuration Manager"}) do
    local ConfigName, SelectedConfig

    ConfigSection:Textbox({  
        Name = "Config name",  
        Placeholder = "Enter new config name",  
        Default = "",  
        Flag = "ConfigName",  
        Callback = function(Value)  
            ConfigName = Value  
        end  
    })  

    local ConfigDropdown = ConfigSection:Dropdown({  
        Name = "Config list",  
        Flag = "ConfigList",  
        Items = {},  
        Callback = function(Value)  
            SelectedConfig = Value  
        end  
    })  

    -- You must make one ButtonGroup for each single button  
    local BtnCreate = ConfigSection:Button()  
    BtnCreate:Add("Create config", function()  
        if not ConfigName or ConfigName == "" then  
            return Library:Notification("Error", "Please enter a config name first", 5)  
        end  
        local path = Library.Folders.Configs .. "/" .. ConfigName .. ".json"  
        if isfile(path) then  
            return Library:Notification("Error", "Config already exists", 5)  
        end  
        writefile(path, Library:GetConfig())  
        Library:Notification("Success", "Created config: " .. ConfigName, 5)  
        Library:RefreshConfigsList(ConfigDropdown)  
    end)  

    local BtnLoad = ConfigSection:Button()  
    BtnLoad:Add("Load config", function()  
        if not SelectedConfig then  
            return Library:Notification("Error", "Select a config to load", 5)  
        end  
        local path = Library.Folders.Configs .. "/" .. SelectedConfig .. ".json"  
        if isfile(path) then  
            Library:LoadConfig(readfile(path))  
            Library:Notification("Success", "Loaded config: " .. SelectedConfig, 5)  
        else  
            Library:Notification("Error", "Config not found", 5)  
        end  
    end)  

    local BtnOverwrite = ConfigSection:Button()  
    BtnOverwrite:Add("Overwrite config", function()  
        if not SelectedConfig then  
            return Library:Notification("Error", "Select a config to overwrite", 5)  
        end  
        local path = Library.Folders.Configs .. "/" .. SelectedConfig .. ".json"  
        writefile(path, Library:GetConfig())  
        Library:Notification("Success", "Overwrote config: " .. SelectedConfig, 5)  
    end)  

    local BtnRefresh = ConfigSection:Button()  
    BtnRefresh:Add("Refresh list", function()  
        Library:RefreshConfigsList(ConfigDropdown)  
        Library:Notification("Info", "Config list refreshed", 3)  
    end)  

    local BtnDelete = ConfigSection:Button()  
    BtnDelete:Add("Delete config", function()  
        if not SelectedConfig then  
            return Library:Notification("Error", "Select a config to delete", 5)  
        end  
        if Library:DeleteConfig(SelectedConfig) then  
            Library:Notification("Success", "Deleted config: " .. SelectedConfig, 5)  
            
            -- Check if deleted config was the autoload config
            local AutoFile = Library.Folders.Configs .. "/autoload.json"
            if isfile(AutoFile) then
                local data = HttpService:JSONDecode(readfile(AutoFile))
                if data and data.AutoLoad == SelectedConfig then
                    delfile(AutoFile)
                    Library:Notification("Info", "Autoload config removed (deleted)", 3)
                end
            end
            
            SelectedConfig = nil  
            Library:RefreshConfigsList(ConfigDropdown)  
        else  
            Library:Notification("Error", "Config not found or could not delete", 5)  
        end  
    end)  

    local BtnAuto = ConfigSection:Button()  
    BtnAuto:Add("Set as autoload", function()  
        if not SelectedConfig then  
            return Library:Notification("Error", "Select a config first", 5)  
        end  
        writefile(Library.Folders.Configs .. "/autoload.json", HttpService:JSONEncode({AutoLoad = SelectedConfig}))  
        Library:Notification("Success", "Set autoload config: " .. SelectedConfig, 5)  
        
        -- Update dropdown to show the selected autoload config
        ConfigDropdown:Set(SelectedConfig)
    end)  

    local BtnRemoveAuto = ConfigSection:Button()  
    BtnRemoveAuto:Add("Remove autoload", function()  
        local AutoFile = Library.Folders.Configs .. "/autoload.json"
        if isfile(AutoFile) then
            delfile(AutoFile)
            Library:Notification("Success", "Autoload config removed", 5)
            
            -- Clear dropdown selection
            ConfigDropdown:Set("")
            SelectedConfig = nil
        else
            Library:Notification("Info", "No autoload config set", 3)
        end
    end)  

    -- Function to load autoload config (will be called after UI is fully created)
    local function LoadAutoloadConfig()
        if not PendingAutoload then
            local AutoFile = Library.Folders.Configs .. "/autoload.json"  
            if isfile(AutoFile) then  
                local success, data = pcall(function()
                    return HttpService:JSONDecode(readfile(AutoFile))
                end)
                
                if success and data and data.AutoLoad then  
                    local path = string.format("%s/%s.json", Library.Folders.Configs, data.AutoLoad)  
                    if isfile(path) then  
                        PendingAutoload = data.AutoLoad
                    else
                        -- Autoload file exists but config doesn't, remove autoload
                        delfile(AutoFile)
                    end
                end  
            end
        end
        
        if PendingAutoload then
            local path = string.format("%s/%s.json", Library.Folders.Configs, PendingAutoload)
            if isfile(path) then
                -- Load the config (now all SetFlags should be registered)
                Library:LoadConfig(readfile(path))
                
                -- Set the dropdown to show the autoload config
                if ConfigDropdown and ConfigDropdown.Set then
                    ConfigDropdown:Set(PendingAutoload)
                    SelectedConfig = PendingAutoload
                end
                
                task.defer(function()  
                    Library:Notification("Info", "Auto-loaded: " .. PendingAutoload, 5)  
                end)
                
                PendingAutoload = nil
                return true
            end
        end
        return false
    end

    -- Check for autoload on startup but delay the actual loading
    local AutoFile = Library.Folders.Configs .. "/autoload.json"  
    if isfile(AutoFile) then  
        local success, data = pcall(function()
            return HttpService:JSONDecode(readfile(AutoFile))
        end)
        
        if success and data and data.AutoLoad then  
            local path = string.format("%s/%s.json", Library.Folders.Configs, data.AutoLoad)  
            if isfile(path) then  
                PendingAutoload = data.AutoLoad
                
                -- Delay the autoload to ensure all UI elements are created
                task.spawn(function()
                    wait(0.5) -- Wait a bit for all SetFlags to be registered
                    LoadAutoloadConfig()
                end)
            else
                delfile(AutoFile)
            end
        end  
    end

    -- Also provide a manual way to trigger autoload after UI is created
    Library.AutoloadConfig = LoadAutoloadConfig
    
    -- Refresh the config list
    Library:RefreshConfigsList(ConfigDropdown)  
end
end

-- Call autoload after a short delay to ensure all UI is created
task.spawn(function()
    wait(1) -- Wait 1 second for all UI elements to be fully created
    if Library.AutoloadConfig then
        Library:AutoloadConfig()
    end
end)
         
            local SettingsSubPage = SettingsPage:SubPage({Name = "Settings", Columns = 2}) do 
                local SettingsSection = SettingsSubPage:Section({Name = "Settings", Side = 1}) do

        

        SettingsSection:Label("Auto Hide UI"):Keybind({
    Name = "Menu keybind",
    Flag = "UIKeybind",
    Default = Library.MenuKeybind,
    Mode = "Toggle",
    Callback = function()
        -- update the stored key dynamically
        Library.MenuKeybind = Library.Flags["UIKeybind"].Key
    end
})
	
													

                    SettingsSection:Toggle({
                        Name = "Keybind list",
                        Flag = "Keybind list",
                        Default = true,
                        Callback = function(Value)
                            KeybindList:SetVisibility(Value)
                        end
                    })

                    SettingsSection:Slider({
                        Name = "Fade time",
                        Flag = "FadeTime",
                        Default = Library.FadeSpeed,
                        Min = 0,
                        Max = 1,
                        Decimals = 0.01,
                        Callback = function(Value)
                            Library.FadeSpeed = Value
                        end
                    })

                    SettingsSection:Slider({
                        Name = "Tween time",
                        Flag = "TweenTime",
                        Default = Library.Tween.Time,
                        Min = 0,
                        Max = 1,
                        Decimals = 0.01,
                        Callback = function(Value)
                            Library.Tween.Time = Value
                        end
                    })

                    SettingsSection:Dropdown({
                        Name = "Tween style",
                        Flag = "Tween style",
                        Items = { "Linear", "Quad", "Quart", "Back", "Bounce", "Circular", "Cubic", "Elastic", "Exponential", "Sine", "Quint" },
                        Default = "Cubic",
                        Callback = function(Value)
                            Library.Tween.Style = Enum.EasingStyle[Value]
                        end
                    })

                    
                    SettingsSection:Dropdown({
                        Name = "Tween style",
                        Flag = "Tween style",
                        Items = { "Linear", "Quad", "Quart", "Back", "Bounce", "Circular", "Cubic", "Elastic", "Exponential", "Sine", "Quint" },
                        Default = "Cubic",
                        Callback = function(Value)
                            Library.Tween.Style = Enum.EasingStyle[Value]
                        end
                    })

                    SettingsSection:Dropdown({
                        Name = "Tween direction",
                        Flag = "Tween direction",
                        Items = { "In", "Out", "InOut" },
                        Default = "Out",
                        Callback = function(Value)
                            Library.Tween.Direction = Enum.EasingDirection[Value]
                        end
                    })

                    SettingsSection:Button():Add("Unload", function()
                        Library:Unload()
                    end)

                    SettingsSection:Label("UI Keybind"):Keybind({
                        Name = "Menu keybind",
                        Flag = "UIKeybind",
                        Default = Library.MenuKeybind,
                        Mode = "Toggle",
                        Callback = function()
                            Library.MenuKeybind = Library.Flags["UIKeybind"].Key
                        end
                    })
                end
            end
        end
        
        return SettingsPage
    end

							
local UIS = game:GetService("UserInputService")

-- ðŸŸ£ Floating Icon Creation
Library.FloatingIcon = Instances:Create("ImageButton", {
Parent = Library.Holder.Instance,
Name = "FloatingHideIcon",
BackgroundColor3 = Library.Theme["Accent"],
Position = UDim2.new(0, 20, 0, 20),
Size = UDim2.new(0, 65, 0, 60),
BorderSizePixel = 0,
AutoButtonColor = false,
Image = "rbxassetid://114178849342027",
ImageColor3 = Library.Theme["Accent"],
Visible = true,
ZIndex = 1000
})

Library.FloatingIcon:MakeDraggable()
Library.FloatingIcon:Border("Outline")

-- ðŸŸ£ Toggle Function
local uiHidden = false
local function ToggleUI()
uiHidden = not uiHidden
for _, child in pairs(Library.Holder.Instance:GetChildren()) do
if child.Name ~= "FloatingHideIcon" and (not Library.NotifHolder or child ~= Library.NotifHolder.Instance) then
child.Visible = not uiHidden
end
end
end

-- ðŸŸ£ Floating Icon Click to Toggle
Library.FloatingIcon:Connect("MouseButton1Click", ToggleUI) -- this line make this as add fallbacks

-- ðŸŸ£ Default Key
Library.MenuKeybind = Library.MenuKeybind or Enum.KeyCode.Insert
Library.Flags["UIKeybind"] = { Key = Library.MenuKeybind }

UIS.InputBegan:Connect(function(input, processed)
if not processed and input.KeyCode == (Library.MenuKeybind or Enum.KeyCode.Insert) then
ToggleUI()
end
end)

end -- closes your setup

getgenv().Library = Library
return Library
-- Custom UI version: Built with pure Roblox Lua, no external libraries.
-- ScreenGui in PlayerGui, draggable on PC and Mobile using UserInputService.
-- Supports all inputs: PC (mouse), Mobile (touch), emulators.
-- Each feature is controllable via the UI (buttons, toggles, text inputs).
-- Toggles for ongoing features, buttons for one-time applies/unlocks, textboxes for multipliers.
-- Close button to destroy the UI.
-- All exploits from the provided script are included and triggered via UI.

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- Create ScreenGui
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "CustomCheatUI"
ScreenGui.Parent = PlayerGui
ScreenGui.ResetOnSpawn = false

-- Main Frame (draggable)
local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 300, 0, 400)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

-- Make MainFrame draggable (supports PC mouse and mobile touch)
local dragging = false
local dragInput
local dragStart
local startPos

local function updateInput(input)
    local delta = input.Position - dragStart
    MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
end

MainFrame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
        
        local connection
        connection = input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
                connection:Disconnect()
            end
        end)
    end
end)

MainFrame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        updateInput(input)
    end
end)

-- Title Label
local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, 0, 0, 30)
TitleLabel.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
TitleLabel.Text = "Cheat Menu"
TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TitleLabel.Font = Enum.Font.SourceSansBold
TitleLabel.TextSize = 18
TitleLabel.Parent = MainFrame

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 30, 0, 30)
CloseButton.Position = UDim2.new(1, -30, 0, 0)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.SourceSansBold
CloseButton.TextSize = 18
CloseButton.Parent = MainFrame

CloseButton.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Scrolling Frame for features
local ScrollingFrame = Instance.new("ScrollingFrame")
ScrollingFrame.Size = UDim2.new(1, 0, 1, -30)
ScrollingFrame.Position = UDim2.new(0, 0, 0, 30)
ScrollingFrame.BackgroundTransparency = 1
ScrollingFrame.ScrollBarThickness = 6
ScrollingFrame.Parent = MainFrame

-- UIListLayout for organizing elements
local UIListLayout = Instance.new("UIListLayout")
UIListLayout.Padding = UDim.new(0, 5)
UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
UIListLayout.Parent = ScrollingFrame

-- Function to create a section label
local function CreateSectionLabel(text)
    local Label = Instance.new("TextLabel")
    Label.Size = UDim2.new(1, 0, 0, 25)
    Label.BackgroundTransparency = 1
    Label.Text = text
    Label.TextColor3 = Color3.fromRGB(200, 200, 200)
    Label.Font = Enum.Font.SourceSans
    Label.TextSize = 16
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Parent = ScrollingFrame
end

-- Function to create a button
local function CreateButton(text, callback)
    local Button = Instance.new("TextButton")
    Button.Size = UDim2.new(1, 0, 0, 30)
    Button.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    Button.Text = text
    Button.TextColor3 = Color3.fromRGB(255, 255, 255)
    Button.Font = Enum.Font.SourceSans
    Button.TextSize = 14
    Button.Parent = ScrollingFrame
    Button.MouseButton1Click:Connect(callback)
    return Button
end

-- Function to create a toggle
local function CreateToggle(text, default, callback)
    local ToggleFrame = Instance.new("Frame")
    ToggleFrame.Size = UDim2.new(1, 0, 0, 30)
    ToggleFrame.BackgroundTransparency = 1
    ToggleFrame.Parent = ScrollingFrame
    
    local ToggleLabel = Instance.new("TextLabel")
    ToggleLabel.Size = UDim2.new(0.8, 0, 1, 0)
    ToggleLabel.BackgroundTransparency = 1
    ToggleLabel.Text = text
    ToggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    ToggleLabel.Font = Enum.Font.SourceSans
    ToggleLabel.TextSize = 14
    ToggleLabel.TextXAlignment = Enum.TextXAlignment.Left
    ToggleLabel.Parent = ToggleFrame
    
    local ToggleButton = Instance.new("TextButton")
    ToggleButton.Size = UDim2.new(0.2, 0, 1, 0)
    ToggleButton.Position = UDim2.new(0.8, 0, 0, 0)
    ToggleButton.BackgroundColor3 = default and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
    ToggleButton.Text = default and "ON" or "OFF"
    ToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    ToggleButton.Font = Enum.Font.SourceSans
    ToggleButton.TextSize = 14
    ToggleButton.Parent = ToggleFrame
    
    local state = default
    ToggleButton.MouseButton1Click:Connect(function()
        state = not state
        ToggleButton.Text = state and "ON" or "OFF"
        ToggleButton.BackgroundColor3 = state and Color3.fromRGB(0, 200, 0) or Color3.fromRGB(200, 0, 0)
        callback(state)
    end)
    return ToggleButton
end

-- Function to create multiplier setter (TextBox + Button)
local function CreateMultiplierSetter(name, default, min, max, callback)
    local SetterFrame = Instance.new("Frame")
    SetterFrame.Size = UDim2.new(1, 0, 0, 30)
    SetterFrame.BackgroundTransparency = 1
    SetterFrame.Parent = ScrollingFrame
    
    local Label = Instance.new("TextLabel")
    Label.Size = UDim2.new(0.4, 0, 1, 0)
    Label.BackgroundTransparency = 1
    Label.Text = name
    Label.TextColor3 = Color3.fromRGB(255, 255, 255)
    Label.Font = Enum.Font.SourceSans
    Label.TextSize = 14
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Parent = SetterFrame
    
    local TextBox = Instance.new("TextBox")
    TextBox.Size = UDim2.new(0.3, 0, 1, 0)
    TextBox.Position = UDim2.new(0.4, 0, 0, 0)
    TextBox.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    TextBox.Text = tostring(default)
    TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    TextBox.Font = Enum.Font.SourceSans
    TextBox.TextSize = 14
    TextBox.Parent = SetterFrame
    
    local SetButton = Instance.new("TextButton")
    SetButton.Size = UDim2.new(0.3, 0, 1, 0)
    SetButton.Position = UDim2.new(0.7, 0, 0, 0)
    SetButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
    SetButton.Text = "Set"
    SetButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    SetButton.Font = Enum.Font.SourceSans
    SetButton.TextSize = 14
    SetButton.Parent = SetterFrame
    
    SetButton.MouseButton1Click:Connect(function()
        local value = tonumber(TextBox.Text)
        if value and value >= min and value <= max then
            callback(value)
        else
            TextBox.Text = "Invalid"
            wait(1)
            TextBox.Text = tostring(default)
        end
    end)
end

-- Load Replication and other modules (shared)
local Replication
pcall(function()
    local RS = game:GetService("ReplicatedStorage")
    if RS and RS:FindFirstChild("Game") and RS.Game:FindFirstChild("Replication") then
        Replication = require(RS.Game.Replication)
    end
end)

local TapButtonModule
for _, v in ipairs(getgc(true)) do
    if type(v) == "table" and rawget(v, "restartComboDecay") then
        TapButtonModule = v
        break
    end
end

local GamepassesReplication
for _, v in ipairs(getgc(true)) do
    if type(v) == "table" then
        local ok, data = pcall(function() return rawget(v, "Data") end)
        if ok and type(data) == "table" and rawget(data, "Gamepasses") then
            GamepassesReplication = v
            break
        end
    end
end

local success, SignalModule = pcall(function()
    local Modules = game:GetService("ReplicatedStorage"):FindFirstChild("Modules")
    if Modules then
        return require(Modules:FindFirstChild("Signal"))
    end
end)

local petStats
pcall(function()
    local RS = game:GetService("ReplicatedStorage")
    petStats = require(RS.Game.PetStats)
end)

local StarterScripts = game:GetService("StarterPlayer").StarterPlayerScripts
local UIController = StarterScripts.Modules.Controllers:FindFirstChild("UI Controller")

-- Features in UI

CreateSectionLabel("Multipliers")

-- Click Multiplier
CreateMultiplierSetter("Click Multiplier", 100000, 100, 100000, function(value)
    if Replication and Replication.Data and Replication.Data.GemShop then
        Replication.Data.GemShop.ClickMultiplier = value
    end
end)

-- Pet Multiplier
CreateMultiplierSetter("Pet Multiplier", 100000, 1000, 100000, function(value)
    if Replication and Replication.Data then
        pcall(function()
            Replication.Data.PetMultiplier1 = value
        end)
    end
end)

CreateSectionLabel("Toggles")

-- Combo Decay Prevention
local comboPreventionEnabled = false
CreateToggle("Combo Decay Prevention", false, function(state)
    comboPreventionEnabled = state
end)
task.spawn(function()
    while true do
        wait(0.15)
        if comboPreventionEnabled and TapButtonModule then
            pcall(function()
                TapButtonModule.restartComboDecay()
            end)
        end
    end
end)

-- Auto Tap All Bonuses
local autoTapEnabled = false
CreateToggle("Auto Tap All Bonuses", false, function(state)
    autoTapEnabled = state
end)
task.spawn(function()
    while true do
        wait(0.1)
        if autoTapEnabled and success and SignalModule then
            pcall(function()
                SignalModule.Fire("Popup", "tap", 999)
            end)
        end
    end
end)

CreateSectionLabel("Unlocks / Applies")

-- Unlock Auto Rebirth
CreateButton("Unlock Auto Rebirth", function()
    if GamepassesReplication and GamepassesReplication.Data and GamepassesReplication.Data.Gamepasses then
        GamepassesReplication.Data.Gamepasses.AutoRebirth = true
    end
end)

-- Unlock Auto Clicker
CreateButton("Unlock Auto Clicker", function()
    if Replication and Replication.Data then
        pcall(function()
            Replication.Data.AutoClickerEnabled = true
        end)
        pcall(function()
            if Replication.Data.GemShop then
                Replication.Data.GemShop.FreeAutoClicker = 999
            end
        end)
    end
    if GamepassesReplication and GamepassesReplication.Data and GamepassesReplication.Data.Gamepasses then
        GamepassesReplication.Data.Gamepasses.AutoClicker = true
    end
end)

-- Unlock Faster Hatch Egg
CreateButton("Unlock Faster Hatch Egg", function()
    if Replication and Replication.Data and Replication.Data.Gamepasses then
        Replication.Data.Gamepasses.FasterEgg = true
    end
end)

-- Unlock x3 Eggs
CreateButton("Unlock x3 Eggs", function()
    if Replication and Replication.Data and Replication.Data.Gamepasses then
        Replication.Data.Gamepasses.x3Egg = true
    end
end)

-- Max Clicker Efficiency
CreateButton("Max Clicker Efficiency", function()
    if UIController and UIController.TapButton and UIController.TapButton.Init then
        pcall(function()
            debug.setupvalue(UIController.TapButton.Init, 243, 0.000001)
            debug.setupvalue(UIController.TapButton.Init, 244, 0.000001)
        end)
    end
end)

-- Max All Pet Levels
CreateButton("Max All Pet Levels", function()
    if petStats and Replication and Replication.Data and Replication.Data.Pets then
        pcall(function()
            for _, petData in pairs(Replication.Data.Pets) do
                if petData and petData.Name then
                    local rarity = petStats:GetRarity(petData.Name)
                    local maxLevel = petStats:GetMaxLevel(rarity)
                    petData.Level = maxLevel
                    petData.XP = petStats:XPRequirement(maxLevel, rarity)
                end
            end
        end)
    end
end)

-- Unlock Max Pet Storage
CreateButton("Unlock Max Pet Storage", function()
    if Replication and Replication.Data then
        pcall(function()
            Replication.Data.StorageLimit = 9999
            Replication.Data.Storage1 = true
            Replication.Data.Storage2 = true
            Replication.Data.Storage3 = true
        end)
    end
end)

-- Unlock Max Pet Equip
CreateButton("Unlock Max Pet Equip", function()
    if Replication and Replication.Data then
        pcall(function()
            Replication.Data.EquipLimit = 9999
            Replication.Data["+2Equip"] = true
            Replication.Data["+4Equip"] = true
            Replication.Data["+6Equip"] = true
        end)
    end
end)

-- Upgrade All Pets to Rainbow
CreateButton("Upgrade Pets to Rainbow", function()
    if Replication and Replication.Data and Replication.Data.Pets then
        pcall(function()
            for petId, petData in pairs(Replication.Data.Pets) do
                if petData then
                    petData.Tier = "Rainbow"
                    petData.Multiplier1 = math.huge
                    petData.Multiplier2 = math.huge
                end
            end
        end)
    end
end)

-- Adjust scrolling canvas size
ScrollingFrame.CanvasSize = UDim2.new(0, 0, 0, UIListLayout.AbsoluteContentSize.Y + 10)

print("Custom UI loaded successfully")
local Library = loadstring(game:HttpGet("Ñ„Ð°Ð¹Ð»"))()


-- Create window
local Window = Library:Window({
    Logo = "77218680285262",
    Size = UDim2.new(0, 635, 0, 550)
})


local Watermark = Library:Watermark("Tap Simulator! | By Mjcontegazxc")

local MainPage = Window:Page({Name = "Main", Columns = 2})
local MPage = Window:Page({Name = "Misc", Columns = 1})
local EggPage = Window:Page({Name = "Egg & Pets & Crafts", Columns = 1})
local wbPage = Window:Page({Name = "Webhooks", Columns = 1})
local MovementPage = Window:Page({Name = "Movement", Columns = 1})
local DiscordPage = Window:Page({Name = "Discord", Columns = 1})
local GamePage = Window:Page({Name = "Game", Columns = 1})
local SPage = Window:Page({Name = "Extra Tips", Columns = 1})

Library:CreateSettingsPage(Window, Watermark)

local MainSection = MainPage:Section({Name = "Main", Side = 1})
local ESection = MainPage:Section({Name = "Exploits", Side = 2})
local TrSection = MainPage:Section({Name = "Trade Management", Side = 2})
local RSection = MainPage:Section({Name = "Boost & Rewards", Side = 2})
local CutSection = MainPage:Section({Name = "Cutscenes", Side = 2})
local ToSection = MPage:Section({Name = "Misc", Side = 1})
local TpSection = MPage:Section({Name = "Teleport", Side = 1})
local EggSection = EggPage:Section({Name = "Egg Management", Side = 1})
local WebhookSection = wbPage:Section({Name = "Webhooks", Side = 1})
local PlayerSection = MovementPage:Section({Name = "Localplayer", Side = 1})
local DiscordSection = DiscordPage:Section({Name = "Join Discord", Side = 1})
local GameSection = GamePage:Section({Name = "Game", Side = 1})
local SSection = SPage:Section({Name = "", Side = 1})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Safe service getter
local function GetService(serviceName)
    local success, service = pcall(function()
        return game:GetService(serviceName)
    end)
    return success and service or nil
end

-- Safe GC function
local function SafeGC()
    local success, gc = pcall(function()
        return getgc(true) or {}
    end)
    return success and gc or {}
end

-- Safe Network resolver
local Network = nil
local function SafeFire(...)
    if Network and type(Network.FireServer) == "function" then
        pcall(Network.FireServer, Network, ...)
    end
end

local function SafeInvoke(...)
    if Network and type(Network.InvokeServer) == "function" then
        local success, result = pcall(Network.InvokeServer, Network, ...)
        return success and result or nil
    end
    return nil
end

-- Try to get Network from GC
for _, v in ipairs(SafeGC()) do
    if type(v) == "table" and type(rawget(v, "FireServer")) == "function" and type(rawget(v, "InvokeServer")) == "function" then
        Network = v
        break
    end
end

-- Fallback: Try to get Network from ReplicatedStorage
if not Network then
    local ReplicatedStorage = GetService("ReplicatedStorage")
    if ReplicatedStorage then
        local modules = ReplicatedStorage:FindFirstChild("Modules")
        if modules then
            local networkModule = modules:FindFirstChild("Network")
            if networkModule then
                pcall(function()
                    Network = require(networkModule)
                end)
            end
        end
    end
end

-- UI Labels
local ClicksLabel = MainSection:Label("<font color='rgb(102, 178, 255)'>Click:</font> N/A")
local EggsLabel = MainSection:Label("<font color='rgb(102, 178, 255)'>Eggs:</font> N/A")
local RarestLabel = MainSection:Label("<font color='rgb(102, 178, 255)'>Rarest:</font> N/A")
local RebirthsLabel = MainSection:Label("<font color='rgb(102, 178, 255)'>Rebirths:</font> N/A")

-- Safe stats update
local function updateStats()
    local leaderstats = LocalPlayer:FindFirstChild("leaderstats")
    if not leaderstats then return end
    
    local clicks = leaderstats:FindFirstChild("Clicks")
    local eggs = leaderstats:FindFirstChild("Eggs")
    local rarest = leaderstats:FindFirstChild("Rarest")
    local rebirths = leaderstats:FindFirstChild("Rebirths")
    
    if ClicksLabel and ClicksLabel.SetText then
        ClicksLabel:SetText("<font color='rgb(102, 178, 255)'>Click:</font> " .. (clicks and tostring(clicks.Value) or "N/A"))
    end
    if EggsLabel and EggsLabel.SetText then
        EggsLabel:SetText("<font color='rgb(102, 178, 255)'>Eggs:</font> " .. (eggs and tostring(eggs.Value) or "N/A"))
    end
    if RarestLabel and RarestLabel.SetText then
        RarestLabel:SetText("<font color='rgb(102, 178, 255)'>Rarest:</font> " .. (rarest and tostring(rarest.Value) or "N/A"))
    end
    if RebirthsLabel and RebirthsLabel.SetText then
        RebirthsLabel:SetText("<font color='rgb(102, 178, 255)'>Rebirths:</font> " .. (rebirths and tostring(rebirths.Value) or "N/A"))
    end
end

-- Delayed stat update
task.delay(1, function()
    task.spawn(function()
        while task.wait(0.5) do
            pcall(updateStats)
        end
    end)
end)

-- Auto Click
local autoClick = false
local clickDelay = 0.1

MainSection:Toggle({
    Name = "Auto Click (OP)",
    Flag = "AutoClick",
    Default = false,
    Callback = function(v)
        autoClick = v
        Library:Notification("Auto Click", v and "Enabled" or "Disabled", 3)
    end
})

MainSection:Slider({
    Name = "Auto Click Delay",
    Flag = "AutoClickDelay",
    Min = 0.5,
    Max = 5,
    Default = 0.1,
    Suffix = "s",
    Callback = function(v)
        clickDelay = v
        Library:Notification("Auto Click Delay", "Set to "..v.."s", 3)
    end
})

-- Auto Critical
local autoCritical = false
local criticalDelay = 0.1

MainSection:Toggle({
    Name = "Auto Tap Critical Fast",
    Flag = "AutoTapCritical",
    Default = false,
    Callback = function(v)
        autoCritical = v
        Library:Notification("Auto Tap Critical", v and "Enabled" or "Disabled", 3)
    end
})

MainSection:Slider({
    Name = "Auto Critical Delay",
    Flag = "AutoCriticalDelay",
    Min = 0.5,
    Max = 5,
    Default = 0.1,
    Suffix = "s",
    Callback = function(v)
        criticalDelay = v
        Library:Notification("Auto Critical Delay", "Set to "..v.."s", 3)
    end
})

-- Delayed auto click/critical loop
task.delay(1, function()
    task.spawn(function()
        while task.wait() do
            if autoClick then
                SafeFire("Tap", true, false, false)
                task.wait(clickDelay)
            end
            if autoCritical then
                SafeFire("Tap", true, false, true)
                task.wait(criticalDelay)
            end
        end
    end)
end)

MainSection:Toggle({
    Name = "Auto Tap V1 + Refresh",
    Flag = "AutoTapV1",
    Default = false,
    Callback = function(Value)
        if Value then
            -- Notify when enabled
            pcall(function()
                Library:Notification("Auto Tap", "Enabled", 3)
            end)
            
            -- Safely load external script
            pcall(function()
                loadstring(game:HttpGet("Ñ„Ð°Ð¹Ð» 1"))()
            end)
        else
            -- Notify when disabled
            pcall(function()
                Library:Notification("Auto Tap", "Disabled", 3)
            end)
        end
    end
})

MainSection:Toggle({
    Name = "Load More Features Gamepasses",
    Flag = "LoadGamepasses",
    Default = false,
    Callback = function(Value)
        if Value then
            -- Notify user
            pcall(function()
                Library:Notification("Gamepasses", "Loading Features Enabled", 3)
            end)
            
            -- Safely load external script
            pcall(function()
                loadstring(game:HttpGet("Ñ„Ð°Ð¹Ð» 2"))()
            end)
        else
            -- Notify when disabled
            pcall(function()
                Library:Notification("Gamepasses", "Loading Features Disabled", 3)
            end)
        end
    end
})

-- Rebirth System
local selectedRebirths = {1}
local autoRebirth = false
local inputAmount = nil

MainSection:Label("Rebirth Amount: Enter manually or select from dropdown")

MainSection:Dropdown({
    Name = "Select Rebirth Amounts",
    Flag = "RebirthAmounts",
    Items = {1,5,15,35,70,100,500,1500},
    Default = {1},
    Multi = true,
    Callback = function(v)
        selectedRebirths = v
        Library:Notification("Rebirth Dropdown", "Selected: "..table.concat(v, ", "), 3)
    end
})

MainSection:Textbox({
    Name = "Manual Rebirth Amount",
    Flag = "ManualRebirth",
    Placeholder = "Eg,.. 3000",
    Finished = true,
    Callback = function(Value)
        local num = tonumber(Value)
        if num and num > 0 then
            inputAmount = num
            Library:Notification("Rebirth Input", "Manual amount set to "..num, 3)
        else
            Library:Notification("Rebirth Input", "Invalid input!", 3)
        end
    end
})

MainSection:Toggle({
    Name = "Auto Rebirth Selected",
    Flag = "AutoRebirth",
    Default = false,
    Callback = function(v)
        autoRebirth = v
        Library:Notification("Auto Rebirth", v and "Enabled" or "Disabled", 3)
    end
})

-- Delayed auto rebirth loop
task.delay(1, function()
    task.spawn(function()
        while task.wait(0.1) do
            if autoRebirth then
                if inputAmount then
                    SafeInvoke("Rebirth", inputAmount)
                end
                for _, amount in ipairs(selectedRebirths) do
                    SafeInvoke("Rebirth", amount)
                end
            end
        end
    end)
end)

-- Auto Inf Rebirth
local AutoInfRebirth = false

MainSection:Toggle({
    Name = "Auto Use Inf Rebirth (Robux Only)",
    Flag = "AutoInfRebirth",
    Default = false,
    Callback = function(v)
        AutoInfRebirth = v
        Library:Notification("Auto Inf Rebirth", v and "Enabled" or "Disabled", 3)
    end
})

-- Delayed auto inf rebirth loop
task.delay(1, function()
    task.spawn(function()
        while task.wait(0.5) do
            if AutoInfRebirth then
                SafeInvoke("Rebirth", 1, 1)
            end
        end
    end)
end)

MainSection:Label("<font color='rgb(102, 178, 255)'>\n\n</font>")

-- Auto Upgrade Rebirth Buttons
local autoUpgradeRebirth = false

MainSection:Toggle({
    Name = "Auto Upgrade Rebirth Buttons",
    Flag = "AutoUpgradeRebirth",
    Default = false,
    Callback = function(v)
        autoUpgradeRebirth = v
        Library:Notification("Auto Upgrade", v and "Enabled" or "Disabled", 3)
    end
})

-- Delayed auto upgrade rebirth loop
task.delay(1, function()
    task.spawn(function()
        while task.wait(0.5) do
            if autoUpgradeRebirth then
                SafeInvoke("UpgradeGemShop", "RebirthButtons")
            end
        end
    end)
end)

-- Auto Upgrade Jumps
local autoUpgradeJumps = false

MainSection:Toggle({
    Name = "Auto Upgrade Jumps",
    Flag = "AutoUpgradeJumps",
    Default = false,
    Callback = function(v)
        autoUpgradeJumps = v
        Library:Notification("Auto Upgrade Jumps", v and "Enabled" or "Disabled", 3)
    end
})

-- Delayed auto upgrade jumps loop
task.delay(1, function()
    task.spawn(function()
        while task.wait(0.5) do
            if autoUpgradeJumps then
                local workspaceGame = workspace:FindFirstChild("Game")
                if workspaceGame then
                    local islandParts = workspaceGame:FindFirstChild("IslandParts")
                    if islandParts then
                        for _, part in ipairs(islandParts:GetChildren()) do
                            if part:IsA("BasePart") then
                                SafeInvoke("UpgradeDoubleJump", part.Name)
                            end
                        end
                    end
                end
            end
        end
    end)
end)

-- Gem Shop System
getgenv().SelectedGemItems = {}
getgenv().AutoBuyRunning = false

local GemShopTable
for _, v in ipairs(SafeGC()) do
    if type(v) == "table" and rawget(v, "RebirthButtons") and rawget(v, "FreeAutoClicker") and rawget(v, "ClickMultiplier") then
        GemShopTable = v
        break
    end
end

if GemShopTable then
    local itemNames = {}
    for itemName, _ in pairs(GemShopTable) do
        table.insert(itemNames, itemName)
    end

    MainSection:Dropdown({  
        Name = "Auto Buy Items",  
        Items = itemNames,  
        Multi = true,  
        Default = {},  
        Callback = function(Value)  
            getgenv().SelectedGemItems = Value  
        end  
    })  

    MainSection:Toggle({  
        Name = "Auto Buy Enabled",  
        Default = false,  
        Callback = function(Value)  
            getgenv().AutoBuyRunning = Value  
            if Value then  
                task.delay(1, function()
                    task.spawn(function()
                        while getgenv().AutoBuyRunning do  
                            for _, item in ipairs(getgenv().SelectedGemItems) do  
                                SafeInvoke("UpgradeGemShop", item)  
                            end  
                            task.wait(0.5)  
                        end  
                    end)
                end)
            end  
        end  
    })
end

-- Auto Use Boosts
local autoUseBoosts = false
local boostNames = {
    "FriendBoost",
    "Luck20",
    "Luck Potion II",
    "Luck Potion III",
    "Tap Potion",
    "Tap Potion II",
    "Tap Potion III",
    "Gem Potion I",
    "Gem Potion II",
    "Gem Potion III",
    "Rebirth Potion I",
    "Rebirth Potion II",
    "Rebirth Potion III",
    "Egg Incubator",
    "Octo Incubator"
}

RSection:Toggle({
    Name = "Auto Use Boosts",
    Flag = "AutoUseBoosts",
    Default = false,
    Callback = function(v)
        autoUseBoosts = v
        Library:Notification("Auto Use Boosts", v and "Enabled" or "Disabled", 3)
    end
})

-- Delayed auto boosts loop
task.delay(1, function()
    task.spawn(function()
        while task.wait(0.5) do
            if autoUseBoosts then
                for _, boostName in ipairs(boostNames) do
                    SafeInvoke("UseBoost", boostName)
                end
            end
        end
    end)
end)


local btn = RSection:Button()
btn:Add("Maximize Boost (No Friends)", function()
    local replication
    local success = pcall(function()
        replication = require(game:GetService("ReplicatedStorage").Game.Replication)
    end)

    if success and replication and replication.Data then
        -- Ensure ActiveBoosts table exists
        if not replication.Data.ActiveBoosts then
            replication.Data.ActiveBoosts = {}
        end

        -- Set Friend Boost to maximum
        pcall(function()
            replication.Data.ActiveBoosts.FriendBoost = 5
        end)

        Library:Notification("Friend Boost", "Maximized friend boost without friends", 3)
    else
        -- Safe fallback: do nothing
    end
end)


local BoostsEnabled = false
local BoostsTask

RSection:Toggle({
    Name = "Max Boosts",
    Flag = "MaxBoosts",
    Default = false,
    Callback = function(Value)
        BoostsEnabled = Value

        if BoostsEnabled then
            Library:Notification("Max Boosts", "Auto refresh boosts enabled", 3)

            -- Run the auto-refresh in a safe loop
            BoostsTask = task.spawn(function()
                while BoostsEnabled do
                    local replication
                    pcall(function()
                        replication = require(game:GetService("ReplicatedStorage").Game.Replication)
                    end)

                    if replication and replication.Data and replication.Data.ActiveBoosts then
                        for boostName, boostTime in pairs(replication.Data.ActiveBoosts) do
                            pcall(function()
                                replication.Data.ActiveBoosts[boostName] = math.max(boostTime, 999999)
                            end)
                        end
                    end

                    task.wait(1)
                end
            end)

        else
            Library:Notification("Max Boosts", "Auto refresh boosts disabled", 3)
        end
    end
})


local ToggleBoost = RSection:Toggle({
    Name = "Max Friend Boost",
    Flag = "MaxFriendBoost",
    Default = false,
    Callback = function(Value)
        local replication, boosts

        -- Attempt to safely load modules
        pcall(function()
            replication = require(game:GetService("ReplicatedStorage"):FindFirstChild("Game") and
                                  game:GetService("ReplicatedStorage").Game:FindFirstChild("Replication"))
        end)

        pcall(function()
            boosts = require(game:GetService("ReplicatedStorage"):FindFirstChild("Game") and
                             game:GetService("ReplicatedStorage").Game:FindFirstChild("Boosts"))
        end)

        if not replication or not replication.Data then
            Library:Notification("Max Friend Boost", "Replication module not found", 3)
            return
        end

        -- If toggle is on, override ActiveBoosts safely
        if Value then
            local originalActiveBoosts = replication.Data.ActiveBoosts
            replication.Data.ActiveBoosts = setmetatable({}, {
                __index = function(self, key)
                    if key == "FriendBoost" then
                        return 5  -- Max friends
                    else
                        return 999999  -- Near-infinite duration
                    end
                end,

                __newindex = function(self, key, newValue)
                    if not rawget(self, key) or newValue > rawget(self, key) then
                        rawset(self, key, newValue)
                    end
                end
            })

            Library:Notification("Max Friend Boost", "Friend boost maximized safely", 3)
        else
            -- Revert to original ActiveBoosts if needed
            -- Safe fallback, only if original table exists
            if replication.Data.ActiveBoosts and originalActiveBoosts then
                replication.Data.ActiveBoosts = originalActiveBoosts
            end
            Library:Notification("Max Friend Boost", "Friend boost restored", 3)
        end
    end
})

RSection:Label("\nRewards")

-- Auto Claim Rewards
local autoClaimWeekly = false
local autoClaimMonthly = false

RSection:Toggle({
    Name = "Auto Claim Weekly Rewards",
    Flag = "AutoClaimWeekly",
    Default = false,
    Callback = function(v)
        autoClaimWeekly = v
        Library:Notification("Auto Claim Weekly Rewards", v and "Enabled" or "Disabled", 3)
    end
})

RSection:Toggle({
    Name = "Auto Claim Monthly Rewards",
    Flag = "AutoClaimMonthly",
    Default = false,
    Callback = function(v)
        autoClaimMonthly = v
        Library:Notification("Auto Claim Monthly Rewards", v and "Enabled" or "Disabled", 3)
    end
})

-- Delayed auto claim rewards loop
task.delay(1, function()
    task.spawn(function()
        while task.wait(0.2) do
            if autoClaimWeekly then
                for rank = 1, 250 do
                    SafeInvoke("ClaimLeaderboardRewards", "Weekly", rank)
                end
            end
            if autoClaimMonthly then
                for rank = 1, 250 do
                    SafeInvoke("ClaimLeaderboardRewards", "Monthly", rank)
                end
            end
        end
    end)
end)


local Replication
for _, v in ipairs(SafeGC()) do
    if type(v) == "table" then
        local data = rawget(v, "Data")
        if type(data) == "table" and rawget(data, "GemShop") then
            Replication = v
            break
        end
    end
end


local autoUnlockTiers = false

RSection:Toggle({
    Name = "Auto Unlock Tiers Rewards",
    Flag = "AutoUnlockTiers",
    Default = false,
    Callback = function(v)
        autoUnlockTiers = v
        Library:Notification("Auto Unlock Tiers Rewards", v and "Enabled" or "Disabled", 3)
    end
})

task.delay(1, function()
    task.spawn(function()
        while task.wait(0.2) do
            if autoUnlockTiers then
                for tier = 1, 10 do
                    SafeInvoke("UnlockTier", tier, "Main")
                end
            end
        end
    end)
end)


local btn = CutSection:Button()
btn:Add("Force Camera Control (Cutscenes)", function()
    local success, camera = pcall(function()
        return workspace:FindFirstChild("CurrentCamera")
    end)

    if success and camera then
        camera.CameraType = Enum.CameraType.Scriptable
        Library:Notification("Camera Control", "Camera forced to Scriptable mode", 3)
    else
        Library:Notification("Camera Control", "CurrentCamera not found", 3)
    end
end)


CutSection:Toggle({
    Name = "Force Sleigh Cutscene",
    Flag = "ForceCutscene",
    Default = false,
    Callback = function(Value)
        local NetworkModule
        pcall(function()
            NetworkModule = game:GetService("ReplicatedStorage").Modules.Network
        end)

        if not NetworkModule then
            Library:Notification("Cutscene", "Network module not found", 3)
            return
        end

        if Value then
            Library:Notification("Cutscene", "Triggering cutscene instantly...", 3)
            pcall(function()
                for i = 1, 10 do
                    NetworkModule:FireServer("PlaySleighCutscene")
                end
            end)
        else
            Library:Notification("Cutscene", "Cutscene toggle off", 3)
        end
    end
})



if Replication then
    local clickMultiplier = 100

    ESection:Slider({  
        Name = "Click Multiplier",  
        Flag = "ClickMultiplier",  
        Min = 100,  
        Max = 100000,  
        Default = 100,  
        Suffix = "",  
        Callback = function(v)  
            clickMultiplier = v  
            Library:Notification("Click Multiplier", "Set to "..v, 3)  
        end  
    })  

    task.delay(1, function()
        task.spawn(function()  
            while task.wait(0.15) do  
                if Replication.Data and Replication.Data.GemShop then  
                    Replication.Data.GemShop.ClickMultiplier = clickMultiplier  
                end  
            end  
        end)
    end)
end


local Replication
pcall(function()
    local RS = game:GetService("ReplicatedStorage")
    if RS and RS:FindFirstChild("Game") and RS.Game:FindFirstChild("Replication") then
        Replication = require(RS.Game.Replication)
    end
end)

local petMultiplier = 1000

ESection:Slider({
    Name = "Pet Multiplier",
    Flag = "PetMultiplier",
    Min = 1000,
    Max = 100000,
    Default = 1000,
    Suffix = "x",
    Callback = function(v)
        petMultiplier = v
        if not Replication then return end
        if not Replication.Data then return end
        pcall(function()
            Replication.Data.PetMultiplier1 = v
        end)
        if Library and Library.Notification then
            Library:Notification("Pet Multiplier", "Set to "..tostring(v), 3)
        end
    end
})

local TapButtonModule
for _, v in ipairs(SafeGC()) do
    if type(v) == "table" and rawget(v, "restartComboDecay") then
        TapButtonModule = v
        break
    end
end

if TapButtonModule then
    local autoComboReset = false

    ESection:Toggle({  
        Name = "Combo Decay Prevention",  
        Flag = "AutoResetCombo",  
        Default = false,  
        Callback = function(v)  
            autoComboReset = v  
            Library:Notification("Combo Reset", v and "Enabled" or "Disabled", 3)  
        end  
    })  

   
    task.delay(1, function()
        task.spawn(function()  
            while task.wait(0.15) do  
                if autoComboReset then  
                    pcall(function()
                        TapButtonModule.restartComboDecay()  
                    end)
                end  
            end  
        end)
    end)
end


local GamepassesReplication
for _, v in ipairs(SafeGC()) do
    if type(v) == "table" then
        local ok, data = pcall(function() return rawget(v, "Data") end)
        if ok and type(data) == "table" and rawget(data, "Gamepasses") then
            GamepassesReplication = v
            break
        end
    end
end

if GamepassesReplication then
    local btn = ESection:Button()
    btn:Add("Gamepass Auto Rebirth (Unlocked)", function()
        if GamepassesReplication.Data and GamepassesReplication.Data.Gamepasses then
            GamepassesReplication.Data.Gamepasses.AutoRebirth = true
            Library:Notification("Gamepass", "Rebirth unlocked", 3)
        end
    end)
end


local GamepassesReplication
for _, v in ipairs(SafeGC()) do
    if type(v) == "table" then
        local ok, data = pcall(function() return rawget(v, "Data") end)
        if ok and type(data) == "table" and rawget(data, "Gamepasses") then
            GamepassesReplication = v
            break
        end
    end
end

if GamepassesReplication then
    local btn = ESection:Button()
    btn:Add("Auto Clicker Gamepass (Unlock)", function()
        local replication
        pcall(function()
            local RS = game:GetService("ReplicatedStorage")
            if RS and RS:FindFirstChild("Game") and RS.Game:FindFirstChild("Replication") then
                replication = require(RS.Game.Replication)
            end
        end)

        if replication and replication.Data then
            pcall(function()
                replication.Data.AutoClickerEnabled = true
            end)
            pcall(function()
                if replication.Data.GemShop then
                    replication.Data.GemShop.FreeAutoClicker = 999
                end
            end)
        end

        if GamepassesReplication.Data and GamepassesReplication.Data.Gamepasses then
            pcall(function()
                GamepassesReplication.Data.Gamepasses.AutoClicker = true
            end)
        end

        if Library and Library.Notification then
            Library:Notification("Gamepass", "Auto Clicker unlocked", 3)
        end
    end)
end


local btn = ESection:Button()

btn:Add("Unlock Faster Hatch Egg", function()
    local replication
    pcall(function()
        local RS = game:GetService("ReplicatedStorage")
        if RS and RS:FindFirstChild("Game") and RS.Game:FindFirstChild("Replication") then
            replication = require(RS.Game.Replication)
        end
    end)

    if replication and replication.Data and replication.Data.Gamepasses then
        pcall(function()
            replication.Data.Gamepasses.FasterEgg = true
        end)

        if Library and Library.Notification then
            Library:Notification("Gamepass", "Faster Hatch Egg unlocked", 3)
        end
    end
end)

local btn = ESection:Button()

btn:Add("Unlock x3 Eggs", function()
    local replication

    pcall(function()
        local RS = game:GetService("ReplicatedStorage")
        if RS and RS:FindFirstChild("Game") and RS.Game:FindFirstChild("Replication") then
            replication = require(RS.Game.Replication)
        end
    end)

    if replication and replication.Data and replication.Data.Gamepasses then
        pcall(function()
            replication.Data.Gamepasses.x3Egg = true
        end)

        if Library and Library.Notification then
            Library:Notification("Gamepass", "x3 Eggs unlocked", 3)
        end
    end
end)

local btn = ESection:Button()
btn:Add("Auto Tap All Bonuses", function()
   
    local success, SignalModule = pcall(function()
        local Modules = game:GetService("ReplicatedStorage"):FindFirstChild("Modules")
        if Modules then
            return require(Modules:FindFirstChild("Signal"))
        end
    end)

    
    if not success or not SignalModule then
        return
    end

    Library:Notification("Auto Tap", "Started collecting all tap bonuses", 3)

    -- Run in a separate thread to avoid freezing UI
    task.spawn(function()
        while true do
            pcall(function()
                SignalModule.Fire("Popup", "tap", 999)
            end)
            task.wait(0.1)
        end
    end)
end)


local btn = ESection:Button()
btn:Add("Max Clicker Efficiency", function()
    local StarterScripts = game:GetService("StarterPlayer").StarterPlayerScripts
    local UIController = StarterScripts.Modules.Controllers:FindFirstChild("UI Controller")
    if not UIController then return end

    pcall(function()
        debug.setupvalue(UIController.TapButton.Init, 243, 0.000001)
        debug.setupvalue(UIController.TapButton.Init, 244, 0.000001)
    end)

    local Library = Library or StarterScripts.Modules:FindFirstChild("Library")
    if Library then
        pcall(function()
            Library:Notification("Auto Clicker", "Max efficiency applied!", 3)
        end)
    end
end)

local btn = ESection:Button()

btn:Add("Max All Pet Levels (V)", function()
    local petStats
    local replication

    pcall(function()
        local RS = game:GetService("ReplicatedStorage")
        petStats = require(RS.Game.PetStats)
        replication = require(RS.Game.Replication)
    end)

    if not (petStats and replication and replication.Data and replication.Data.Pets) then
        return
    end

    pcall(function()
        for _, petData in pairs(replication.Data.Pets) do
            if petData and petData.Name then
                local rarity = petStats:GetRarity(petData.Name)
                local maxLevel = petStats:GetMaxLevel(rarity)

                petData.Level = maxLevel
                petData.XP = petStats:XPRequirement(maxLevel, rarity)
            end
        end
    end)

    if Library and Library.Notification then
        Library:Notification("Pets", "All pets maxed", 3)
    end
end)


-- Button 1: Pet Storage Bypass
local btn1 = ESection:Button()
btn1:Add("Unlock Max Pet Storage (V)", function()
    local replication
    pcall(function()
        replication = require(game:GetService("ReplicatedStorage").Game.Replication)
    end)

    if not (replication and replication.Data) then
        return
    end

    pcall(function()
        replication.Data.StorageLimit = 9999
        replication.Data.Storage1 = true
        replication.Data.Storage2 = true
        replication.Data.Storage3 = true
    end)

    if Library and Library.Notification then
        Library:Notification("Storage", "Pet storage unlocked", 3)
    end
end)


-- Button 2: Pet Equip Bypass
local btn2 = ESection:Button()
btn2:Add("Unlock Max Pet Equip (V)", function()
    local replication
    pcall(function()
        replication = require(game:GetService("ReplicatedStorage").Game.Replication)
    end)

    if not (replication and replication.Data) then
        return
    end

    pcall(function()
        replication.Data.EquipLimit = 9999
        replication.Data["+2Equip"] = true
        replication.Data["+4Equip"] = true
        replication.Data["+6Equip"] = true
    end)

    if Library and Library.Notification then
        Library:Notification("Equip", "Pet equip limit unlocked", 3)
    end
end)


local btn = ESection:Button()
btn:Add("Upgrade All Pets to Rainbow (V)", function()
    local replication
    pcall(function()
        replication = require(game:GetService("ReplicatedStorage").Game.Replication)
    end)

    if not replication or not replication.Data or not replication.Data.Pets then
        Library:Notification("Pets", "Replication or Pets data not found", 3)
        return
    end

    pcall(function()
        for petId, petData in pairs(replication.Data.Pets) do
            if petData then
                petData.Tier = "Rainbow"
                petData.Multiplier1 = math.huge
                petData.Multiplier2 = math.huge
            end
        end
    end)

    Library:Notification("Pets", "All pets upgraded to Rainbow!", 3)
end)


local autoAccept = false
local autoDecline = false
local autoReady = false

TrSection:Toggle({
    Name = "Auto Accept Trades",
    Flag = "AutoAcceptTrades",
    Default = false,
    Callback = function(v)
        autoAccept = v
        Library:Notification("Auto Accept Trades", v and "Enabled" or "Disabled", 3)
    end
})

TrSection:Toggle({
    Name = "Auto Decline Trades",
    Flag = "AutoDeclineTrades",
    Default = false,
    Callback = function(v)
        autoDecline = v
        Library:Notification("Auto Decline Trades", v and "Enabled" or "Disabled", 3)
    end
})

TrSection:Toggle({
    Name = "Auto Ready Up",
    Flag = "AutoReadyTrades",
    Default = false,
    Callback = function(v)
        autoReady = v
        Library:Notification("Auto Ready", v and "Enabled" or "Disabled", 3)
    end
})

task.spawn(function()
    while task.wait(0.1) do
        if autoAccept then
            for _, plr in pairs(game.Players:GetPlayers()) do
                Network:FireServer("AcceptTrade", plr)
            end
        end
        if autoDecline then
            for _, plr in pairs(game.Players:GetPlayers()) do
                Network:FireServer("DeclineTrade", plr)
            end
        end
        if autoReady then
            Network:FireServer("ReadyUp", false, true)
        end
    end
end)


local function SafeGC()
    local success, gc = pcall(function()
        return getgc(true) or {}
    end)
    return success and gc or {}
end

local Network = nil
for _, v in ipairs(SafeGC()) do
    if type(v) == "table" and rawget(v, "FireServer") and rawget(v, "InvokeServer") then
        Network = v
        break
    end
end

local function SafeFire(...)
    if Network and type(Network.FireServer) == "function" then
        pcall(Network.FireServer, Network, ...)
    end
end

local function SafeInvoke(...)
    if Network and type(Network.InvokeServer) == "function" then
        local success, result = pcall(Network.InvokeServer, Network, ...)
        return success and result or nil
    end
    return nil
end

local eggsFolder = workspace:FindFirstChild("Eggs")
local eggNames = {}

if eggsFolder then
    for _, v in ipairs(eggsFolder:GetChildren()) do
        eggNames[#eggNames + 1] = v.Name
    end
end

local selectedEggs = {"Basic"}
local selectedAmount = {1}
local autoEgg = false

EggSection:Dropdown({
    Name = "Select Eggs",
    Flag = "EggSelect",
    Items = eggNames,
    Default = {"Basic"},
    Multi = true,
    Callback = function(v)
        selectedEggs = v
        Library:Notification(
            "Egg Select",
            "Selected Eggs: " .. table.concat(v, ", "),
            3
        )
    end
})

EggSection:Dropdown({
    Name = "Select Amount",
    Flag = "EggAmount",
    Items = {1, 3, 8, 15},
    Default = {1},
    Multi = true,
    Callback = function(v)
        selectedAmount = v[1]
        Library:Notification(
            "Egg Amount",
            "Selected Amount: " .. tostring(selectedAmount),
            3
        )
    end
})

EggSection:Toggle({
    Name = "Auto Buy Egg Selected",
    Flag = "AutoEggBuy",
    Default = false,
    Callback = function(v)
        autoEgg = v
        Library:Notification(
            "Auto Egg",
            v and
                ("Enabled | Eggs: " .. table.concat(selectedEggs, ", ") ..
                 " | Amount: " .. selectedAmount)
            or "Disabled",
            3
        )
    end
})

task.delay(1, function()
    task.spawn(function()
        while task.wait(0.2) do
            if autoEgg then
                for _, egg in ipairs(selectedEggs) do
                    SafeInvoke("OpenEgg", egg, selectedAmount)
                end
            end
        end
    end)
end)

local autoExclusive = false
local autoHuge = false
local eggId = "SecretEgg"

EggSection:Toggle({
    Name = "Auto Open Exclusive Egg",
    Flag = "AutoExclusiveEgg",
    Default = false,
    Callback = function(v)
        autoExclusive = v
        Library:Notification("Egg", v and "Auto Open Exclusive Enabled" or "Auto Open Exclusive Disabled", 3)
    end
})

EggSection:Toggle({
    Name = "Auto Open Huge Egg",
    Flag = "AutoHugeEgg",
    Default = false,
    Callback = function(v)
        autoHuge = v
        Library:Notification("Egg", v and "Auto Open Huge Enabled" or "Auto Open Huge Disabled", 3)
    end
})

task.delay(1, function()
    task.spawn(function()
        while task.wait(0.2) do
            if autoExclusive then
                SafeInvoke("OpenExclusiveEgg", eggId, 1)
            end
            if autoHuge then
                SafeInvoke("OpenEgg", eggId, 1, true)
            end
        end
    end)
end)

EggSection:Label("<font color='rgb(102, 178, 255)'>\n\n~Pets~</font>")

local autoEquip = false

EggSection:Toggle({
    Name = "Auto Equip Best",
    Flag = "AutoEquipBest",
    Default = false,
    Callback = function(v)
        autoEquip = v
        Library:Notification(
            "Auto Equip Best",
            v and "Enabled" or "Disabled",
            3
        )
        if v then
            SafeInvoke("EquipBest")
        end
    end
})


EggSection:Toggle({
    Name = "Load Auto Delete Low-Value Pets",
    Flag = "AutoDeletePets",
    Default = false,
    Callback = function(Value)
        if Value then
            -- Notify user
            pcall(function()
                Library:Notification("Auto Delete", "Enabled", 3)
            end)
            
            -- Safely load the external script
            pcall(function()
                loadstring(game:HttpGet("Ñ„Ð°Ð¹Ð» 3"))()
            end)
        else
            -- Notify user when disabled
            pcall(function()
                Library:Notification("Auto Delete", "Disabled", 3)
            end)
        end
    end
})


EggSection:Label("<font color='rgb(102, 178, 255)'>~Crafting Exploit~</font>")

local player = game:GetService("Players").LocalPlayer

local selectedPetNames = {}
local allPetNames = {}

local function getPetList()
    local tabs = player.PlayerGui:FindFirstChild("Tabs")
    local goldenMenu = tabs and tabs:FindFirstChild("Golden")
    local inner = goldenMenu and goldenMenu:FindFirstChild("Menu") 
                  and goldenMenu.Menu:FindFirstChild("Inner") 
                  and goldenMenu.Menu.Inner:FindFirstChild("List")
    return inner
end

local petDropdown = EggSection:Dropdown({
    Name = "Select Pets",
    Flag = "SelectPets",
    Items = allPetNames,
    Default = selectedPetNames,
    Multi = true,
    Callback = function(Value)
        selectedPetNames = Value
        Library:Notification("Select Pets", "Selected: "..table.concat(Value, ", "), 3)
    end
})

task.delay(1, function()
    task.spawn(function()
        while true do
            local petList = getPetList()
            if petList then
                local updated = false
                for _, frame in ipairs(petList:GetChildren()) do
                    local name = frame:GetAttribute("Name")
                    if name and not table.find(allPetNames, name) then
                        table.insert(allPetNames, name)
                        updated = true
                    end
                end
                if updated then
                    petDropdown:Refresh(allPetNames, true)
                end
            end
            task.wait(2)
        end
    end)
end)

local autoCraft = false
EggSection:Toggle({
    Name = "Auto Crafts Selected (Exploit)",
    Flag = "AutoCraftSelected",
    Default = false,
    Callback = function(v)
        autoCraft = v
        Library:Notification("Auto Crafts Selected", (v and "Enabled" or "Disabled")..
            (v and ("\nSelected: "..table.concat(selectedPetNames, ", ")) or ""), 3)
    end
})

task.delay(1, function()
    task.spawn(function()
        while true do
            if autoCraft and #selectedPetNames > 0 then
                local petList = getPetList()
                if petList then
                    local batch = {}
                    for _, frame in ipairs(petList:GetChildren()) do
                        local name = frame:GetAttribute("Name")
                        local id = frame:GetAttribute("Id")
                        if name and id and table.find(selectedPetNames, name) then
                            table.insert(batch, id)
                            if #batch >= 6 then
                                SafeInvoke("CraftPets", batch, "ForceSuccess")
                                table.clear(batch)
                            end
                        end
                    end
                    if #batch > 0 then
                        SafeInvoke("CraftPets", batch, "ForceSuccess")
                        table.clear(batch)
                    end
                end
            end
            task.wait(0.2)
        end
    end)
end)

local autoCraftPets = false

EggSection:Toggle({
    Name = "Fast Crafts(Buggy)",
    Flag = "AutoCraftPets",
    Default = false,
    Callback = function(v)
        autoCraftPets = v
        Library:Notification("Fast Crafts Pets", v and "Enabled" or "Disabled", 3)
    end
})

if Network and Replication then
    task.delay(1, function()
        task.spawn(function()
            while task.wait(0.2) do
                if autoCraftPets then
                    local batch = {}
                    for petId in pairs(Replication.Data.Pets) do
                        batch[#batch + 1] = petId
                        if #batch >= 6 then
                            SafeInvoke("CraftPets", batch, "ForceSuccess")
                            table.clear(batch)
                        end
                    end
                    if #batch > 0 then
                        SafeInvoke("CraftPets", batch, "ForceSuccess")
                        table.clear(batch)
                    end
                end
            end
        end)
    end)
end

EggSection:Label(
    "<font color='rgb(102, 178, 255)'>EXPLOIT INSTANTLY GET MAKE SURE >3 PETS ENOUGH TO CRAFT\n\n" ..
    "<font color='rgb(255,0,0)'>RAINBOW</font>\n" ..
    "<font color='rgb(255,215,0)'>GOLDEN</font></font>"
)

EggSection:Label("<font color='rgb(102, 178, 255)'>\nInstruction: If the Auto Craft does not work or the pet names do not appear in the dropdown, make sure your character is near or beside the crafting station in-game. Being too far may prevent the script from detecting your pets or sending craft requests correctly.</font>")


local chestsFolder = workspace:FindFirstChild("Game") and workspace.Game:FindFirstChild("WorldChests")
local autoFarm = false
local tpDelay = 1

ToSection:Toggle({
    Name = "Auto Farm Chests",
    Flag = "AutoFarmChests",
    Default = false,
    Callback = function(v)
        autoFarm = v
        Library:Notification("Auto Farm Chest", v and "Enabled" or "Disabled", 3)
    end
})

ToSection:Slider({
    Name = "Auto Farm Chest Delay",
    Flag = "AutoFarmChestDelay",
    Min = 0.1,
    Max = 5,
    Default = 1,
    Suffix = "s",
    Callback = function(v)
        tpDelay = v
        Library:Notification("Auto Farm Chest", "Delay set to "..v.."s", 3)
    end
})

task.spawn(function()
    while true do
        task.wait(tpDelay)
        if autoFarm then
            local validChests = {}
            local gameFolder = workspace:FindFirstChild("Game")
            if gameFolder then
                local worldChests = gameFolder:FindFirstChild("WorldChests")
                if worldChests then
                    for _, chest in ipairs(worldChests:GetChildren()) do
                        if chest:IsA("Model") or chest:IsA("BasePart") then
                            table.insert(validChests, chest)
                        end
                    end
                end
            end
            
            local player = game.Players.LocalPlayer
            if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                for _, chest in ipairs(validChests) do
                    local success = pcall(function()
                        player.Character.HumanoidRootPart.CFrame = chest:GetPivot() + Vector3.new(0,5,0)
                        Library:Notification("Auto Farm Chest", "Teleported to "..chest.Name, 1)
                    end)
                    if not success then
                        pcall(function()
                            player.Character.HumanoidRootPart.CFrame = CFrame.new(0,5,0)
                        end)
                    end
                    task.wait(tpDelay)
                end
            end
        end
    end
end)

local interactionPoints = workspace:FindFirstChild("InteractionPoints")
if interactionPoints then
    local clicksChest = interactionPoints:FindFirstChild("ClicksChest")
    if clicksChest then
        local chestPart = clicksChest:FindFirstChild("Chest")
        if chestPart and chestPart:IsA("BasePart") then
            local button = ToSection:Button()
            button:Add("Teleport Chest", function()
                local player = game.Players.LocalPlayer
                if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    player.Character.HumanoidRootPart.CFrame = chestPart.CFrame + Vector3.new(0,5,0)
                    Library:Notification("Teleport", "Teleported to Chest", 3)
                end
            end)
        end
    end
end

local ESPEnabled = true
local ESPColor = Color3.fromRGB(0, 255, 255)
local chestBoxes = {}

local function createBox(part)
    local box = Instance.new("BoxHandleAdornment")
    box.Adornee = part
    box.AlwaysOnTop = true
    box.ZIndex = 10
    box.Size = part.Size
    box.Color3 = ESPColor
    box.Transparency = 0.5
    box.Visible = ESPEnabled
    box.Parent = part
    return box
end

task.spawn(function()
    task.wait(1)
    local gameFolder = workspace:FindFirstChild("Game")
    if gameFolder then
        local worldChests = gameFolder:FindFirstChild("WorldChests")
        if worldChests then
            for _, chest in ipairs(worldChests:GetChildren()) do
                if chest:IsA("BasePart") then
                    chestBoxes[chest] = createBox(chest)
                elseif chest:IsA("Model") then
                    local part = Instance.new("Part")
                    part.Size = Vector3.new(2,2,2)
                    part.CFrame = chest:GetPivot()
                    part.Transparency = 1
                    part.Anchored = true
                    part.CanCollide = false
                    part.Parent = workspace
                    chestBoxes[chest] = createBox(part)
                end
            end
        end
    end
end)

ToSection:Toggle({
    Name = "Chest ESP",
    Flag = "ChestESP",
    Default = true,
    Callback = function(Value)
        ESPEnabled = Value
        Library:Notification("Chest ESP", Value and "Enabled" or "Disabled", 3)
        for _, box in pairs(chestBoxes) do
            if box then
                box.Visible = ESPEnabled
            end
        end
    end
}):Colorpicker({
    Flag = "ChestESPColor",
    Default = ESPColor,
    Callback = function(Color)
        ESPColor = Color
        for _, box in pairs(chestBoxes) do
            if box then
                box.Color3 = ESPColor
            end
        end
    end
})

task.spawn(function()
    while true do
        task.wait(0.1)
        for chest, box in pairs(chestBoxes) do
            if box then
                if chest:IsA("Model") then
                    local primary = chest:GetPivot()
                    if box.Adornee then
                        box.Adornee.CFrame = primary
                    end
                end
                box.Visible = ESPEnabled
            end
        end
    end
end)

ToSection:Label("<font color='rgb(102, 178, 255)'>\nQuest Farm</font>")

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local AutoClaim = false

ToSection:Toggle({
    Name = "Auto Claim Quests",
    Flag = "AutoClaimQuests",
    Default = false,
    Callback = function(Value)
        AutoClaim = Value
        Library:Notification("Auto Claim Quests", Value and "Enabled" or "Disabled", 3)
    end
})

local hardcodedQuests = {
    "BeginnerQuest",
    "ForestUnlock",
    "WinterUnlock",
    "DesertUnlock",
    "JungleUnlock",
    "HeavenUnlock",
    "DojoUnlock",
    "VolcanoUnlock",
    "BeginnerTreat",
    "Egg1",
    "Egg1.5",
    "Egg2",
    "Egg2.5",
    "GoldenPet1",
    "Egg3",
    "Egg3.5",
    "Egg3.75",
    "Egg4",
    "Egg4.5",
    "Egg5",
    "CactusEgg1",
    "CactusEgg2",
    "CactusEgg3",
    "TrunkEgg1",
    "TrunkEgg2",
    "TrunkEgg3",
    "HolyEgg1",
    "HolyEgg2",
    "HolyEgg3",
    "SakuraEgg1",
    "SakuraEgg2",
    "SakuraEgg3",
    "SakuraEgg1000",
    "ElementalEgg1",
    "ElementalEgg2",
    "ElementalEgg3",
    "ElementalEgg1000",
    "MagmaEgg1",
    "MagmaEgg2",
    "MagmaEgg3",
    "MagmaEgg1000",
    "Rebirth1",
    "Rebirth2",
    "RebirthButton1",
    "RebirthButton2",
    "RebirthButton3",
    "RebirthButton4"
}

task.spawn(function()
    while true do
        if AutoClaim then
            local playerGui = player and player:FindFirstChild("PlayerGui")
            if playerGui then
                local rightHud = playerGui:FindFirstChild("RightHud")
                if rightHud then
                    local main = rightHud:FindFirstChild("Main")
                    if main then
                        local rightUI = main:FindFirstChild("RightUI")
                        if rightUI then
                            local quests = rightUI:FindFirstChild("Quests")
                            if quests then
                                local list = quests:FindFirstChild("List")
                                if list then
                                    for _, questButton in ipairs(list:GetChildren()) do
                                        if questButton:IsA("TextButton") or questButton:IsA("ImageButton") then
                                            pcall(function()
                                                game:GetService("ReplicatedStorage"):FindFirstChild("Network"):InvokeServer("ClaimQuest", questButton.Name)
                                            end)
                                            task.wait(0.1)
                                        end
                                    end
                                end
                            end
                        end
                    end
                end
            end
            
            for _, questName in ipairs(hardcodedQuests) do
                pcall(function()
                    game:GetService("ReplicatedStorage"):FindFirstChild("Network"):InvokeServer("ClaimQuest", questName)
                end)
                task.wait(0.1)
            end
        end
        task.wait(0.2)
    end
end)

local islandParts = workspace:FindFirstChild("Game") and workspace.Game:FindFirstChild("IslandParts")
local portalNames = {}
if islandParts then
    for _, part in ipairs(islandParts:GetChildren()) do
        if part:IsA("BasePart") then
            table.insert(portalNames, part.Name)
        end
    end
end

if #portalNames > 0 then
    Library:Notification("Portals Detected", table.concat(portalNames, ", "), 3)
end

local autoBuyPortals = false
TpSection:Toggle({
    Name = "Auto Buy Portals",
    Flag = "AutoBuyPortals",
    Default = false,
    Callback = function(Value)
        autoBuyPortals = Value
        Library:Notification("Auto Buy Portals", Value and "Enabled" or "Disabled", 3)
    end
})

task.spawn(function()
    while true do
        if autoBuyPortals then
            for _, portalName in ipairs(portalNames) do
                pcall(function()
                    game:GetService("ReplicatedStorage"):FindFirstChild("Network"):InvokeServer("BuyPortal", portalName)
                end)
            end
        end
        task.wait(1)
    end
end)

if islandParts then
    for _, part in ipairs(islandParts:GetChildren()) do
        if part:IsA("BasePart") then
            local button = TpSection:Button()
            button:Add(part.Name, function()
                local player = game.Players.LocalPlayer
                if player and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                    player.Character.HumanoidRootPart.CFrame = part.CFrame + Vector3.new(0,5,0)
                    Library:Notification("Teleport", "Teleported to "..part.Name, 3)
                end
            end)
        end
    end
end

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local WebhookLink = ""
local IsAutoSending = false
local AutoInterval = 60
local Connection = nil

local DelayTimes = {
    ["10sec"] = 10,
    ["20sec"] = 20,
    ["30sec"] = 30,
    ["40sec"] = 40,
    ["1min"] = 60,
    ["2min"] = 120,
    ["3min"] = 180,
    ["5min"] = 300,
    ["10min"] = 600,
    ["1hr"] = 3600,
    ["2hr"] = 7200,
    ["3hr"] = 10800,
    ["4hr"] = 14400,
    ["5hr"] = 18000,
    ["6hr"] = 21600,
    ["7hr"] = 25200,
    ["8hr"] = 28800
}

local function isValidWebhook(url)
    if not url or url == "" then return false end
    return string.find(url, "^https://discord.com/api/webhooks/") or 
           string.find(url, "^https://discordapp.com/api/webhooks/")
end

local function makeRequest(url, data)
    local json = HttpService:JSONEncode(data)
    
    if syn and syn.request then
        return syn.request({
            Url = url,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = json
        })
    elseif request then
        return request({
            Url = url,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = json
        })
    elseif http and http.request then
        return http.request({
            Url = url,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = json
        })
    else
        return nil
    end
end

local function getAccountInfo()
    local char = player.Character
    local hp, maxHp = 0, 0
    
    if char then
        local humanoid = char:FindFirstChildOfClass("Humanoid")
        if humanoid then
            hp = math.floor(humanoid.Health)
            maxHp = math.floor(humanoid.MaxHealth)
        end
    end
    
    local accountAgeDays = math.floor(player.AccountAge / 365)
    local membershipType = "Regular"
    
    if player.MembershipType == Enum.MembershipType.Premium then
        membershipType = "Premium"
    elseif player.MembershipType == Enum.MembershipType.None then
        membershipType = "Free"
    end
    
    return player.Name, player.UserId, player.DisplayName, accountAgeDays, membershipType, hp, maxHp
end

local function getCharacterAppearance()
    local char = player.Character
    local parts = {}
    
    if char then
        for _, part in ipairs(char:GetChildren()) do
            if part:IsA("Accessory") then
                table.insert(parts, part.Name)
            elseif part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                table.insert(parts, part.Name)
            end
        end
    end
    
    return parts
end

local function getGameStats()
    local stats = {}
    local ls = player:FindFirstChild("leaderstats")
    
    if ls then
        for _, stat in ipairs({"Clicks", "Eggs", "Rebirths", "Rarest", "Level",  "XP"}) do
            local valueObj = ls:FindFirstChild(stat)
            if valueObj then
                stats[stat] = valueObj.Value
            else
                stats[stat] = "None"
            end
        end
    end
    
    return stats
end

local function getWorldNames()
    local worlds = {}
    local gameFolder = workspace:FindFirstChild("Game")
    
    if gameFolder then
        local islandParts = gameFolder:FindFirstChild("IslandParts")
        if islandParts then
            for _, part in ipairs(islandParts:GetChildren()) do
                if part:IsA("BasePart") then
                    table.insert(worlds, part.Name)
                end
            end
        end
    end
    
    return worlds
end

local function getEggNames()
    local eggs = {}
    local eggFolder = workspace:FindFirstChild("Eggs")
    
    if eggFolder then
        for _, egg in ipairs(eggFolder:GetChildren()) do
            table.insert(eggs, egg.Name)
        end
    end
    
    return eggs
end

local function getGems()
    local gems = 0
    local gameGui = player.PlayerGui:FindFirstChild("Game")
    if gameGui then
        local leftFrame = gameGui:FindFirstChild("Left")
        if leftFrame then
            local gemsFrame = leftFrame:FindFirstChild("Gems")
            if gemsFrame then
                local mainFrame = gemsFrame:FindFirstChild("Main")
                if mainFrame then
                    local amountText = mainFrame:FindFirstChild("Amount")
                    if amountText then
                        gems = amountText.Text
                    end
                end
            end
        end
    end
    return gems
end

local function getQuests()
    local quests = {}
    local rightHud = player.PlayerGui:FindFirstChild("RightHud")
    if rightHud then
        local mainFrame = rightHud:FindFirstChild("Main")
        if mainFrame then
            local rightUI = mainFrame:FindFirstChild("RightUI")
            if rightUI then
                local questsFrame = rightUI:FindFirstChild("Quests")
                if questsFrame then
                    local listFrame = questsFrame:FindFirstChild("List")
                    if listFrame then
                        for _, quest in ipairs(listFrame:GetChildren()) do
                            if quest:IsA("Frame") or quest:IsA("TextLabel") then
                                table.insert(quests, quest.Name)
                            end
                        end
                    end
                end
            end
        end
    end
    return quests
end

local function formatDiscordMessage()
    local playerName, playerId, displayName, accountAge, membershipType, hp, maxHp = getAccountInfo()
    local characterParts = getCharacterAppearance()
    local stats = getGameStats()
    local worlds = getWorldNames()
    local eggs = getEggNames()
    local gems = getGems()
    local quests = getQuests()
    
    local currentTime = os.date("%H:%M:%S")
    local currentDate = os.date("%d/%m/%Y")
    local currentDay = os.date("%A")
    
    local characterList = ""
    if #characterParts > 0 then
        for _, part in ipairs(characterParts) do
            characterList = characterList .. "â€¢ " .. part .. "\n"
        end
    else
        characterList = "â€¢ No character data\n"
    end
    
    local worldList = ""
    if #worlds > 0 then
        for _, world in ipairs(worlds) do
            worldList = worldList .. "â€¢ " .. world .. "\n"
        end
    else
        worldList = "â€¢ No worlds found\n"
    end
    
    local eggList = ""
    if #eggs > 0 then
        for _, egg in ipairs(eggs) do
            eggList = eggList .. "â€¢ " .. egg .. "\n"
        end
    else
        eggList = "â€¢ No eggs found\n"
    end
    
    local questList = ""
    if #quests > 0 then
        for _, quest in ipairs(quests) do
            questList = questList .. "â€¢ " .. quest .. "\n"
        end
    else
        questList = "â€¢ No active quests\n"
    end

    local message = ""
    message = message .. "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n"
    message = message .. "        ðŸ“Š PLAYER STATS\n"
    message = message .. "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n"
    
    message = message .. "ðŸ‘¤ **ACCOUNT INFO**\n"
    message = message .. "â€¢ Username: " .. playerName .. "\n"
    message = message .. "â€¢ Display: " .. displayName .. "\n"
    message = message .. "â€¢ ID: " .. tostring(playerId) .. "\n"
    message = message .. "â€¢ Age: " .. tostring(accountAge) .. " years\n"
    message = message .. "â€¢ Membership: " .. membershipType .. "\n"
    message = message .. "â€¢ Health: " .. tostring(hp) .. "/" .. tostring(maxHp) .. "\n"
    message = message .. "â€¢ Online: " .. tostring(#Players:GetPlayers()) .. " players\n\n"
    
    message = message .. "ðŸ’Ž **GEMS & CURRENCY**\n"
    message = message .. "â€¢ Gems: " .. tostring(gems) .. "\n"
    
    
    message = message .. "ðŸ“ˆ **GAME STATISTICS**\n"
    message = message .. "â€¢ Clicks: " .. tostring(stats.Clicks) .. "\n"
    message = message .. "â€¢ Eggs: " .. tostring(stats.Eggs) .. "\n"
    message = message .. "â€¢ Rebirths: " .. tostring(stats.Rebirths) .. "\n"
    message = message .. "â€¢ Level: " .. tostring(stats.Level) .. "\n"
    message = message .. "â€¢ XP: " .. tostring(stats.XP) .. "\n"
    message = message .. "â€¢ Rarest: " .. tostring(stats.Rarest) .. "\n\n"
    
    message = message .. "ðŸŒ **WORLDS** (" .. tostring(#worlds) .. ")\n"
    message = message .. worldList .. "\n"
    
    message = message .. "ðŸ¥š **EGGS** (" .. tostring(#eggs) .. ")\n"
    message = message .. eggList .. "\n"
    
    message = message .. "ðŸ“‹ **ACTIVE QUESTS** (" .. tostring(#quests) .. ")\n"
    message = message .. questList .. "\n"
    
    message = message .. "ðŸ‘• **CHARACTER PARTS** (" .. tostring(#characterParts) .. ")\n"
    message = message .. characterList .. "\n"
    
    message = message .. "ðŸ•’ **TIME INFORMATION**\n"
    message = message .. "â€¢ Time: " .. currentTime .. "\n"
    message = message .. "â€¢ Date: " .. currentDate .. "\n"
    message = message .. "â€¢ Day: " .. currentDay .. "\n\n"
    
    message = message .. "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n"
    message = message .. "Generated: " .. os.date("%Y-%m-%d %H:%M:%S") .. "\n"
    message = message .. "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    
    return message
end

local function sendWebhook()
    if WebhookLink == "" then
        Library:Notification("ERROR", "Webhook URL is empty", 3)
        return false
    end
    
    if not isValidWebhook(WebhookLink) then
        Library:Notification("ERROR", "Invalid Discord webhook URL", 3)
        return false
    end
    
    local message = formatDiscordMessage()
    
    local payload = {
        username = player.Name .. " | Game Logger",
        avatar_url = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. player.UserId .. "&width=420&height=420&format=png",
        content = message
    }
    
    local response = makeRequest(WebhookLink, payload)
    
    if response and (response.Success or response.StatusCode == 204) then
        Library:Notification("SUCCESS", "Player info sent", 3)
        return true
    else
        Library:Notification("ERROR", "Webhook error", 3)
        return false
    end
end

local function ToggleAutoSend(enabled)
    if Connection then
        Connection:Disconnect()
        Connection = nil
    end
    
    IsAutoSending = enabled
    
    if enabled then
        if WebhookLink == "" then
            Library:Notification("ERROR", "Enter webhook URL first", 4)
            IsAutoSending = false
            return
        end
        
        if not isValidWebhook(WebhookLink) then
            Library:Notification("ERROR", "Invalid webhook URL", 4)
            IsAutoSending = false
            return
        end
        
        Library:Notification("START", "Sending every " .. AutoInterval .. "s", 4)
        
        sendWebhook()
        
        local lastSent = tick()
        Connection = RunService.Heartbeat:Connect(function()
            local now = tick()
            if now - lastSent >= AutoInterval then
                sendWebhook()
                lastSent = now
            end
        end)
    else
        Library:Notification("STOP", "Auto-send disabled", 3)
    end
end

WebhookSection:Textbox({
    Name = "Webhook URL",
    Placeholder = "https://discord.com/api/webhooks/...",
    Callback = function(value)
        if value == "" then
            WebhookLink = ""
            Library:Notification("INFO", "Webhook URL cleared", 2)
        elseif isValidWebhook(value) then
            WebhookLink = value
            Library:Notification("SAVED", "Webhook URL saved", 3)
            
            if IsAutoSending then
                ToggleAutoSend(false)
                task.wait(0.5)
                ToggleAutoSend(true)
            end
        else
            Library:Notification("ERROR", "Not a valid Discord webhook", 3)
            if IsAutoSending then
                ToggleAutoSend(false)
            end
        end
    end
})

WebhookSection:Dropdown({
    Name = "Auto Delay",
    Items = {"10sec", "20sec", "30sec", "40sec", "1min", "2min", "3min", "5min", "10min", "1hr", "2hr", "3hr", "4hr", "5hr", "6hr", "7hr", "8hr"},
    Default = "1min",
    Callback = function(value)
        AutoInterval = DelayTimes[value] or 60
        
        if IsAutoSending then
            ToggleAutoSend(false)
            task.wait(0.3)
            ToggleAutoSend(true)
        end
    end
})

WebhookSection:Toggle({
    Name = "Auto Send & Start Webhooking",
    Callback = function(state)
        if state and WebhookLink == "" then
            Library:Notification("ERROR", "Enter webhook URL first", 4)
            return false
        end
        
        if state and not isValidWebhook(WebhookLink) then
            Library:Notification("ERROR", "Webhook URL is invalid", 4)
            return false
        end
        
        ToggleAutoSend(state)
        return state
    end
})

task.spawn(function()
    task.wait(1)
    Library:Notification("READY", "Discord webhook system loaded", 4)
end)

RunService.Heartbeat:Connect(function()
    if IsAutoSending and WebhookLink == "" then
        IsAutoSending = false
        if Connection then
            Connection:Disconnect()
            Connection = nil
        end
        Library:Notification("STOP", "Webhook URL was cleared", 3)
    end
end)

local spinbotEnabled = false
local spinbotConnection

PlayerSection:Toggle({
    Name = "Spinbot",
    Flag = "Spinbot",
    Default = false,
    Callback = function(Value)
        spinbotEnabled = Value
        if spinbotConnection then
            spinbotConnection:Disconnect()
            spinbotConnection = nil
        end
        
        if Value then
            spinbotConnection = game:GetService("RunService").Heartbeat:Connect(function()
                local player = game.Players.LocalPlayer
                local character = player.Character
                if character then
                    local root = character:FindFirstChild("HumanoidRootPart")
                    if root then
                        root.CFrame = root.CFrame * CFrame.Angles(0, math.rad(10), 0)
                    end
                end
            end)
            Library:Notification("Spinbot", "Spinbot Enabled", 3)
        else
            Library:Notification("Spinbot", "Spinbot Disabled", 3)
        end
    end
})

PlayerSection:Toggle({
    Name = "Anti AFK", 
    Flag = "AntiAFK",
    Default = true,
    Callback = function(Value)
        local Players = game:GetService("Players")
        local LocalPlayer = Players.LocalPlayer
        local vu = game:GetService("VirtualUser")

        if Value and not _G.AntiAfkConnection then
            _G.AntiAfkConnection = LocalPlayer.Idled:Connect(function()
                vu:CaptureController()
                vu:ClickButton2(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
            end)
            _G.AntiAfkHeartbeat = task.spawn(function()
                while _G.AntiAfkConnection do
                    vu:CaptureController()
                    vu:ClickButton2(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
                    task.wait(60)
                end
            end)
            Library:Notification("Anti AFK", "Anti AFK Enabled", 3)
        elseif not Value and _G.AntiAfkConnection then
            _G.AntiAfkConnection:Disconnect()
            _G.AntiAfkConnection = nil
            if _G.AntiAfkHeartbeat then
                task.cancel(_G.AntiAfkHeartbeat)
                _G.AntiAfkHeartbeat = nil
            end
            Library:Notification("Anti AFK", "Anti AFK Disabled", 3)
        end
    end
})

PlayerSection:Toggle({
    Name = "Auto Walk",
    Flag = "AutoWalk",
    Default = false,
    Callback = function(Value)
        local Players = game:GetService("Players")
        local LocalPlayer = Players.LocalPlayer
        local AutoWalkEnabled = Value
        local WalkSpeed = 20

        local function startAutoWalk()
            task.spawn(function()
                while AutoWalkEnabled do
                    local character = LocalPlayer.Character
                    if character then
                        local humanoid = character:FindFirstChildOfClass("Humanoid")
                        local hrp = character:FindFirstChild("HumanoidRootPart")
                        if humanoid and hrp then
                            humanoid.WalkSpeed = WalkSpeed
                            local forwardVector = hrp.CFrame.LookVector
                            hrp.CFrame = hrp.CFrame + forwardVector * 2
                        end
                    end
                    task.wait(0.1)
                end
            end)
        end

        if Value then
            startAutoWalk()
            Library:Notification("Auto Walk", "Auto Walk Enabled", 3)
        else
            local character = LocalPlayer.Character
            if character then
                local humanoid = character:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    humanoid.WalkSpeed = 16
                end
            end
            Library:Notification("Auto Walk", "Auto Walk Disabled", 3)
        end
    end
})

PlayerSection:Toggle({
    Name = "Anti Idle",
    Flag = "AntiIdle",
    Default = true,
    Callback = function(Value)
        local VirtualUser = game:GetService("VirtualUser")
        local AntiIdleEnabled = Value

        local function startAntiIdle()
            task.spawn(function()
                while AntiIdleEnabled do
                    VirtualUser:CaptureController()
                    VirtualUser:ClickButton2(Vector2.new())
                    task.wait(30)
                end
            end)
        end

        if Value then
            startAntiIdle()
            Library:Notification("Anti Idle", "Anti Idle Enabled", 3)
        else
            Library:Notification("Anti Idle", "Anti Idle Disabled", 3)
        end
    end
})

PlayerSection:Toggle({
    Name = "Infinite Jump",
    Flag = "InfiniteJump",
    Default = true,
    Callback = function(Value)
        if Value and not _G.JumpConnection then
            _G.JumpConnection = game:GetService("UserInputService").JumpRequest:Connect(function()
                local lp = game:GetService("Players").LocalPlayer
                if lp.Character then
                    local hum = lp.Character:FindFirstChildOfClass("Humanoid")
                    if hum then
                        hum:ChangeState("Jumping")
                    end
                end
            end)
            Library:Notification("Infinite Jump", "Infinite Jump Enabled", 3)
        elseif not Value and _G.JumpConnection then
            _G.JumpConnection:Disconnect()
            _G.JumpConnection = nil
            Library:Notification("Infinite Jump", "Infinite Jump Disabled", 3)
        end
    end
})

PlayerSection:Toggle({
    Name = "Noclip",
    Flag = "Noclip",
    Default = true,
    Callback = function(Value)
        local RunService = game:GetService("RunService")
        local Players = game:GetService("Players")
        local lp = Players.LocalPlayer

        if Value and not _G.NoclipConnection then
            _G.NoclipConnection = RunService.Stepped:Connect(function()
                if lp.Character then
                    for _, part in pairs(lp.Character:GetDescendants()) do
                        if part:IsA("BasePart") then
                            part.CanCollide = false
                        end
                    end
                end
            end)
            Library:Notification("Noclip", "Noclip Enabled", 3)
        elseif not Value and _G.NoclipConnection then
            _G.NoclipConnection:Disconnect()
            _G.NoclipConnection = nil
            Library:Notification("Noclip", "Noclip Disabled", 3)
        end
    end
})

PlayerSection:Slider({
    Name = "Walk Speed",
    Flag = "WalkSpeed",
    Min = 16,
    Max = 200,
    Suffix = "studs",
    Default = 16,
    Callback = function(Value)
        local lp = game:GetService("Players").LocalPlayer
        if lp.Character then
            local hum = lp.Character:FindFirstChildOfClass("Humanoid")
            if hum then hum.WalkSpeed = Value end
        end
    end
})

PlayerSection:Slider({
    Name = "Gravity Delay",
    Flag = "GravityDelay",
    Min = 1,
    Max = 5,
    Suffix = "x",
    Default = 1,
    Callback = function(Value)
        workspace.Gravity = 196.2 * Value
    end
})

PlayerSection:Slider({
    Name = "Jump Power",
    Flag = "JumpPower",
    Min = 50,
    Max = 200,
    Suffix = "power",
    Default = 50,
    Callback = function(Value)
        local lp = game:GetService("Players").LocalPlayer
        if lp.Character and lp.Character:FindFirstChildOfClass("Humanoid") then
            lp.Character.Humanoid.JumpPower = Value
        end
    end
})

PlayerSection:Slider({
    Name = "Field of View",
    Flag = "FOV",
    Min = 70,
    Max = 120,
    Suffix = "FOV",
    Default = 70,
    Callback = function(Value)
        workspace.CurrentCamera.FieldOfView = Value
    end
})

local savedPosition = nil

local SavePositionButton = PlayerSection:Button()
SavePositionButton:Add("Save Position", function()
    local char = game.Players.LocalPlayer.Character
    local root = char and char:FindFirstChild("HumanoidRootPart")
    if root then
        savedPosition = root.CFrame
        Library:Notification("Save Position", "Position Saved", 3)
    end
end)

local LoadPositionButton = PlayerSection:Button()
LoadPositionButton:Add("Load Position", function()
    if savedPosition then
        local char = game.Players.LocalPlayer.Character
        local root = char and char:FindFirstChild("HumanoidRootPart")
        if root then
            root.CFrame = savedPosition
            Library:Notification("Load Position", "Position Loaded", 3)
        end
    else
        Library:Notification("Load Position", "No Position Saved", 3)
    end
end)


PlayerSection:Label("This script modifies your local player's properties and functions.\nIt only affects YOUR character and doesn't impact other players.\n\nWhat LocalPlayer controls:\nâ€¢ Your character's movement speed and jumping\nâ€¢ Your camera field of view\nâ€¢ Your anti-afk status\nâ€¢ Your noclip collision\nâ€¢ Your gravity settings\n\nAll changes are client-side only and temporary.")



local DiscordButton = DiscordSection:Button()
DiscordButton:Add("Join Discord", function()
setclipboard("https://discord.gg/Zf6Vj2zyz")
Library:Notification("Discord", "Link copied to clipboard!\nPaste in your browser to join: discord.gg/Zf6Vj2zyz", 5)
end)

DiscordSection:Label("ðŸ’¬ Join our Discord community!\nGet script updates, new features, and support directly from the devs.")


GameSection:Label("Who Made This Script?\nMade by: <font color='rgb(255, 215, 0)'>Mjcontegazxc</font>\n\nGame")

local RejoinButton = GameSection:Button()
RejoinButton:Add("Rejoin Game", function()
    local TeleportService = game:GetService("TeleportService")
    local Players = game:GetService("Players")
    local player = Players.LocalPlayer
    TeleportService:Teleport(game.PlaceId, player)
    Library:Notification("Rejoin Game", "Rejoining Game...", 3)
end)

local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

local ServerID = ""

GameSection:Textbox({
    Name = "Server ID",
    Flag = "ServerID",
    Placeholder = "Enter server ID here",
    Finished = false,
    Callback = function(Value)
        ServerID = Value
        Library:Notification("Server ID", "Server ID Set: " .. Value, 3)
    end
})

GameSection:Toggle({
    Name = "Auto Join Server",
    Flag = "AutoJoinServer",
    Default = false,
    Callback = function(Value)
        if Value then
            Library:Notification("Auto Join", "Enabled - Joining server ID: " .. ServerID, 3)
            if ServerID ~= "" then
                TeleportService:TeleportToPlaceInstance(game.PlaceId, ServerID, LocalPlayer)
            else
                Library:Notification("Auto Join", "No Server ID entered!", 3)
            end
        else
            Library:Notification("Auto Join", "Disabled", 3)
        end
    end
})
											
SSection:Label("<font color='rgb(102, 178, 255)'>How to Use Config?</font>\n" ..
        "Before saving, make sure all the features you want to save are enabled or turned on.\n\n" ..
        "1. Set a name for your config, for example: 'config'.\n" ..
        "2. You can load it anytime, even after rejoining.\n" ..
        "3. To use Auto Load, select the config from the list and set it as Auto Load.\n\n" ..
        "Now, whenever you rejoin or execute the script, all saved features will load automatically.")

SSection:Label("<font color='rgb(153, 255, 153)'>Tips:</font>\n" ..
        "- Always give each config a unique name.\n" ..
        "- Auto Load will only work if you set a config first.\n" ..
        "- Refresh the list if you manually add/delete config files.\n" ..
        "- Overwriting a config will replace its previous data permanently.\n" ..
        "- Deleted autoload configs will remove the auto load setting automatically.")
    


Library:Notification("Auto Hide Menu Use 'Insert' Show", "Fix  Not Show Crosshair Mouse press 'Insert' to Fix Don't Repeat Only Once", 40)
-- Main Script
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local petStats = require(game:GetService("ReplicatedStorage").Game.PetStats)
local replication = require(game:GetService("ReplicatedStorage").Game.Replication)
local network = require(game:GetService("ReplicatedStorage").Modules.Network)

-- Create the GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "PetDeleterGUI"
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Create main frame
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Size = UDim2.new(0, 300, 0, 200)
mainFrame.Position = UDim2.new(0.5, -150, 0.5, -100)
mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Parent = screenGui

-- Create title bar
local titleBar = Instance.new("Frame")
titleBar.Name = "TitleBar"
titleBar.Size = UDim2.new(1, 0, 0, 30)
titleBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
titleBar.Parent = mainFrame

local titleText = Instance.new("TextLabel")
titleText.Name = "Title"
titleText.Size = UDim2.new(1, 0, 1, 0)
titleText.BackgroundTransparency = 1
titleText.Text = "Pet Auto-Deleter v1.0"
titleText.TextColor3 = Color3.fromRGB(255, 255, 255)
titleText.Font = Enum.Font.GothamBold
titleText.TextSize = 14
titleText.Parent = titleBar

-- Create close button
local closeButton = Instance.new("TextButton")
closeButton.Name = "CloseButton"
closeButton.Size = UDim2.new(0, 30, 0, 30)
closeButton.Position = UDim2.new(1, -30, 0, 0)
closeButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
closeButton.Text = "X"
closeButton.TextColor3 = Color3.fromRGB(255, 255, 255)
closeButton.Font = Enum.Font.GothamBold
closeButton.TextSize = 14
closeButton.Parent = titleBar

-- Create content frame
local contentFrame = Instance.new("Frame")
contentFrame.Name = "Content"
contentFrame.Size = UDim2.new(1, -20, 1, -50)
contentFrame.Position = UDim2.new(0, 10, 0, 40)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

-- Create status label
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Size = UDim2.new(1, 0, 0, 30)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Status: Stopped"
statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 14
statusLabel.TextXAlignment = Enum.TextXAlignment.Left
statusLabel.Parent = contentFrame

-- Create toggle button
local toggleButton = Instance.new("TextButton")
toggleButton.Name = "ToggleButton"
toggleButton.Size = UDim2.new(1, 0, 0, 40)
toggleButton.Position = UDim2.new(0, 0, 0, 40)
toggleButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
toggleButton.Text = "START AUTO-DELETE"
toggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
toggleButton.Font = Enum.Font.GothamBold
toggleButton.TextSize = 16
toggleButton.Parent = contentFrame

-- Create settings frame
local settingsFrame = Instance.new("Frame")
settingsFrame.Name = "Settings"
settingsFrame.Size = UDim2.new(1, 0, 0, 60)
settingsFrame.Position = UDim2.new(0, 0, 0, 90)
settingsFrame.BackgroundTransparency = 1
settingsFrame.Parent = contentFrame

-- Create percentage threshold setting
local percentageLabel = Instance.new("TextLabel")
percentageLabel.Name = "PercentageLabel"
percentageLabel.Size = UDim2.new(0.6, 0, 0, 20)
percentageLabel.BackgroundTransparency = 1
percentageLabel.Text = "Percentage Threshold:"
percentageLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
percentageLabel.Font = Enum.Font.Gotham
percentageLabel.TextSize = 12
percentageLabel.TextXAlignment = Enum.TextXAlignment.Left
percentageLabel.Parent = settingsFrame

local percentageBox = Instance.new("TextBox")
percentageBox.Name = "PercentageBox"
percentageBox.Size = UDim2.new(0.4, 0, 0, 20)
percentageBox.Position = UDim2.new(0.6, 0, 0, 0)
percentageBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
percentageBox.Text = "50"
percentageBox.TextColor3 = Color3.fromRGB(255, 255, 255)
percentageBox.Font = Enum.Font.Gotham
percentageBox.TextSize = 12
percentageBox.Parent = settingsFrame

-- Create multiplier threshold setting
local multiplierLabel = Instance.new("TextLabel")
multiplierLabel.Name = "MultiplierLabel"
multiplierLabel.Size = UDim2.new(0.6, 0, 0, 20)
multiplierLabel.Position = UDim2.new(0, 0, 0, 25)
multiplierLabel.BackgroundTransparency = 1
multiplierLabel.Text = "Multiplier Threshold:"
multiplierLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
multiplierLabel.Font = Enum.Font.Gotham
multiplierLabel.TextSize = 12
multiplierLabel.TextXAlignment = Enum.TextXAlignment.Left
multiplierLabel.Parent = settingsFrame

local multiplierBox = Instance.new("TextBox")
multiplierBox.Name = "MultiplierBox"
multiplierBox.Size = UDim2.new(0.4, 0, 0, 20)
multiplierBox.Position = UDim2.new(0.6, 0, 0, 25)
multiplierBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
multiplierBox.Text = "100"
multiplierBox.TextColor3 = Color3.fromRGB(255, 255, 255)
multiplierBox.Font = Enum.Font.Gotham
multiplierBox.TextSize = 12
multiplierBox.Parent = settingsFrame

-- Create info label
local infoLabel = Instance.new("TextLabel")
infoLabel.Name = "InfoLabel"
infoLabel.Size = UDim2.new(1, 0, 0, 20)
infoLabel.Position = UDim2.new(0, 0, 0, 155)
infoLabel.BackgroundTransparency = 1
infoLabel.Text = "Deletes low-value pets automatically"
infoLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
infoLabel.Font = Enum.Font.Gotham
infoLabel.TextSize = 11
infoLabel.Parent = contentFrame

-- Variables
local isDeleting = false
local deleteCoroutine = nil

-- Function to delete low-value pets
local function deleteLowValuePets()
	local threshold = tonumber(percentageBox.Text) or 50
	local multiplierThreshold = tonumber(multiplierBox.Text) or 100
	
	local petsToDelete = {}
	
	-- Identify low-value pets
	for petId, petData in pairs(replication.Data.Pets) do
		-- Skip equipped pets
		if not petData.Equipped then
			-- Get pet rarity percentage
			local success, percentage = pcall(function()
				return petStats:GetPercentage(petData.Name)
			end)
			
			-- Delete pets with low percentage or low multipliers
			if (success and percentage and percentage < threshold) or 
			   (petData.Multiplier1 and petData.Multiplier1 < multiplierThreshold) then
				table.insert(petsToDelete, petId)
			end
		end
		
		-- Check if we should stop
		if not isDeleting then
			break
		end
	end
	
	-- Delete identified pets
	for _, petId in ipairs(petsToDelete) do
		if not isDeleting then
			break
		end
		
		local success = pcall(function()
			network:InvokeServer("DeletePet", petId)
		end)
		
		if success then
			statusLabel.Text = string.format("Status: Deleting... (%d left)", #petsToDelete - _)
		else
			statusLabel.Text = "Status: Error occurred"
		end
		
		task.wait(0.1)  -- Small delay
	end
	
	if isDeleting then
		statusLabel.Text = "Status: Completed one cycle"
	end
end

-- Toggle function
local function toggleDeletion()
	if isDeleting then
		-- Stop deletion
		isDeleting = false
		if deleteCoroutine then
			coroutine.close(deleteCoroutine)
			deleteCoroutine = nil
		end
		toggleButton.Text = "START AUTO-DELETE"
		toggleButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		statusLabel.Text = "Status: Stopped"
		statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
	else
		-- Start deletion
		isDeleting = true
		toggleButton.Text = "STOP AUTO-DELETE"
		toggleButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
		statusLabel.Text = "Status: Running..."
		statusLabel.TextColor3 = Color3.fromRGB(100, 255, 100)
		
		-- Start deletion in a coroutine
		deleteCoroutine = coroutine.create(function()
			while isDeleting do
				deleteLowValuePets()
				task.wait(5)  -- Wait 5 seconds between cycles
			end
		end)
		coroutine.resume(deleteCoroutine)
	end
end

-- Connect button events
toggleButton.MouseButton1Click:Connect(toggleDeletion)
closeButton.MouseButton1Click:Connect(function()
	screenGui:Destroy()
	if deleteCoroutine and isDeleting then
		isDeleting = false
		coroutine.close(deleteCoroutine)
	end
end)

-- Round corners function
local function roundCorners(object)
	local corner = Instance.new("UICorner")
	corner.CornerRadius = UDim.new(0, 6)
	corner.Parent = object
end

-- Apply rounded corners
roundCorners(mainFrame)
roundCorners(toggleButton)
roundCorners(percentageBox)
roundCorners(multiplierBox)
roundCorners(closeButton)

-- Add some padding
local padding = Instance.new("UIPadding")
padding.PaddingTop = UDim.new(0, 5)
padding.PaddingBottom = UDim.new(0, 5)
padding.PaddingLeft = UDim.new(0, 10)
padding.PaddingRight = UDim.new(0, 10)
padding.Parent = contentFrame

-- Make percentage and multiplier boxes only accept numbers
percentageBox.FocusLost:Connect(function()
	local num = tonumber(percentageBox.Text)
	if not num or num < 0 or num > 100 then
		percentageBox.Text = "50"
	end
end)

multiplierBox.FocusLost:Connect(function()
	local num = tonumber(multiplierBox.Text)
	if not num or num < 0 then
		multiplierBox.Text = "100"
	end
end)

-- Make the GUI visible
screenGui.Enabled = true
